{"version":3,"sources":["assets/heroes/ana-icon.png","assets/heroes/baptiste-icon.png","assets/heroes/bastion-icon.png","assets/heroes/bob-icon.png","assets/heroes/hanzo-icon.png","assets/heroes/lucio-icon.png","assets/heroes/mei-icon.png","assets/heroes/mercy-icon.png","assets/heroes/orisa-icon.png","assets/heroes/sigma-icon.png","assets/heroes/torbjorn-icon.png","assets/heroes/widowmaker-icon.png","assets/heroes/wreckingball-icon.png","assets/heroes/zarya-icon.png","assets/heroes/zenyatta-icon.png","assets/heroes sync /^/.*/.png$","assets/audio/overwatch-theme.mp3","assets/audio sync /^/.*/.mp3$","assets/audio/ana-intro.mp3","assets/audio/ashe-intro.mp3","assets/audio/baptiste-intro.mp3","assets/audio/bastion-intro.mp3","assets/audio/brigitte-intro.mp3","assets/audio/doomfist-intro.mp3","assets/audio/dvameka-intro.mp3","assets/audio/echo-intro.mp3","assets/audio/genji-intro.mp3","assets/audio/hanzo-intro.mp3","assets/audio/junkrat-intro.mp3","assets/audio/lucio-intro.mp3","assets/audio/mccree-intro.mp3","assets/audio/mei-intro.mp3","assets/audio/mercy-intro.mp3","assets/audio/moira-intro.mp3","assets/audio/orisa-intro.mp3","assets/audio/pharah-intro.mp3","assets/audio/reaper-intro.mp3","assets/audio/reinhardt-intro.mp3","assets/audio/roadhog-intro.mp3","assets/audio/sigma-intro.mp3","assets/audio/soldier-intro.mp3","assets/audio/sombra-intro.mp3","assets/audio/symmetra-intro.mp3","assets/audio/torbjorn-intro.mp3","assets/audio/tracer-intro.mp3","assets/audio/widowmaker-intro.mp3","assets/audio/winston-intro.mp3","assets/audio/wreckingball-intro.mp3","assets/audio/zarya-intro.mp3","assets/audio/zenyatta-intro.mp3","assets/heroes sync /^/.*/-icon/.png$","assets/heroes/ana.png","assets/heroes/ashe.png","assets/heroes/baptiste.png","assets/heroes/bastion.png","assets/heroes/bob.png","assets/heroes/brigitte.png","assets/heroes/doomfist.png","assets/heroes/dva.png","assets/heroes/dvameka.png","assets/heroes/echo.png","assets/heroes/genji.png","assets/heroes/hanzo.png","assets/heroes/junkrat.png","assets/heroes/lucio.png","assets/heroes/mccree.png","assets/heroes/mei.png","assets/heroes/mercy.png","assets/heroes/moira.png","assets/heroes/orisa.png","assets/heroes/pharah.png","assets/heroes/reaper.png","assets/heroes/reinhardt.png","assets/heroes/roadhog.png","assets/heroes/sigma.png","assets/heroes/soldier.png","assets/heroes/sombra.png","assets/heroes/symmetra.png","assets/heroes/torbjorn.png","assets/heroes/tracer.png","assets/heroes/widowmaker.png","assets/heroes/winston.png","assets/heroes/wreckingball.png","assets/heroes/zarya.png","assets/heroes/zenyatta.png","assets/card-back.png","assets/how-to-play.pdf","assets/audio/ana-grenade.mp3","assets/audio/ana-ult.mp3","assets/audio/announcer-defeat.mp3","assets/audio/announcer-initiatingmatch.mp3","assets/audio/announcer-preparetoattack.mp3","assets/audio/announcer-round1.mp3","assets/audio/announcer-round2.mp3","assets/audio/announcer-round3.mp3","assets/audio/announcer-victory.mp3","assets/audio/ashe-bob.mp3","assets/audio/ashe-deadlockgang.mp3","assets/audio/baptiste-immortality.mp3","assets/audio/baptiste-notover.mp3","assets/audio/bastion-ult.mp3","assets/audio/brigitte-armour.mp3","assets/audio/brigitte-ult.mp3","assets/audio/doomfist-punch.mp3","assets/audio/doomfist-ult.mp3","assets/audio/dva-ult.mp3","assets/audio/dvameka-apm.mp3","assets/audio/dvameka-nerfthis.mp3","assets/audio/echo-burning.mp3","assets/audio/echo-ult.mp3","assets/audio/genji-cutting.mp3","assets/audio/genji-ult.mp3","assets/audio/hanzo-marked.mp3","assets/audio/hanzo-ult.mp3","assets/audio/junkrat-laugh.mp3","assets/audio/junkrat-ult.mp3","assets/audio/junkrat-ult2.mp3","assets/audio/lucio-ampitup.mp3","assets/audio/lucio-heal.mp3","assets/audio/lucio-ult.mp3","assets/audio/mccree-fishinabarrel.mp3","assets/audio/mccree-ult.mp3","assets/audio/mei-goticed.mp3","assets/audio/mei-ult.mp3","assets/audio/mercy-damageboost.mp3","assets/audio/mercy-heal.mp3","assets/audio/mercy-heal2.mp3","assets/audio/mercy-medicalemergency.mp3","assets/audio/mercy-ult.mp3","assets/audio/mercy-watchingover.mp3","assets/audio/moira-grasp.mp3","assets/audio/moira-ult.mp3","assets/audio/orisa-barrier.mp3","assets/audio/orisa-ult.mp3","assets/audio/pharah-clear.mp3","assets/audio/pharah-ult.mp3","assets/audio/reaper-intro2.mp3","assets/audio/reaper-lastwords.mp3","assets/audio/reaper-ult.mp3","assets/audio/reinhardt-barrier.mp3","assets/audio/reinhardt-ult.mp3","assets/audio/roadhog-hogwild.mp3","assets/audio/roadhog-hook.mp3","assets/audio/roadhog-hook2.mp3","assets/audio/roadhog-hook3.mp3","assets/audio/roadhog-intro2.mp3","assets/audio/sigma-barrier.mp3","assets/audio/sigma-ult.mp3","assets/audio/soldier-targetrich.mp3","assets/audio/soldier-teamheal.mp3","assets/audio/soldier-ult.mp3","assets/audio/sombra-hack.mp3","assets/audio/sombra-ult.mp3","assets/audio/symmetra-shield.mp3","assets/audio/symmetra-teleporter.mp3","assets/audio/torbjorn-turret.mp3","assets/audio/torbjorn-ult.mp3","assets/audio/tracer-dejavu.mp3","assets/audio/tracer-imback.mp3","assets/audio/tracer-intro2.mp3","assets/audio/tracer-smarts.mp3","assets/audio/widowmaker-noonecanhide-fr.mp3","assets/audio/widowmaker-noonecanhide.mp3","assets/audio/widowmaker-oneshot.mp3","assets/audio/widowmaker-widowskiss.mp3","assets/audio/winston-angry.mp3","assets/audio/winston-barrier.mp3","assets/audio/winston-intro2.mp3","assets/audio/winston-protect.mp3","assets/audio/winston-rescue.mp3","assets/audio/winston-takecover.mp3","assets/audio/wreckingball-shields.mp3","assets/audio/wreckingball-squeaks.mp3","assets/audio/wreckingball-ult.mp3","assets/audio/zarya-barrier.mp3","assets/audio/zarya-barrierally.mp3","assets/audio/zarya-ult.mp3","assets/audio/zenyatta-discord.mp3","assets/audio/zenyatta-discord2.mp3","assets/audio/zenyatta-harmony.mp3","assets/audio/zenyatta-ult.mp3","assets/tutorialcard.jpg","assets/audio sync /^/.*/-intro/.mp3$","context/gameContext.js","context/turnContext.js","data.js","helper.js","components/layout/PlayerButtons.js","components/layout/PowerCounter.js","components/layout/MatchCounter.js","components/layout/HeroCounter.js","components/cards/CardEffects.js","assets/healthbackground-hexagon.png","components/cards/HealthCounter.js","components/cards/ShieldCounter.js","components/cards/Card.js","components/layout/CardDisplay.js","components/layout/PlayerArea.js","components/layout/SynergyCounter.js","components/layout/CounterArea.js","components/layout/BoardRow.js","components/layout/PlayerBoard.js","components/layout/PlayerHalf.js","assets/logo3.png","components/layout/AudioPlayer.js","components/layout/TitleCard.js","components/layout/Footer.js","components/cards/HeroAbilities.js","components/cards/CardFocus.js","components/layout/Tutorial.js","App.js","index.js"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","gameContext","createContext","turnContext","data","heroes","ana","name","image","icon","effects","anaUltimateEffect","hero","player","target","type","on","value","health","power","f","m","b","synergy","isImplemented","ashe","bob","bobEnemyEffect","baptiste","baptisteAllyEffect","bastion","bastionEnemyEffect","brigitte","doomfist","dvameka","dva","echo","genji","hanzo","hanzoEnemyEffect","junkrat","lucio","lucioAllyEffect","mccree","mei","meiEnemyEffect","mercy","mercyAllyEffect1","mercyAllyEffect2","moira","orisa","orisaAllyEffect","orisaUltimateEffect","pharah","reaper","reinhardt","roadhog","sigma","soldier","sombra","symmetra","torbjorn","torbjornEnemyEffect","tracer","widowmaker","widowmakerEnemyEffect","winston","wreckingball","wreckingballEnemyEffect","zarya","zaryaShieldRemaining","zenyatta","zenyattaAllyEffect","zenyattaEnemyEffect","playerCards","player1cards","cards","player2cards","rows","player1hand","cardIds","cardsPlayed","totalPower","values","this","reduce","a","player2hand","label","allyEffects","enemyEffects","shield","totalShield","shieldValue","PlayerCard","playerNum","heroId","heroData","playerHeroId","isPlayed","maxHealth","slice","newCard","isDiscarded","ability1Used","ability2Used","JSON","parse","stringify","key","console","log","getRandInt","min","max","Math","floor","random","PlayerHand","props","useContext","gameState","dispatch","turnState","setTurnState","parseInt","playerHandId","playerCardsId","handCards","nextCardDraw","setNextCardDraw","setCardFocus","className","disabled","length","onClick","ACTIONS","CREATE_CARD","payload","prevState","newCardId","randInt","randKey","ADD_CARD_TO_HAND","playerTurn","turnCount","PowerCounter","MatchCounter","matchState","wins","HeroCounter","rowId","src","require","default","alt","CardEffects","effect","HealthCounter","ShieldCounter","Card","index","getStyle","style","snapshot","isDropAnimating","transitionDuration","draggableId","isDragDisabled","provided","draggableProps","dragHandleProps","isDragging","ref","innerRef","CardDisplay","useState","direction","window","innerWidth","rowDirection","setRowDirection","addEventListener","windowWidth","listClass","droppableId","overflown","setOverflown","useEffect","element","document","getElementById","scrollHeight","clientHeight","scrollWidth","clientWidth","isDraggingOver","droppableProps","cardId","placeholder","PlayerArea","playerAreaId","SynergyCounter","CounterArea","BoardRow","isOverflown","rowPosition","synergyValue","rowShield","playerPower","SET_POWER","powerValue","PlayerBoard","PlayerHalf","AudioPlayer","playAudio","setPlayAudio","audio","volume","play","pause","loop","TitleCard","rel","href","owlogo","Footer","HeroAbilities","enemyPlayerNum","unsetCardFocus","currentCard","targetRef","useRef","turnRef","enemiesHitByAbility","currentHeroAbilityRef","applyDamage","damageValue","targetCardId","targetRow","ignoreShields","targetPlayerNum","targetPlayerCards","targetHealth","targetShield","targetRowShield","targetRowAllyEffects","filter","targetRowEnemyEffects","totalRowEffect","targetCardAllyEffects","targetCardEnemyEffects","totalCardEffect","totalEffect","current","rowShieldDamage","i","err","DAMAGE_ROW_SHIELD","EDIT_CARD","editKeys","editValues","applyHealing","healingValue","targetMaxHealth","healingDone","abilities","ability1","audioFile","run","Promise","reject","$","closest","attr","off","enemyPlayer","playerRowCardIds","enemyPlayerRowCardIds","ability2","synergyCost","targetCardRow","targetCardIndex","targets","forEach","undefined","adjacentEnemy1","adjacentEnemy2","remainingHealing","UPDATE_CARD","updateKeys","updateValues","newRowId","MOVE_CARD","startRowId","finishRowId","startIndex","finishIndex","dvamekaIndex","DISCARD_CARD","dvaIndex","targetPlayer","targetCard","echoUltHeroId","localStorage","getItem","alert","maxTargets","ADD_ROW_EFFECT","effectId","targetRowId","junkratStartIndex","newRowPosition","targetRowCardIds","card","heroRowCardIds","rowEnemies","UPDATE_SYNERGY","abs","damagePerEnemy","damageDone","remainingDamage","applyRemainingDamage","ADD_CARD_EFFECT","mercyStartIndex","moiraAbility1Stage2","targetedPlayer","ADD_ROW_SHIELD","enemyBackRowCards","Array","from","enemyMiddleRowCards","enemyFrontRowCards","enemyRows","totalDamage","totalEnemyCards","row","SET_SYNERGY","newSynergyVal","teleportCardId","teleportCardIndex","teleportCardRow","newRow","EDIT_ROW","newEffects","UPDATE_ROW","torbPlayer","turretDamage","attackedEnemies","includes","push","winstonStartIndex","newShield","stopPropagation","Audio","rowSynergy","setItem","allyRowEffects","enemyRowEffects","cardEffects","CardFocus","cardFocus","heroRef","Tutorial","position","right","top","background","border","hide","REMOVE_EFFECTS","UPDATE_POWER","reducer","action","produce","draft","cardEffect","rowEffect","targetRowShieldArr","outer","x","splice","_","set","startRow","finishRow","newCardIds","newStartRowCardIds","newFinishRowCardIds","rowPower","newPower","newSynergy","App","useReducer","player1","player2","wonLastRound","setMatchState","player1Passed","player2Passed","matchRef","totalPower1","totalPower2","player1Rows","player2Rows","winningPlayer","player1Synergy","player2Synergy","location","reload","player1RowIds","player2RowIds","player1Cards","player2Cards","endRound","Provider","onDragEnd","result","destination","source","finishPosition","addSynergy","ReactDOM","render","StrictMode"],"mappings":"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AA0B,mC,6BCAzC,OAAe,cAA0B,oC,6BCAzC,OAAe,cAA0B,oC,6BCAzC,OAAe,cAA0B,uC,6BCAzC,OAAe,cAA0B,qC,6BCAzC,OAAe,cAA0B,mC,6BCAzC,OAAe,cAA0B,qC,6BCAzC,OAAe,cAA0B,oC,6BCAzC,OAAe,cAA0B,sC,6BCAzC,OAAe,cAA0B,sC,6BCAzC,OAAe,cAA0B,oC,6BCAzC,OAAe,cAA0B,wC,6BCAzC,OAAe,cAA0B,qC,6BCAzC,OAAe,cAA0B,0C,6BCAzC,OAAe,cAA0B,mC,6BCAzC,OAAe,cAA0B,sC,6BCAzC,OAAe,cAA0B,uC,6BCAzC,OAAe,cAA0B,yC,8BCAzC,OAAe,cAA0B,yC,6BCAzC,OAAe,cAA0B,qC,6BCAzC,OAAe,cAA0B,8C,6BCAzC,OAAe,cAA0B,uD,6BCAzC,OAAe,cAA0B,uD,6BCAzC,OAAe,cAA0B,8C,6BCAzC,OAAe,cAA0B,8C,6BCAzC,OAAe,cAA0B,8C,6BCAzC,OAAe,cAA0B,+C,6BCAzC,OAAe,cAA0B,sC,6BCAzC,OAAe,cAA0B,+C,6BCAzC,OAAe,cAA0B,kD,6BCAzC,OAAe,cAA0B,8C,6BCAzC,OAAe,cAA0B,yC,6BCAzC,OAAe,cAA0B,6C,6BCAzC,OAAe,cAA0B,0C,6BCAzC,OAAe,cAA0B,4C,6BCAzC,OAAe,cAA0B,0C,6BCAzC,OAAe,cAA0B,qC,6BCAzC,OAAe,cAA0B,yC,6BCAzC,OAAe,cAA0B,8C,6BCAzC,OAAe,cAA0B,0C,6BCAzC,OAAe,cAA0B,sC,6BCAzC,OAAe,cAA0B,2C,6BCAzC,OAAe,cAA0B,uC,6BCAzC,OAAe,cAA0B,0C,6BCAzC,OAAe,cAA0B,uC,6BCAzC,OAAe,cAA0B,2C,6BCAzC,OAAe,cAA0B,yC,6BCAzC,OAAe,cAA0B,0C,6BCAzC,OAAe,cAA0B,2C,6BCAzC,OAAe,cAA0B,wC,6BCAzC,OAAe,cAA0B,uC,6BCAzC,OAAe,cAA0B,kD,6BCAzC,OAAe,cAA0B,wC,6BCAzC,OAAe,cAA0B,yC,6BCAzC,OAAe,cAA0B,qC,6BCAzC,OAAe,cAA0B,+C,6BCAzC,OAAe,cAA0B,wC,6BCAzC,OAAe,cAA0B,yC,6BCAzC,OAAe,cAA0B,oD,6BCAzC,OAAe,cAA0B,uC,6BCAzC,OAAe,cAA0B,gD,6BCAzC,OAAe,cAA0B,yC,6BCAzC,OAAe,cAA0B,uC,6BCAzC,OAAe,cAA0B,2C,6BCAzC,OAAe,cAA0B,uC,6BCAzC,OAAe,cAA0B,0C,6BCAzC,OAAe,cAA0B,wC,6BCAzC,OAAe,cAA0B,2C,6BCAzC,OAAe,cAA0B,8C,6BCAzC,OAAe,cAA0B,wC,6BCAzC,OAAe,cAA0B,+C,6BCAzC,OAAe,cAA0B,2C,6BCAzC,OAAe,cAA0B,6C,6BCAzC,OAAe,cAA0B,0C,6BCAzC,OAAe,cAA0B,2C,6BCAzC,OAAe,cAA0B,2C,6BCAzC,OAAe,cAA0B,4C,6BCAzC,OAAe,cAA0B,2C,6BCAzC,OAAe,cAA0B,uC,6BCAzC,OAAe,cAA0B,gD,6BCAzC,OAAe,cAA0B,8C,6BCAzC,OAAe,cAA0B,yC,6BCAzC,OAAe,cAA0B,yC,6BCAzC,OAAe,cAA0B,wC,6BCAzC,OAAe,cAA0B,6C,6BCAzC,OAAe,cAA0B,iD,6BCAzC,OAAe,cAA0B,6C,6BCAzC,OAAe,cAA0B,0C,6BCAzC,OAAe,cAA0B,2C,6BCAzC,OAAe,cAA0B,2C,6BCAzC,OAAe,cAA0B,2C,6BCAzC,OAAe,cAA0B,2C,6BCAzC,OAAe,cAA0B,wD,6BCAzC,OAAe,cAA0B,qD,6BCAzC,OAAe,cAA0B,gD,6BCAzC,OAAe,cAA0B,mD,6BCAzC,OAAe,cAA0B,2C,6BCAzC,OAAe,cAA0B,6C,6BCAzC,OAAe,cAA0B,4C,6BCAzC,OAAe,cAA0B,6C,6BCAzC,OAAe,cAA0B,4C,6BCAzC,OAAe,cAA0B,+C,6BCAzC,OAAe,cAA0B,kD,6BCAzC,OAAe,cAA0B,kD,6BCAzC,OAAe,cAA0B,8C,6BCAzC,OAAe,cAA0B,2C,6BCAzC,OAAe,cAA0B,+C,6BCAzC,OAAe,cAA0B,uC,6BCAzC,OAAe,cAA0B,8C,6BCAzC,OAAe,cAA0B,+C,6BCAzC,OAAe,cAA0B,8C,6BCAzC,OAAe,cAA0B,0C,8BCAzC,OAAe,cAA0B,0C,gBCAzC,IAAIH,EAAM,CACT,kBAAmB,GACnB,mBAA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","file":"static/js/main.b1019029.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/ana-icon.0a9b633a.png\";","export default __webpack_public_path__ + \"static/media/baptiste-icon.2f79217b.png\";","export default __webpack_public_path__ + \"static/media/bastion-icon.43554851.png\";","export default __webpack_public_path__ + \"static/media/bob-icon.95fe3da4.png\";","export default __webpack_public_path__ + \"static/media/hanzo-icon.0498f942.png\";","export default __webpack_public_path__ + \"static/media/lucio-icon.9c4b209d.png\";","export default __webpack_public_path__ + \"static/media/mei-icon.511f6a1e.png\";","export default __webpack_public_path__ + \"static/media/mercy-icon.ec50d5ca.png\";","export default __webpack_public_path__ + \"static/media/orisa-icon.db0c11fd.png\";","export default __webpack_public_path__ + \"static/media/sigma-icon.4c97616c.png\";","export default __webpack_public_path__ + \"static/media/torbjorn-icon.9efb7940.png\";","export default __webpack_public_path__ + \"static/media/widowmaker-icon.2036fc9e.png\";","export default __webpack_public_path__ + \"static/media/wreckingball-icon.d593d1dc.png\";","export default __webpack_public_path__ + \"static/media/zarya-icon.1f8a8962.png\";","export default __webpack_public_path__ + \"static/media/zenyatta-icon.6a7ae0d9.png\";","var map = {\n\t\"./ana-icon.png\": 19,\n\t\"./ana.png\": 87,\n\t\"./ashe.png\": 88,\n\t\"./baptiste-icon.png\": 20,\n\t\"./baptiste.png\": 89,\n\t\"./bastion-icon.png\": 21,\n\t\"./bastion.png\": 90,\n\t\"./bob-icon.png\": 22,\n\t\"./bob.png\": 91,\n\t\"./brigitte.png\": 92,\n\t\"./doomfist.png\": 93,\n\t\"./dva.png\": 94,\n\t\"./dvameka.png\": 95,\n\t\"./echo.png\": 96,\n\t\"./genji.png\": 97,\n\t\"./hanzo-icon.png\": 23,\n\t\"./hanzo.png\": 98,\n\t\"./junkrat.png\": 99,\n\t\"./lucio-icon.png\": 24,\n\t\"./lucio.png\": 100,\n\t\"./mccree.png\": 101,\n\t\"./mei-icon.png\": 25,\n\t\"./mei.png\": 102,\n\t\"./mercy-icon.png\": 26,\n\t\"./mercy.png\": 103,\n\t\"./moira.png\": 104,\n\t\"./orisa-icon.png\": 27,\n\t\"./orisa.png\": 105,\n\t\"./pharah.png\": 106,\n\t\"./reaper.png\": 107,\n\t\"./reinhardt.png\": 108,\n\t\"./roadhog.png\": 109,\n\t\"./sigma-icon.png\": 28,\n\t\"./sigma.png\": 110,\n\t\"./soldier.png\": 111,\n\t\"./sombra.png\": 112,\n\t\"./symmetra.png\": 113,\n\t\"./torbjorn-icon.png\": 29,\n\t\"./torbjorn.png\": 114,\n\t\"./tracer.png\": 115,\n\t\"./widowmaker-icon.png\": 30,\n\t\"./widowmaker.png\": 116,\n\t\"./winston.png\": 117,\n\t\"./wreckingball-icon.png\": 31,\n\t\"./wreckingball.png\": 118,\n\t\"./zarya-icon.png\": 32,\n\t\"./zarya.png\": 119,\n\t\"./zenyatta-icon.png\": 33,\n\t\"./zenyatta.png\": 120\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 35;","export default __webpack_public_path__ + \"static/media/overwatch-theme.76802417.mp3\";","var map = {\n\t\"./ana-grenade.mp3\": 124,\n\t\"./ana-intro.mp3\": 38,\n\t\"./ana-ult.mp3\": 125,\n\t\"./announcer-defeat.mp3\": 126,\n\t\"./announcer-initiatingmatch.mp3\": 127,\n\t\"./announcer-preparetoattack.mp3\": 128,\n\t\"./announcer-round1.mp3\": 129,\n\t\"./announcer-round2.mp3\": 130,\n\t\"./announcer-round3.mp3\": 131,\n\t\"./announcer-victory.mp3\": 132,\n\t\"./ashe-bob.mp3\": 133,\n\t\"./ashe-deadlockgang.mp3\": 134,\n\t\"./ashe-intro.mp3\": 39,\n\t\"./baptiste-immortality.mp3\": 135,\n\t\"./baptiste-intro.mp3\": 40,\n\t\"./baptiste-notover.mp3\": 136,\n\t\"./bastion-intro.mp3\": 41,\n\t\"./bastion-ult.mp3\": 137,\n\t\"./brigitte-armour.mp3\": 138,\n\t\"./brigitte-intro.mp3\": 42,\n\t\"./brigitte-ult.mp3\": 139,\n\t\"./doomfist-intro.mp3\": 43,\n\t\"./doomfist-punch.mp3\": 140,\n\t\"./doomfist-ult.mp3\": 141,\n\t\"./dva-ult.mp3\": 142,\n\t\"./dvameka-apm.mp3\": 143,\n\t\"./dvameka-intro.mp3\": 44,\n\t\"./dvameka-nerfthis.mp3\": 144,\n\t\"./echo-burning.mp3\": 145,\n\t\"./echo-intro.mp3\": 45,\n\t\"./echo-ult.mp3\": 146,\n\t\"./genji-cutting.mp3\": 147,\n\t\"./genji-intro.mp3\": 46,\n\t\"./genji-ult.mp3\": 148,\n\t\"./hanzo-intro.mp3\": 47,\n\t\"./hanzo-marked.mp3\": 149,\n\t\"./hanzo-ult.mp3\": 150,\n\t\"./junkrat-intro.mp3\": 48,\n\t\"./junkrat-laugh.mp3\": 151,\n\t\"./junkrat-ult.mp3\": 152,\n\t\"./junkrat-ult2.mp3\": 153,\n\t\"./lucio-ampitup.mp3\": 154,\n\t\"./lucio-heal.mp3\": 155,\n\t\"./lucio-intro.mp3\": 49,\n\t\"./lucio-ult.mp3\": 156,\n\t\"./mccree-fishinabarrel.mp3\": 157,\n\t\"./mccree-intro.mp3\": 50,\n\t\"./mccree-ult.mp3\": 158,\n\t\"./mei-goticed.mp3\": 159,\n\t\"./mei-intro.mp3\": 51,\n\t\"./mei-ult.mp3\": 160,\n\t\"./mercy-damageboost.mp3\": 161,\n\t\"./mercy-heal.mp3\": 162,\n\t\"./mercy-heal2.mp3\": 163,\n\t\"./mercy-intro.mp3\": 52,\n\t\"./mercy-medicalemergency.mp3\": 164,\n\t\"./mercy-ult.mp3\": 165,\n\t\"./mercy-watchingover.mp3\": 166,\n\t\"./moira-grasp.mp3\": 167,\n\t\"./moira-intro.mp3\": 53,\n\t\"./moira-ult.mp3\": 168,\n\t\"./orisa-barrier.mp3\": 169,\n\t\"./orisa-intro.mp3\": 54,\n\t\"./orisa-ult.mp3\": 170,\n\t\"./overwatch-theme.mp3\": 36,\n\t\"./pharah-clear.mp3\": 171,\n\t\"./pharah-intro.mp3\": 55,\n\t\"./pharah-ult.mp3\": 172,\n\t\"./reaper-intro.mp3\": 56,\n\t\"./reaper-intro2.mp3\": 173,\n\t\"./reaper-lastwords.mp3\": 174,\n\t\"./reaper-ult.mp3\": 175,\n\t\"./reinhardt-barrier.mp3\": 176,\n\t\"./reinhardt-intro.mp3\": 57,\n\t\"./reinhardt-ult.mp3\": 177,\n\t\"./roadhog-hogwild.mp3\": 178,\n\t\"./roadhog-hook.mp3\": 179,\n\t\"./roadhog-hook2.mp3\": 180,\n\t\"./roadhog-hook3.mp3\": 181,\n\t\"./roadhog-intro.mp3\": 58,\n\t\"./roadhog-intro2.mp3\": 182,\n\t\"./sigma-barrier.mp3\": 183,\n\t\"./sigma-intro.mp3\": 59,\n\t\"./sigma-ult.mp3\": 184,\n\t\"./soldier-intro.mp3\": 60,\n\t\"./soldier-targetrich.mp3\": 185,\n\t\"./soldier-teamheal.mp3\": 186,\n\t\"./soldier-ult.mp3\": 187,\n\t\"./sombra-hack.mp3\": 188,\n\t\"./sombra-intro.mp3\": 61,\n\t\"./sombra-ult.mp3\": 189,\n\t\"./symmetra-intro.mp3\": 62,\n\t\"./symmetra-shield.mp3\": 190,\n\t\"./symmetra-teleporter.mp3\": 191,\n\t\"./torbjorn-intro.mp3\": 63,\n\t\"./torbjorn-turret.mp3\": 192,\n\t\"./torbjorn-ult.mp3\": 193,\n\t\"./tracer-dejavu.mp3\": 194,\n\t\"./tracer-imback.mp3\": 195,\n\t\"./tracer-intro.mp3\": 64,\n\t\"./tracer-intro2.mp3\": 196,\n\t\"./tracer-smarts.mp3\": 197,\n\t\"./widowmaker-intro.mp3\": 65,\n\t\"./widowmaker-noonecanhide-fr.mp3\": 198,\n\t\"./widowmaker-noonecanhide.mp3\": 199,\n\t\"./widowmaker-oneshot.mp3\": 200,\n\t\"./widowmaker-widowskiss.mp3\": 201,\n\t\"./winston-angry.mp3\": 202,\n\t\"./winston-barrier.mp3\": 203,\n\t\"./winston-intro.mp3\": 66,\n\t\"./winston-intro2.mp3\": 204,\n\t\"./winston-protect.mp3\": 205,\n\t\"./winston-rescue.mp3\": 206,\n\t\"./winston-takecover.mp3\": 207,\n\t\"./wreckingball-intro.mp3\": 67,\n\t\"./wreckingball-shields.mp3\": 208,\n\t\"./wreckingball-squeaks.mp3\": 209,\n\t\"./wreckingball-ult.mp3\": 210,\n\t\"./zarya-barrier.mp3\": 211,\n\t\"./zarya-barrierally.mp3\": 212,\n\t\"./zarya-intro.mp3\": 68,\n\t\"./zarya-ult.mp3\": 213,\n\t\"./zenyatta-discord.mp3\": 214,\n\t\"./zenyatta-discord2.mp3\": 215,\n\t\"./zenyatta-harmony.mp3\": 216,\n\t\"./zenyatta-intro.mp3\": 69,\n\t\"./zenyatta-ult.mp3\": 217\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 37;","export default __webpack_public_path__ + \"static/media/ana-intro.ed77b6db.mp3\";","export default __webpack_public_path__ + \"static/media/ashe-intro.9286f130.mp3\";","export default __webpack_public_path__ + \"static/media/baptiste-intro.ff4eda23.mp3\";","export default __webpack_public_path__ + \"static/media/bastion-intro.da0169f9.mp3\";","export default __webpack_public_path__ + \"static/media/brigitte-intro.c0395844.mp3\";","export default __webpack_public_path__ + \"static/media/doomfist-intro.cdc4e0a8.mp3\";","export default __webpack_public_path__ + \"static/media/dvameka-intro.cd7aad32.mp3\";","export default __webpack_public_path__ + \"static/media/echo-intro.514af561.mp3\";","export default __webpack_public_path__ + \"static/media/genji-intro.3d4bad41.mp3\";","export default __webpack_public_path__ + \"static/media/hanzo-intro.6c136b77.mp3\";","export default __webpack_public_path__ + \"static/media/junkrat-intro.425041e9.mp3\";","export default __webpack_public_path__ + \"static/media/lucio-intro.98585741.mp3\";","export default __webpack_public_path__ + \"static/media/mccree-intro.5c95b11f.mp3\";","export default __webpack_public_path__ + \"static/media/mei-intro.266e07ac.mp3\";","export default __webpack_public_path__ + \"static/media/mercy-intro.111280f6.mp3\";","export default __webpack_public_path__ + \"static/media/moira-intro.469c3328.mp3\";","export default __webpack_public_path__ + \"static/media/orisa-intro.33fe7bb0.mp3\";","export default __webpack_public_path__ + \"static/media/pharah-intro.17025e7a.mp3\";","export default __webpack_public_path__ + \"static/media/reaper-intro.8b3a3651.mp3\";","export default __webpack_public_path__ + \"static/media/reinhardt-intro.0fc43bf3.mp3\";","export default __webpack_public_path__ + \"static/media/roadhog-intro.7ef1d4f3.mp3\";","export default __webpack_public_path__ + \"static/media/sigma-intro.c5db42d3.mp3\";","export default __webpack_public_path__ + \"static/media/soldier-intro.22decc49.mp3\";","export default __webpack_public_path__ + \"static/media/sombra-intro.fba7b53b.mp3\";","export default __webpack_public_path__ + \"static/media/symmetra-intro.4cfb7b6e.mp3\";","export default __webpack_public_path__ + \"static/media/torbjorn-intro.988f9307.mp3\";","export default __webpack_public_path__ + \"static/media/tracer-intro.ce22d491.mp3\";","export default __webpack_public_path__ + \"static/media/widowmaker-intro.d3928b18.mp3\";","export default __webpack_public_path__ + \"static/media/winston-intro.aeace8aa.mp3\";","export default __webpack_public_path__ + \"static/media/wreckingball-intro.b811ff66.mp3\";","export default __webpack_public_path__ + \"static/media/zarya-intro.f178952d.mp3\";","export default __webpack_public_path__ + \"static/media/zenyatta-intro.05d9522b.mp3\";","var map = {\n\t\"./ana-icon.png\": 19,\n\t\"./baptiste-icon.png\": 20,\n\t\"./bastion-icon.png\": 21,\n\t\"./bob-icon.png\": 22,\n\t\"./hanzo-icon.png\": 23,\n\t\"./lucio-icon.png\": 24,\n\t\"./mei-icon.png\": 25,\n\t\"./mercy-icon.png\": 26,\n\t\"./orisa-icon.png\": 27,\n\t\"./sigma-icon.png\": 28,\n\t\"./torbjorn-icon.png\": 29,\n\t\"./widowmaker-icon.png\": 30,\n\t\"./wreckingball-icon.png\": 31,\n\t\"./zarya-icon.png\": 32,\n\t\"./zenyatta-icon.png\": 33\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 81;","export default __webpack_public_path__ + \"static/media/ana.c4d5dcd2.png\";","export default __webpack_public_path__ + \"static/media/ashe.c8ee9b5f.png\";","export default __webpack_public_path__ + \"static/media/baptiste.6fb20f37.png\";","export default __webpack_public_path__ + \"static/media/bastion.33315b10.png\";","export default __webpack_public_path__ + \"static/media/bob.ea6ee1be.png\";","export default __webpack_public_path__ + \"static/media/brigitte.04a3a387.png\";","export default __webpack_public_path__ + \"static/media/doomfist.d677c887.png\";","export default __webpack_public_path__ + \"static/media/dva.a8d7c43b.png\";","export default __webpack_public_path__ + \"static/media/dvameka.ccad111d.png\";","export default __webpack_public_path__ + \"static/media/echo.c37d3e07.png\";","export default __webpack_public_path__ + \"static/media/genji.a21c2bd8.png\";","export default __webpack_public_path__ + \"static/media/hanzo.9793e627.png\";","export default __webpack_public_path__ + \"static/media/junkrat.93bd42b0.png\";","export default __webpack_public_path__ + \"static/media/lucio.e6b135cb.png\";","export default __webpack_public_path__ + \"static/media/mccree.35970bd2.png\";","export default __webpack_public_path__ + \"static/media/mei.cc0a40e6.png\";","export default __webpack_public_path__ + \"static/media/mercy.5e2b505b.png\";","export default __webpack_public_path__ + \"static/media/moira.5a98ab86.png\";","export default __webpack_public_path__ + \"static/media/orisa.545ff1f0.png\";","export default __webpack_public_path__ + \"static/media/pharah.6fd6aadb.png\";","export default __webpack_public_path__ + \"static/media/reaper.9686a94a.png\";","export default __webpack_public_path__ + \"static/media/reinhardt.b24a2d3d.png\";","export default __webpack_public_path__ + \"static/media/roadhog.976fb9be.png\";","export default __webpack_public_path__ + \"static/media/sigma.5b8014d0.png\";","export default __webpack_public_path__ + \"static/media/soldier.aee595af.png\";","export default __webpack_public_path__ + \"static/media/sombra.fcc80dad.png\";","export default __webpack_public_path__ + \"static/media/symmetra.96e8f930.png\";","export default __webpack_public_path__ + \"static/media/torbjorn.330ee2a0.png\";","export default __webpack_public_path__ + \"static/media/tracer.7cb14be6.png\";","export default __webpack_public_path__ + \"static/media/widowmaker.a69e8676.png\";","export default __webpack_public_path__ + \"static/media/winston.dd226a22.png\";","export default __webpack_public_path__ + \"static/media/wreckingball.c5190563.png\";","export default __webpack_public_path__ + \"static/media/zarya.1a32a035.png\";","export default __webpack_public_path__ + \"static/media/zenyatta.2d7666c3.png\";","export default __webpack_public_path__ + \"static/media/card-back.fb9991d0.png\";","export default __webpack_public_path__ + \"static/media/how-to-play.6e96acc1.pdf\";","export default __webpack_public_path__ + \"static/media/ana-grenade.f80883bc.mp3\";","export default __webpack_public_path__ + \"static/media/ana-ult.2e34290d.mp3\";","export default __webpack_public_path__ + \"static/media/announcer-defeat.752ab770.mp3\";","export default __webpack_public_path__ + \"static/media/announcer-initiatingmatch.819b0838.mp3\";","export default __webpack_public_path__ + \"static/media/announcer-preparetoattack.137439a1.mp3\";","export default __webpack_public_path__ + \"static/media/announcer-round1.05b4f85f.mp3\";","export default __webpack_public_path__ + \"static/media/announcer-round2.fd334bab.mp3\";","export default __webpack_public_path__ + \"static/media/announcer-round3.624f4180.mp3\";","export default __webpack_public_path__ + \"static/media/announcer-victory.4a5845e3.mp3\";","export default __webpack_public_path__ + \"static/media/ashe-bob.36eeca7e.mp3\";","export default __webpack_public_path__ + \"static/media/ashe-deadlockgang.bd98b6cc.mp3\";","export default __webpack_public_path__ + \"static/media/baptiste-immortality.27b9af85.mp3\";","export default __webpack_public_path__ + \"static/media/baptiste-notover.0d22d8cd.mp3\";","export default __webpack_public_path__ + \"static/media/bastion-ult.b8af96ec.mp3\";","export default __webpack_public_path__ + \"static/media/brigitte-armour.41b57cbf.mp3\";","export default __webpack_public_path__ + \"static/media/brigitte-ult.5526abc8.mp3\";","export default __webpack_public_path__ + \"static/media/doomfist-punch.05702c67.mp3\";","export default __webpack_public_path__ + \"static/media/doomfist-ult.c046b23c.mp3\";","export default __webpack_public_path__ + \"static/media/dva-ult.cfce27a6.mp3\";","export default __webpack_public_path__ + \"static/media/dvameka-apm.f6d0d0fb.mp3\";","export default __webpack_public_path__ + \"static/media/dvameka-nerfthis.7232d735.mp3\";","export default __webpack_public_path__ + \"static/media/echo-burning.b3de34e4.mp3\";","export default __webpack_public_path__ + \"static/media/echo-ult.fd2a5c35.mp3\";","export default __webpack_public_path__ + \"static/media/genji-cutting.7ccea757.mp3\";","export default __webpack_public_path__ + \"static/media/genji-ult.c69d24f0.mp3\";","export default __webpack_public_path__ + \"static/media/hanzo-marked.079d5219.mp3\";","export default __webpack_public_path__ + \"static/media/hanzo-ult.ae5213fa.mp3\";","export default __webpack_public_path__ + \"static/media/junkrat-laugh.7eaafa68.mp3\";","export default __webpack_public_path__ + \"static/media/junkrat-ult.2100f67c.mp3\";","export default __webpack_public_path__ + \"static/media/junkrat-ult2.52bc219b.mp3\";","export default __webpack_public_path__ + \"static/media/lucio-ampitup.047c0758.mp3\";","export default __webpack_public_path__ + \"static/media/lucio-heal.3917c344.mp3\";","export default __webpack_public_path__ + \"static/media/lucio-ult.00910e50.mp3\";","export default __webpack_public_path__ + \"static/media/mccree-fishinabarrel.90cacf35.mp3\";","export default __webpack_public_path__ + \"static/media/mccree-ult.b02795d4.mp3\";","export default __webpack_public_path__ + \"static/media/mei-goticed.85c85415.mp3\";","export default __webpack_public_path__ + \"static/media/mei-ult.d026f0ed.mp3\";","export default __webpack_public_path__ + \"static/media/mercy-damageboost.caa15b51.mp3\";","export default __webpack_public_path__ + \"static/media/mercy-heal.3c95609f.mp3\";","export default __webpack_public_path__ + \"static/media/mercy-heal2.44f791db.mp3\";","export default __webpack_public_path__ + \"static/media/mercy-medicalemergency.ec7a8ffa.mp3\";","export default __webpack_public_path__ + \"static/media/mercy-ult.c672d241.mp3\";","export default __webpack_public_path__ + \"static/media/mercy-watchingover.ea7e66e5.mp3\";","export default __webpack_public_path__ + \"static/media/moira-grasp.a7fcffe3.mp3\";","export default __webpack_public_path__ + \"static/media/moira-ult.a44822fd.mp3\";","export default __webpack_public_path__ + \"static/media/orisa-barrier.4a2ea800.mp3\";","export default __webpack_public_path__ + \"static/media/orisa-ult.74fddc72.mp3\";","export default __webpack_public_path__ + \"static/media/pharah-clear.b1067cd1.mp3\";","export default __webpack_public_path__ + \"static/media/pharah-ult.3a99301d.mp3\";","export default __webpack_public_path__ + \"static/media/reaper-intro2.a6515d7c.mp3\";","export default __webpack_public_path__ + \"static/media/reaper-lastwords.9e365a93.mp3\";","export default __webpack_public_path__ + \"static/media/reaper-ult.55c62576.mp3\";","export default __webpack_public_path__ + \"static/media/reinhardt-barrier.0e99cebd.mp3\";","export default __webpack_public_path__ + \"static/media/reinhardt-ult.e1012347.mp3\";","export default __webpack_public_path__ + \"static/media/roadhog-hogwild.59c2de16.mp3\";","export default __webpack_public_path__ + \"static/media/roadhog-hook.158ac2dd.mp3\";","export default __webpack_public_path__ + \"static/media/roadhog-hook2.ed1f13b0.mp3\";","export default __webpack_public_path__ + \"static/media/roadhog-hook3.59ef57d0.mp3\";","export default __webpack_public_path__ + \"static/media/roadhog-intro2.cbfea062.mp3\";","export default __webpack_public_path__ + \"static/media/sigma-barrier.94cc5bd4.mp3\";","export default __webpack_public_path__ + \"static/media/sigma-ult.700e751b.mp3\";","export default __webpack_public_path__ + \"static/media/soldier-targetrich.fcfff085.mp3\";","export default __webpack_public_path__ + \"static/media/soldier-teamheal.69123907.mp3\";","export default __webpack_public_path__ + \"static/media/soldier-ult.bc22da81.mp3\";","export default __webpack_public_path__ + \"static/media/sombra-hack.27085e76.mp3\";","export default __webpack_public_path__ + \"static/media/sombra-ult.99360398.mp3\";","export default __webpack_public_path__ + \"static/media/symmetra-shield.0492ae75.mp3\";","export default __webpack_public_path__ + \"static/media/symmetra-teleporter.fd96367d.mp3\";","export default __webpack_public_path__ + \"static/media/torbjorn-turret.08913351.mp3\";","export default __webpack_public_path__ + \"static/media/torbjorn-ult.aed62c22.mp3\";","export default __webpack_public_path__ + \"static/media/tracer-dejavu.fef0e4ad.mp3\";","export default __webpack_public_path__ + \"static/media/tracer-imback.460b74be.mp3\";","export default __webpack_public_path__ + \"static/media/tracer-intro2.34f5db5e.mp3\";","export default __webpack_public_path__ + \"static/media/tracer-smarts.dd95f288.mp3\";","export default __webpack_public_path__ + \"static/media/widowmaker-noonecanhide-fr.6d6d39ca.mp3\";","export default __webpack_public_path__ + \"static/media/widowmaker-noonecanhide.213ac538.mp3\";","export default __webpack_public_path__ + \"static/media/widowmaker-oneshot.8e11352d.mp3\";","export default __webpack_public_path__ + \"static/media/widowmaker-widowskiss.ac17dc8a.mp3\";","export default __webpack_public_path__ + \"static/media/winston-angry.cd912135.mp3\";","export default __webpack_public_path__ + \"static/media/winston-barrier.c9a2a1b8.mp3\";","export default __webpack_public_path__ + \"static/media/winston-intro2.b0e26cb6.mp3\";","export default __webpack_public_path__ + \"static/media/winston-protect.341bf8d1.mp3\";","export default __webpack_public_path__ + \"static/media/winston-rescue.9a122297.mp3\";","export default __webpack_public_path__ + \"static/media/winston-takecover.beeb7008.mp3\";","export default __webpack_public_path__ + \"static/media/wreckingball-shields.1f0e56cc.mp3\";","export default __webpack_public_path__ + \"static/media/wreckingball-squeaks.59935b49.mp3\";","export default __webpack_public_path__ + \"static/media/wreckingball-ult.1652f10e.mp3\";","export default __webpack_public_path__ + \"static/media/zarya-barrier.a90a1f87.mp3\";","export default __webpack_public_path__ + \"static/media/zarya-barrierally.7239bac8.mp3\";","export default __webpack_public_path__ + \"static/media/zarya-ult.745447cb.mp3\";","export default __webpack_public_path__ + \"static/media/zenyatta-discord.27155d73.mp3\";","export default __webpack_public_path__ + \"static/media/zenyatta-discord2.a9977a2b.mp3\";","export default __webpack_public_path__ + \"static/media/zenyatta-harmony.89d8bb7a.mp3\";","export default __webpack_public_path__ + \"static/media/zenyatta-ult.e686d6ac.mp3\";","export default __webpack_public_path__ + \"static/media/tutorialcard.c529c991.jpg\";","var map = {\n\t\"./ana-intro.mp3\": 38,\n\t\"./ashe-intro.mp3\": 39,\n\t\"./baptiste-intro.mp3\": 40,\n\t\"./bastion-intro.mp3\": 41,\n\t\"./brigitte-intro.mp3\": 42,\n\t\"./doomfist-intro.mp3\": 43,\n\t\"./dvameka-intro.mp3\": 44,\n\t\"./echo-intro.mp3\": 45,\n\t\"./genji-intro.mp3\": 46,\n\t\"./hanzo-intro.mp3\": 47,\n\t\"./junkrat-intro.mp3\": 48,\n\t\"./lucio-intro.mp3\": 49,\n\t\"./mccree-intro.mp3\": 50,\n\t\"./mei-intro.mp3\": 51,\n\t\"./mercy-intro.mp3\": 52,\n\t\"./moira-intro.mp3\": 53,\n\t\"./orisa-intro.mp3\": 54,\n\t\"./pharah-intro.mp3\": 55,\n\t\"./reaper-intro.mp3\": 56,\n\t\"./reinhardt-intro.mp3\": 57,\n\t\"./roadhog-intro.mp3\": 58,\n\t\"./sigma-intro.mp3\": 59,\n\t\"./soldier-intro.mp3\": 60,\n\t\"./sombra-intro.mp3\": 61,\n\t\"./symmetra-intro.mp3\": 62,\n\t\"./torbjorn-intro.mp3\": 63,\n\t\"./tracer-intro.mp3\": 64,\n\t\"./widowmaker-intro.mp3\": 65,\n\t\"./winston-intro.mp3\": 66,\n\t\"./wreckingball-intro.mp3\": 67,\n\t\"./zarya-intro.mp3\": 68,\n\t\"./zenyatta-intro.mp3\": 69\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 220;","import { createContext } from 'react';\r\n\r\nconst gameContext = createContext(null);\r\n\r\nexport default gameContext;","import { createContext } from 'react';\r\n\r\nconst turnContext = createContext(null);\r\n\r\nexport default turnContext;","// Data for all hero cards\r\n\r\n/* hero effects API is as follows:\r\n\r\nplayer: ally, enemy\r\n  target: \r\n    card, \r\n    row\r\n  type: \r\n    damage,  //affects hero damage\r\n    attack,  // attacks enemy when triggered \r\n    healing, \r\n    synergy, \r\n    power\r\n  value:      // how much more damage/healing etc to be added\r\n    integer, \r\n    double, \r\n    allies,   // proportionate to the number of allies, usually in a given row\r\n  on:         // when does the effect take place\r\n    turnstart, \r\n    movein, \r\n    moveout, \r\n    attack, \r\n    heal, \r\n    activate, // effect triggers once when ability is activated, never again \r\n    ability,  // usage of any of a card's abilities\r\n    ultimate,  // usage of a card's ultimate ability\r\n\r\n*/\r\n\r\nconst data = {\r\n  heroes: {\r\n    ana: {\r\n      id: \"ana\",\r\n      name: \"Ana\",\r\n      image: \"assets/heroes/ana.png\",\r\n      icon: \"assets/heroes/ana-icon.png\",\r\n      effects: {\r\n        anaUltimateEffect: {\r\n          id: \"anaUltimateEffect\",\r\n          hero: \"ana\",\r\n          player: \"ally\",\r\n          target: \"row\",\r\n          type: \"power\",\r\n          on: \"activate\",\r\n          value: \"allies\",\r\n        },\r\n      },\r\n      health: 4,\r\n      power: {\r\n        f: 1,\r\n        m: 2,\r\n        b: 2,\r\n      },\r\n      synergy: {\r\n        f: 3,\r\n        m: 2,\r\n        b: 2,\r\n      },\r\n      isImplemented: false,\r\n    },\r\n\r\n    ashe: {\r\n      id: \"ashe\",\r\n      name: \"Ashe\",\r\n      image: \"assets/heroes/ashe.png\",\r\n      health: 3,\r\n      power: {\r\n        f: 2,\r\n        m: 1,\r\n        b: 3,\r\n      },\r\n      synergy: {\r\n        f: 2,\r\n        m: 3,\r\n        b: 1,\r\n      },\r\n      isImplemented: false,\r\n\r\n      bob: {\r\n        id: \"bob\",\r\n        name: \"Bob\",\r\n        image: \"assets/heroes/bob.png\",\r\n        icon: \"assets/heroes/bob-icon.png\",\r\n        effects: {\r\n          bobEnemyEffect: {\r\n            id: \"bobEnemyEffect\",\r\n            hero: \"bob\",\r\n            player: \"enemy\",\r\n            target: \"row\",\r\n            type: \"synergy\",\r\n            on: \"ultimate\",\r\n            value: 2,\r\n          },\r\n        },\r\n        health: 3,\r\n        power: {\r\n          f: 1,\r\n          m: 1,\r\n          b: 1,\r\n        },\r\n        synergy: {\r\n          f: 0,\r\n          m: 0,\r\n          b: 0,\r\n        },\r\n      },\r\n    },\r\n\r\n    baptiste: {\r\n      id: \"baptiste\",\r\n      name: \"Baptiste\",\r\n      image: \"assets/heroes/baptiste.png\",\r\n      icon: \"assets/heroes/baptiste-icon.png\",\r\n      effects: {\r\n        baptisteAllyEffect: {\r\n          id: \"baptisteAllyEffect\",\r\n          hero: \"baptiste\",\r\n          player: \"ally\",\r\n          target: \"row\",\r\n          health: 3,\r\n          type: \"immortality\",\r\n          on: \"activate\",\r\n        },\r\n      },\r\n      health: 4,\r\n      power: {\r\n        f: 3,\r\n        m: 2,\r\n        b: 1,\r\n      },\r\n      synergy: {\r\n        f: 1,\r\n        m: 2,\r\n        b: 3,\r\n      },\r\n      isImplemented: false,\r\n    },\r\n\r\n    bastion: {\r\n      id: \"bastion\",\r\n      name: \"Bastion\",\r\n      image: \"assets/heroes/bastion.png\",\r\n      icon: \"assets/heroes/bastion-icon.png\",\r\n      effects: {\r\n        bastionEnemyEffect: {\r\n          id: \"bastionEnemyEffect\",\r\n          hero: \"bastion\",\r\n          player: \"enemy\",\r\n          target: \"row\",\r\n          type: \"attack\",\r\n          value: 2,\r\n          on: \"movein\",\r\n        },\r\n      },\r\n      health: 5,\r\n      power: {\r\n        f: 1,\r\n        m: 2,\r\n        b: 3,\r\n      },\r\n      synergy: {\r\n        f: 3,\r\n        m: 2,\r\n        b: 1,\r\n      },\r\n      isImplemented: false,\r\n    },\r\n\r\n    brigitte: {\r\n      id: \"brigitte\",\r\n      name: \"Brigitte\",\r\n      image: \"assets/heroes/brigitte.png\",\r\n      health: 4,\r\n      power: {\r\n        f: 3,\r\n        m: 2,\r\n        b: 1,\r\n      },\r\n      synergy: {\r\n        f: 1,\r\n        m: 2,\r\n        b: 3,\r\n      },\r\n      isImplemented: false,\r\n    },\r\n\r\n    doomfist: {\r\n      id: \"doomfist\",\r\n      name: \"Doomfist\",\r\n      image: \"assets/heroes/doomfist.png\",\r\n      health: 4,\r\n      power: {\r\n        f: 3,\r\n        m: 2,\r\n        b: 1,\r\n      },\r\n      synergy: {\r\n        f: 1,\r\n        m: 2,\r\n        b: 3,\r\n      },\r\n      isImplemented: true,\r\n    },\r\n\r\n    dvameka: {\r\n      id: \"dvameka\",\r\n      name: \"D.va + Meka\",\r\n      image: \"assets/heroes/dvameka.png\",\r\n      health: 4,\r\n      power: {\r\n        f: 2,\r\n        m: 3,\r\n        b: 1,\r\n      },\r\n      synergy: {\r\n        f: 2,\r\n        m: 1,\r\n        b: 3,\r\n      },\r\n      isImplemented: true,\r\n\r\n      dva: {\r\n        id: \"dva\",\r\n        name: \"D.va\",\r\n        image: \"assets/heroes/dva.png\",\r\n        health: 2,\r\n        power: {\r\n          f: 1,\r\n          m: 1,\r\n          b: 1,\r\n        },\r\n        synergy: {\r\n          f: 0,\r\n          m: 0,\r\n          b: 0,\r\n        },\r\n        isImplemented: true,\r\n      },\r\n    },\r\n\r\n    echo: {\r\n      id: \"echo\",\r\n      name: \"Echo\",\r\n      image: \"assets/heroes/echo.png\",\r\n      health: 4,\r\n      power: {\r\n        f: 1,\r\n        m: 3,\r\n        b: 2,\r\n      },\r\n      synergy: {\r\n        f: 3,\r\n        m: 1,\r\n        b: 2,\r\n      },\r\n      isImplemented: true,\r\n    },\r\n\r\n    genji: {\r\n      id: \"genji\",\r\n      name: \"Genji\",\r\n      image: \"assets/heroes/genji.png\",\r\n      health: 4,\r\n      power: {\r\n        f: 3,\r\n        m: 2,\r\n        b: 1,\r\n      },\r\n      synergy: {\r\n        f: 1,\r\n        m: 2,\r\n        b: 3,\r\n      },\r\n      isImplemented: true,\r\n    },\r\n\r\n    hanzo: {\r\n      id: \"hanzo\",\r\n      name: \"Hanzo\",\r\n      image: \"assets/heroes/hanzo.png\",\r\n      icon: \"assets/heroes/hanzo-icon.png\",\r\n      effects: {\r\n        hanzoEnemyEffect: {\r\n          id: \"hanzoEnemyEffect\",\r\n          hero: \"hanzo\",\r\n          player: \"enemy\",\r\n          target: \"row\",\r\n          type: \"damage\",\r\n          on: \"attack\",\r\n          value: 1,\r\n        },\r\n      },\r\n      health: 4,\r\n      power: {\r\n        f: 1,\r\n        m: 3,\r\n        b: 2,\r\n      },\r\n      synergy: {\r\n        f: 3,\r\n        m: 1,\r\n        b: 2,\r\n      },\r\n      isImplemented: true,\r\n    },\r\n\r\n    junkrat: {\r\n      id: \"junkrat\",\r\n      name: \"Junkrat\",\r\n      image: \"assets/heroes/junkrat.png\",\r\n      health: 3,\r\n      power: {\r\n        f: 3,\r\n        m: 2,\r\n        b: 1,\r\n      },\r\n      synergy: {\r\n        f: 1,\r\n        m: 2,\r\n        b: 3,\r\n      },\r\n      isImplemented: false,\r\n    },\r\n\r\n    lucio: {\r\n      id: \"lucio\",\r\n      name: \"Lucio\",\r\n      image: \"assets/heroes/lucio.png\",\r\n      icon: \"assets/heroes/lucio-icon.png\",\r\n      effects: {\r\n        lucioAllyEffect: {\r\n          id: \"lucioAllyEffect\",\r\n          hero: \"lucio\",\r\n          player: \"ally\",\r\n          target: \"row\",\r\n          type: \"healing\",\r\n          on: \"turnstart\",\r\n          value: 1,\r\n        },\r\n      },\r\n      health: 3,\r\n      power: {\r\n        f: 2,\r\n        m: 1,\r\n        b: 2,\r\n      },\r\n      synergy: {\r\n        f: 2,\r\n        m: 3,\r\n        b: 2,\r\n      },\r\n      isImplemented: true,\r\n    },\r\n\r\n    mccree: {\r\n      id: \"mccree\",\r\n      name: \"McCree\",\r\n      image: \"assets/heroes/mccree.png\",\r\n      health: 4,\r\n      power: {\r\n        f: 2,\r\n        m: 3,\r\n        b: 1,\r\n      },\r\n      synergy: {\r\n        f: 2,\r\n        m: 1,\r\n        b: 3,\r\n      },\r\n      isImplemented: true,\r\n    },\r\n\r\n    mei: {\r\n      id: \"mei\",\r\n      name: \"Mei\",\r\n      image: \"assets/heroes/mei.png\",\r\n      icon: \"assets/heroes/mei-icon.png\",\r\n      effects: {\r\n        meiEnemyEffect: {\r\n          id: \"meiEnemyEffect\",\r\n          hero: \"mei\",\r\n          player: \"enemy\",\r\n          target: \"row\",\r\n          type: \"synergy\",\r\n          value: \"double\",\r\n          on: \"ultimate\",\r\n        },\r\n      },\r\n      health: 4,\r\n      power: {\r\n        f: 2,\r\n        m: 3,\r\n        b: 1,\r\n      },\r\n      synergy: {\r\n        f: 2,\r\n        m: 1,\r\n        b: 3,\r\n      },\r\n      isImplemented: false,\r\n    },\r\n\r\n    mercy: {\r\n      id: \"mercy\",\r\n      name: \"Mercy\",\r\n      image: \"assets/heroes/mercy.png\",\r\n      icon: \"assets/heroes/mercy-icon.png\",\r\n      effects: {\r\n        mercyAllyEffect1: {\r\n          id: \"mercyAllyEffect1\",\r\n          hero: \"mercy\",\r\n          player: \"ally\",\r\n          target: \"card\",\r\n          type: \"healing\",\r\n          on: \"turnstart\",\r\n          value: 1,\r\n        },\r\n        mercyAllyEffect2: {\r\n          id: \"mercyAllyEffect2\",\r\n          hero: \"mercy\",\r\n          player: \"ally\",\r\n          target: \"card\",\r\n          type: \"damage\",\r\n          value: 1,\r\n          on: \"attack\",\r\n        },\r\n      },\r\n      health: 3,\r\n      power: {\r\n        f: 1,\r\n        m: 2,\r\n        b: 2,\r\n      },\r\n      synergy: {\r\n        f: 3,\r\n        m: 2,\r\n        b: 2,\r\n      },\r\n      isImplemented: true,\r\n    },\r\n    moira: {\r\n      id: \"moira\",\r\n      name: \"Moira\",\r\n      image: \"assets/heroes/moira.png\",\r\n      health: 3,\r\n      power: {\r\n        f: 2,\r\n        m: 1,\r\n        b: 2,\r\n      },\r\n      synergy: {\r\n        f: 2,\r\n        m: 3,\r\n        b: 2,\r\n      },\r\n      isImplemented: true,\r\n    },\r\n\r\n    orisa: {\r\n      id: \"orisa\",\r\n      name: \"Orisa\",\r\n      image: \"assets/heroes/orisa.png\",\r\n      icon: \"assets/heroes/orisa-icon.png\",\r\n      effects: {\r\n        orisaAllyEffect: {\r\n          id: \"orisaAllyEffect\",\r\n          hero: \"orisa\",\r\n          player: \"ally\",\r\n          target: \"row\",\r\n          type: \"damage\",\r\n          on: \"attack\",\r\n          value: -1,\r\n        },\r\n        orisaUltimateEffect: {\r\n          id: \"orisaUltimateEffect\",\r\n          hero: \"orisa\",\r\n          player: \"ally\",\r\n          target: \"row\",\r\n          type: \"power\",\r\n          on: \"activate\",\r\n          value: \"allies\",\r\n        },\r\n      },\r\n      health: 5,\r\n      power: {\r\n        f: 1,\r\n        m: 2,\r\n        b: 3,\r\n      },\r\n      synergy: {\r\n        f: 3,\r\n        m: 2,\r\n        b: 1,\r\n      },\r\n      isImplemented: false,\r\n    },\r\n\r\n    pharah: {\r\n      id: \"pharah\",\r\n      name: \"Pharah\",\r\n      image: \"assets/heroes/pharah.png\",\r\n      health: 4,\r\n      power: {\r\n        f: 1,\r\n        m: 3,\r\n        b: 2,\r\n      },\r\n      synergy: {\r\n        f: 3,\r\n        m: 1,\r\n        b: 2,\r\n      },\r\n      isImplemented: true,\r\n    },\r\n    reaper: {\r\n      id: \"reaper\",\r\n      name: \"Reaper\",\r\n      image: \"assets/heroes/reaper.png\",\r\n      health: 4,\r\n      power: {\r\n        f: 2,\r\n        m: 1,\r\n        b: 3,\r\n      },\r\n      synergy: {\r\n        f: 2,\r\n        m: 3,\r\n        b: 1,\r\n      },\r\n      isImplemented: true,\r\n    },\r\n\r\n    reinhardt: {\r\n      id: \"reinhardt\",\r\n      name: \"Reinhardt\",\r\n      image: \"assets/heroes/reinhardt.png\",\r\n      health: 4,\r\n      power: {\r\n        f: 3,\r\n        m: 2,\r\n        b: 1,\r\n      },\r\n      synergy: {\r\n        f: 1,\r\n        m: 2,\r\n        b: 3,\r\n      },\r\n      isImplemented: true,\r\n    },\r\n\r\n    roadhog: {\r\n      id: \"roadhog\",\r\n      name: \"Roadhog\",\r\n      image: \"assets/heroes/roadhog.png\",\r\n      health: 5,\r\n      power: {\r\n        f: 3,\r\n        m: 2,\r\n        b: 1,\r\n      },\r\n      synergy: {\r\n        f: 1,\r\n        m: 2,\r\n        b: 3,\r\n      },\r\n      isImplemented: true,\r\n    },\r\n\r\n    sigma: {\r\n      id: \"sigma\",\r\n      name: \"Sigma\",\r\n      image: \"assets/heroes/sigma.png\",\r\n      icon: \"assets/heroes/sigma-icon.png\",\r\n      health: 4,\r\n      power: {\r\n        f: 1,\r\n        m: 3,\r\n        b: 2,\r\n      },\r\n      synergy: {\r\n        f: 3,\r\n        m: 1,\r\n        b: 2,\r\n      },\r\n      isImplemented: true,\r\n    },\r\n\r\n    soldier: {\r\n      id: \"soldier\",\r\n      name: \"Soldier 76\",\r\n      image: \"assets/heroes/soldier.png\",\r\n      health: 4,\r\n      power: {\r\n        f: 2,\r\n        m: 3,\r\n        b: 1,\r\n      },\r\n      synergy: {\r\n        f: 2,\r\n        m: 1,\r\n        b: 3,\r\n      },\r\n      isImplemented: true,\r\n    },\r\n\r\n    sombra: {\r\n      id: \"sombra\",\r\n      name: \"Sombra\",\r\n      image: \"assets/heroes/sombra.png\",\r\n      health: 4,\r\n      power: {\r\n        f: 3,\r\n        m: 1,\r\n        b: 2,\r\n      },\r\n      synergy: {\r\n        f: 1,\r\n        m: 3,\r\n        b: 2,\r\n      },\r\n      isImplemented: false,\r\n    },\r\n\r\n    symmetra: {\r\n      id: \"symmetra\",\r\n      name: \"Symmetra\",\r\n      image: \"assets/heroes/symmetra.png\",\r\n      health: 3,\r\n      power: {\r\n        f: 2,\r\n        m: 1,\r\n        b: 2,\r\n      },\r\n      synergy: {\r\n        f: 2,\r\n        m: 3,\r\n        b: 2,\r\n      },\r\n      isImplemented: true,\r\n    },\r\n\r\n    torbjorn: {\r\n      id: \"torbjorn\",\r\n      name: \"Torbjorn\",\r\n      image: \"assets/heroes/torbjorn.png\",\r\n      icon: \"assets/heroes/torbjorn-icon.png\",\r\n      effects: {\r\n        torbjornEnemyEffect: {\r\n          id: \"torbjornEnemyEffect\",\r\n          hero: \"torbjorn\",\r\n          player: \"enemy\",\r\n          target: \"row\",\r\n          type: \"attack\",\r\n          on: \"turnstart\",\r\n          value: 1,\r\n        },\r\n      },\r\n      health: 4,\r\n      power: {\r\n        f: 3,\r\n        m: 1,\r\n        b: 2,\r\n      },\r\n      synergy: {\r\n        f: 1,\r\n        m: 3,\r\n        b: 2,\r\n      },\r\n      isImplemented: true,\r\n    },\r\n\r\n    tracer: {\r\n      id: \"tracer\",\r\n      name: \"Tracer\",\r\n      image: \"assets/heroes/tracer.png\",\r\n      health: 3,\r\n      power: {\r\n        f: 3,\r\n        m: 2,\r\n        b: 1,\r\n      },\r\n      synergy: {\r\n        f: 1,\r\n        m: 2,\r\n        b: 3,\r\n      },\r\n      isImplemented: true,\r\n    },\r\n\r\n    widowmaker: {\r\n      id: \"widowmaker\",\r\n      name: \"Widowmaker\",\r\n      image: \"assets/heroes/widowmaker.png\",\r\n      icon: \"assets/heroes/widowmaker-icon.png\",\r\n      effects: {\r\n        widowmakerEnemyEffect: {\r\n          id: \"widowmakerEnemyEffect\",\r\n          hero: \"widowmaker\",\r\n          player: \"enemy\",\r\n          target: \"row\",\r\n          type: \"damage\",\r\n          on: \"attack\",\r\n          value: 1,\r\n        },\r\n      },\r\n      health: 4,\r\n      power: {\r\n        f: 2,\r\n        m: 1,\r\n        b: 3,\r\n      },\r\n      synergy: {\r\n        f: 2,\r\n        m: 3,\r\n        b: 1,\r\n      },\r\n      isImplemented: true,\r\n    },\r\n\r\n    winston: {\r\n      id: \"winston\",\r\n      name: \"Winston\",\r\n      image: \"assets/heroes/winston.png\",\r\n      health: 4,\r\n      power: {\r\n        f: 3,\r\n        m: 2,\r\n        b: 1,\r\n      },\r\n      synergy: {\r\n        f: 1,\r\n        m: 2,\r\n        b: 3,\r\n      },\r\n      isImplemented: true,\r\n    },\r\n\r\n    wreckingball: {\r\n      id: \"wreckingball\",\r\n      name: \"Wrecking Ball\",\r\n      image: \"assets/heroes/wreckingball.png\",\r\n      icon: \"assets/heroes/wreckingball-icon.png\",\r\n      effects: {\r\n        wreckingballEnemyEffect: {\r\n          id: \"wreckingballEnemyEffect\",\r\n          hero: \"wreckingball\",\r\n          player: \"enemy\",\r\n          target: \"row\",\r\n          type: \"attack\",\r\n          value: 2,\r\n          on: \"ability\",\r\n          health: \"synergy\",\r\n        },\r\n      },\r\n      health: 3,\r\n      power: {\r\n        f: 2,\r\n        m: 3,\r\n        b: 1,\r\n      },\r\n      synergy: {\r\n        f: 2,\r\n        m: 1,\r\n        b: 3,\r\n      },\r\n      isImplemented: false,\r\n    },\r\n\r\n    zarya: {\r\n      id: \"zarya\",\r\n      name: \"Zarya\",\r\n      image: \"assets/heroes/zarya.png\",\r\n      icon: \"assets/heroes/zarya-icon.png\",\r\n      health: 4,\r\n      power: {\r\n        f: 2,\r\n        m: 3,\r\n        b: 1,\r\n      },\r\n      synergy: {\r\n        f: 2,\r\n        m: 1,\r\n        b: 3,\r\n      },\r\n      isImplemented: false,\r\n      zaryaShieldRemaining: 0,\r\n    },\r\n\r\n    zenyatta: {\r\n      id: \"zenyatta\",\r\n      name: \"Zenyatta\",\r\n      image: \"assets/heroes/zenyatta.png\",\r\n      icon: \"assets/heroes/zenyatta-icon.png\",\r\n      effects: {\r\n        zenyattaAllyEffect: {\r\n          id: \"zenyattaAllyEffect\",\r\n          hero: \"zenyatta\",\r\n          player: \"ally\",\r\n          target: \"card\",\r\n          type: \"healing\",\r\n          on: \"turnstart\",\r\n          value: 1,\r\n        },\r\n        zenyattaEnemyEffect: {\r\n          id: \"zenyattaEnemyEffect\",\r\n          hero: \"zenyatta\",\r\n          player: \"enemy\",\r\n          target: \"card\",\r\n          type: \"damage\",\r\n          on: \"attack\",\r\n          value: 1,\r\n        },\r\n      },\r\n      health: 4,\r\n      power: {\r\n        f: 2,\r\n        m: 2,\r\n        b: 1,\r\n      },\r\n      synergy: {\r\n        f: 2,\r\n        m: 2,\r\n        b: 3,\r\n      },\r\n      isImplemented: false,\r\n    },\r\n  },\r\n  playerCards: {\r\n    player1cards: {\r\n      id: \"player1cards\",\r\n      cards: {},\r\n    },\r\n    player2cards: {\r\n      id: \"player2cards\",\r\n      cards: {},\r\n    },\r\n  },\r\n  rows: {\r\n    player1hand: {\r\n      id: \"player1hand\",\r\n      cardIds: [],\r\n      cardsPlayed: 0,\r\n      power: {\r\n        f: 0,\r\n        m: 0,\r\n        b: 0,\r\n      },\r\n      totalPower() {\r\n        const totalPower = Object.values(this.power).reduce((a, b) => a + b, 0);\r\n        return totalPower;\r\n      },\r\n    },\r\n    player2hand: {\r\n      id: \"player2hand\",\r\n      cardIds: [],\r\n      cardsPlayed: 0,\r\n      power: {\r\n        f: 0,\r\n        m: 0,\r\n        b: 0,\r\n      },\r\n      totalPower() {\r\n        const totalPower = Object.values(this.power).reduce((a, b) => a + b, 0);\r\n        return totalPower;\r\n      },\r\n    },\r\n    \"1b\": {\r\n      id: \"1b\",\r\n      label: \"Back\",\r\n      cardIds: [],\r\n      synergy: 0,\r\n      allyEffects: [],\r\n      enemyEffects: [],\r\n      shield: [],\r\n      totalShield() {\r\n        let totalShield = 0;\r\n        for (let shieldEntry of this.shield) {\r\n          totalShield += shieldEntry.shieldValue;\r\n        }\r\n        return totalShield;\r\n      },\r\n    },\r\n    \"1m\": {\r\n      id: \"1m\",\r\n      label: \"Middle\",\r\n      cardIds: [],\r\n      synergy: 0,\r\n      allyEffects: [],\r\n      enemyEffects: [],\r\n      shield: [],\r\n      totalShield() {\r\n        let totalShield = 0;\r\n        for (let shieldEntry of this.shield) {\r\n          totalShield += shieldEntry.shieldValue;\r\n        }\r\n        return totalShield;\r\n      },\r\n    },\r\n    \"1f\": {\r\n      id: \"1f\",\r\n      label: \"Front\",\r\n      cardIds: [],\r\n      synergy: 0,\r\n      allyEffects: [],\r\n      enemyEffects: [],\r\n      shield: [],\r\n      totalShield() {\r\n        let totalShield = 0;\r\n        for (let shieldEntry of this.shield) {\r\n          totalShield += shieldEntry.shieldValue;\r\n        }\r\n        return totalShield;\r\n      },\r\n    },\r\n    \"2f\": {\r\n      id: \"2f\",\r\n      label: \"Front\",\r\n      cardIds: [],\r\n      synergy: 0,\r\n      allyEffects: [],\r\n      enemyEffects: [],\r\n      shield: [],\r\n      totalShield() {\r\n        let totalShield = 0;\r\n        for (let shieldEntry of this.shield) {\r\n          totalShield += shieldEntry.shieldValue;\r\n        }\r\n        return totalShield;\r\n      },\r\n    },\r\n    \"2m\": {\r\n      id: \"2m\",\r\n      label: \"Middle\",\r\n      cardIds: [],\r\n      synergy: 0,\r\n      allyEffects: [],\r\n      enemyEffects: [],\r\n      shield: [],\r\n      totalShield() {\r\n        let totalShield = 0;\r\n        for (let shieldEntry of this.shield) {\r\n          totalShield += shieldEntry.shieldValue;\r\n        }\r\n        return totalShield;\r\n      },\r\n    },\r\n    \"2b\": {\r\n      id: \"2b\",\r\n      label: \"Back\",\r\n      cardIds: [],\r\n      synergy: 0,\r\n      allyEffects: [],\r\n      enemyEffects: [],\r\n      shield: [],\r\n      totalShield() {\r\n        let totalShield = 0;\r\n        for (let shieldEntry of this.shield) {\r\n          totalShield += shieldEntry.shieldValue;\r\n        }\r\n        return totalShield;\r\n      },\r\n    },\r\n  },\r\n};\r\n\r\nexport default data;\r\n","import data from \"data\";\r\n\r\n// Creates a card with its own health and id unique to the playerCard, returns player-specific ID\r\nclass PlayerCard {\r\n  constructor(playerNum, heroId) {\r\n    this.playerNum = playerNum;\r\n    this.heroId = heroId;\r\n\r\n    // Get card values from data\r\n    let heroData = data.heroes[heroId];\r\n\r\n    // Assign values not held in data\r\n    const playerHeroId = `${playerNum}${heroId}`;\r\n    let shield = 0;\r\n    const enemyEffects = [];\r\n    const allyEffects = [];\r\n    let isPlayed = false;\r\n    let isDiscarded = false;\r\n    let ability1Used = false;\r\n    let ability2Used = false;\r\n    const maxHealth = heroData.health;\r\n\r\n    // Summoned heroes contain special path\r\n    if (heroId === \"dva\") {\r\n      heroData = data.heroes.dvameka[\"dva\"];\r\n      isPlayed = true;\r\n      // Slice used below to allow for echo's ultimate copying ashe\r\n    } else if (heroId.slice(0, 3) === \"bob\") {\r\n      heroData = data.heroes.ashe[\"bob\"];\r\n    }\r\n\r\n    // Combine values into one new hero object and assign to relevant player\r\n    const newCard = {\r\n      playerHeroId,\r\n      ...heroData,\r\n      maxHealth,\r\n      shield,\r\n      enemyEffects,\r\n      allyEffects,\r\n      isPlayed,\r\n      isDiscarded,\r\n      ability1Used,\r\n      ability2Used,\r\n    };\r\n\r\n    // Add hero effects to card, and insert playerHeroId for future use\r\n    if (\"effects\" in heroData) {\r\n      // Deep copy of effects object is needed in order to not alter the original object later on\r\n      let effects = JSON.parse(JSON.stringify(heroData.effects));\r\n      for (let key in effects) {\r\n        effects[key][\"playerHeroId\"] = playerHeroId;\r\n      }\r\n      newCard[\"effects\"] = effects;\r\n    }\r\n\r\n    console.log(newCard);\r\n\r\n    return newCard;\r\n  }\r\n}\r\n\r\n// Helper function - returns random number between min (inc) and max (exc)\r\nconst getRandInt = (min, max) => {\r\n  return Math.floor(Math.random() * (max - min)) + min;\r\n};\r\n\r\n// Helper function to check if the div element is overflowing\r\nfunction isOverflown(element) {\r\n  return (\r\n    element.scrollHeight > element.clientHeight ||\r\n    element.scrollWidth > element.clientWidth\r\n  );\r\n}\r\n\r\nexport default getRandInt;\r\nexport { PlayerCard, isOverflown };\r\n","import React, { useContext } from \"react\";\r\nimport gameContext from \"context/gameContext\";\r\nimport turnContext from \"context/turnContext\";\r\nimport data from \"data\";\r\nimport getRandInt from \"helper\";\r\nimport { ACTIONS } from \"App\";\r\n\r\nexport default function PlayerHand(props) {\r\n  // Context\r\n  const { gameState, dispatch } = useContext(gameContext);\r\n  const { turnState, setTurnState } = useContext(turnContext);\r\n\r\n  // Variables\r\n  const playerNum = parseInt(props.playerNum);\r\n  const playerHandId = `player${playerNum}hand`;\r\n  const playerCardsId = `player${playerNum}cards`;\r\n  const handCards = gameState.rows[playerHandId].cardIds;\r\n  const nextCardDraw = props.nextCardDraw;\r\n  const setNextCardDraw = props.setNextCardDraw;\r\n  const setCardFocus = props.setCardFocus;\r\n\r\n  // Draws one random card and puts the card into the player's hand\r\n  function drawCards() {\r\n    // Draw specific card designated by nextCardDraw state\r\n    if (nextCardDraw[`player${playerNum}`] !== null) {\r\n      dispatch({\r\n        type: ACTIONS.CREATE_CARD,\r\n        payload: {\r\n          playerNum: playerNum,\r\n          heroId: nextCardDraw[`player${playerNum}`],\r\n        },\r\n      });\r\n      var playerHeroId = `${playerNum}${nextCardDraw[`player${playerNum}`]}`;\r\n      setNextCardDraw((prevState) => ({\r\n        ...prevState,\r\n        [`player${playerNum}`]: null,\r\n      }));\r\n\r\n      // Draw a random card id, then check if it was already drawn, if so draw again\r\n    } else {\r\n      let newCardId;\r\n      do {\r\n        const randInt = getRandInt(0, Object.keys(data.heroes).length);\r\n        const randKey = Object.keys(data.heroes)[randInt];\r\n        newCardId = data.heroes[randKey].id;\r\n        playerHeroId = `${props.playerNum}${newCardId}`;\r\n      } while (\r\n        playerHeroId in gameState.playerCards[playerCardsId].cards ||\r\n        data.heroes[newCardId].isImplemented === false\r\n      );\r\n      dispatch({\r\n        type: ACTIONS.CREATE_CARD,\r\n        payload: { playerNum: playerNum, heroId: newCardId },\r\n      });\r\n    }\r\n\r\n    // Add new card to player hand\r\n    dispatch({\r\n      type: ACTIONS.ADD_CARD_TO_HAND,\r\n      payload: {\r\n        playerNum: playerNum,\r\n        playerHeroId: playerHeroId,\r\n      },\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div className=\"playerbuttons\">\r\n      <div className=\"common-buttons\">\r\n        <button\r\n          className=\"drawbutton\"\r\n          disabled={handCards.length >= 8}\r\n          onClick={drawCards}\r\n        >\r\n          Draw\r\n        </button>\r\n        <button\r\n          disabled={!(turnState.playerTurn === playerNum)}\r\n          className=\"endturnbutton\"\r\n          onClick={\r\n            turnState.playerTurn === 1\r\n              ? () =>\r\n                  setTurnState((prevState) => ({\r\n                    ...prevState,\r\n                    turnCount: prevState.turnCount + 1,\r\n                    playerTurn: 2,\r\n                  }))\r\n              : () =>\r\n                  setTurnState((prevState) => ({\r\n                    ...prevState,\r\n                    turnCount: prevState.turnCount + 1,\r\n                    playerTurn: 1,\r\n                  }))\r\n          }\r\n        >\r\n          End Turn\r\n        </button>\r\n      </div>\r\n      <button\r\n        disabled={\r\n          !(gameState.rows[`player${playerNum}hand`].cardsPlayed >= 6) ||\r\n          turnState[`player${playerNum}Passed`] === true\r\n        }\r\n        className=\"passbutton\"\r\n        onClick={() => {\r\n          setTurnState((prevState) => ({\r\n            ...prevState,\r\n            [`player${playerNum}Passed`]: true,\r\n          }));\r\n        }}\r\n      >\r\n        Pass\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n","\r\nexport default function PowerCounter(props) {\r\n  return (\r\n    <div className=\"power\">\r\n      <div id={`player${props.playerNum}power`} className=\"powercounter counter\">\r\n        <span id={props.id}>\r\n          <h4>{props.power}</h4>\r\n        </span>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import React, { useContext } from 'react';\r\n\r\nexport default function MatchCounter(props) {\r\n  const matchState = props.matchState;\r\n  const playerNum = props.playerNum;\r\n  \r\n  return(\r\n    <div className=\"matchcountercontainer\">\r\n      <div id={`player${playerNum}matchcounter`} className=\"matchcounter counter\">\r\n        {matchState[`player${playerNum}`].wins}\r\n      </div>\r\n    </div>\r\n  );\r\n}","export default function HeroCounter(props) {\r\n  const playerHeroId = props.playerHeroId;\r\n  const heroId = props.heroId;\r\n  const playerNum = props.playerNum;\r\n  const rowId = props.rowId;\r\n  const health = props.health;\r\n\r\n  return (\r\n    <div\r\n      className=\"counter\"\r\n      onClick={() =>\r\n        props.setCardFocus({ playerHeroId: playerHeroId, rowId: rowId })\r\n      }\r\n    >\r\n      <img\r\n        src={require(`assets/heroes/${heroId}-icon.png`).default}\r\n        className=\"counter herocounter\"\r\n        alt=\"Hero Counter\"\r\n      />\r\n    {health && <span className=\"herocounterhealth\"><h4>{health}</h4></span>}\r\n    </div>\r\n  );\r\n}\r\n","import HeroCounter from \"components/layout/HeroCounter\";\r\n\r\nexport default function CardEffects(props) {\r\n  const type = props.type;\r\n  const effects = props.effects;\r\n\r\n  return (\r\n    <div className={`effectscontainer ${type}effects`}>\r\n      {effects.length > 0 ? (\r\n        <div className={`effects counterarea`}>\r\n          {effects &&\r\n            effects.map((effect) => {\r\n              return (\r\n                <HeroCounter\r\n                  heroId={effect.hero}\r\n                  key={effect.hero}\r\n                  playerHeroId={effect.playerHeroId}\r\n                  health={effect.health}\r\n                  setCardFocus={props.setCardFocus}\r\n                />\r\n              );\r\n            })}\r\n        </div>\r\n      ) : null}\r\n    </div>\r\n  );\r\n}\r\n","export default __webpack_public_path__ + \"static/media/healthbackground-hexagon.f117e55d.png\";","import background from \"assets/healthbackground-hexagon.png\";\r\n\r\nexport default function HealthCounter(props) {\r\n  const type = props.type;\r\n\r\n  return (\r\n    <div className={`healthcounter counter ${type}`}>\r\n      <span>{props.health}</span>\r\n    </div>\r\n  );\r\n}\r\n","export default function ShieldCounter(props) {\r\n  const shield = props.shield;\r\n  const type = props.type;\r\n\r\n  return (\r\n    <div className={`shieldcounter counter ${type}`}>\r\n      <span><h4>{shield}</h4></span>\r\n    </div>\r\n  )\r\n}","import React, { useContext } from \"react\";\r\nimport { Draggable } from \"react-beautiful-dnd\";\r\nimport gameContext from \"context/gameContext\";\r\nimport turnContext from \"context/turnContext\";\r\nimport CardEffects from \"components/cards/CardEffects\";\r\nimport HealthCounter from \"components/cards/HealthCounter\";\r\nimport ShieldCounter from \"components/cards/ShieldCounter\";\r\n\r\nexport default function Card(props) {\r\n  // Context\r\n  const { gameState, dispatch } = useContext(gameContext);\r\n  const { turnState, setTurnState } = useContext(turnContext);\r\n\r\n  // Variables\r\n  const playerHeroId = props.playerHeroId;\r\n  const playerNum = props.playerNum;\r\n  const playerCardsId = `player${playerNum}cards`;\r\n  const rowId = props.rowId;\r\n  const rowPosition = rowId[1];\r\n  const index = props.index;\r\n\r\n  // Get card attributes from relevant player\r\n  const {\r\n    id,\r\n    name,\r\n    health,\r\n    power,\r\n    synergy,\r\n    shield,\r\n    enemyEffects,\r\n    allyEffects,\r\n    isPlayed,\r\n    isDiscarded,\r\n  } = gameState.playerCards[playerCardsId].cards[playerHeroId];\r\n\r\n  function getStyle(style, snapshot) {\r\n    if (!snapshot.isDropAnimating) return style;\r\n    return {\r\n      ...style,\r\n      transitionDuration: \"0.001s\",\r\n    };\r\n  }\r\n\r\n  return isDiscarded ? null : (\r\n    <Draggable\r\n      draggableId={playerHeroId}\r\n      index={index}\r\n      isDragDisabled={isPlayed || turnState.playerTurn !== playerNum}\r\n    >\r\n      {(provided, snapshot) => (\r\n        <div\r\n          className={`cardcontainer ${rowId[0] === \"p\" ? \"card-in-hand\" : \"\"}`}\r\n        >\r\n          <li\r\n            {...provided.draggableProps}\r\n            {...provided.dragHandleProps}\r\n            className={`${snapshot.isDragging ? \"dragging\" : \"not-dragging\"}`}\r\n            ref={provided.innerRef}\r\n            style={getStyle(provided.draggableProps.style, snapshot)}\r\n          >\r\n            {playerNum === 1 ? (\r\n              <CardEffects\r\n                type=\"enemy\"\r\n                effects={enemyEffects}\r\n                setCardFocus={props.setCardFocus}\r\n              />\r\n            ) : (\r\n              <CardEffects\r\n                type=\"ally\"\r\n                effects={allyEffects}\r\n                setCardFocus={props.setCardFocus}\r\n              />\r\n            )}\r\n            <div\r\n              id={`${playerHeroId}`}\r\n              className={`card ${health > 0 ? null : \"dead\"}`}\r\n              onClick={\r\n                turnState.playerTurn === playerNum || isPlayed\r\n                  ? () => {\r\n                      props.setCardFocus({\r\n                        playerHeroId: playerHeroId,\r\n                        rowId: rowId,\r\n                      });\r\n                    }\r\n                  : null\r\n              }\r\n            >\r\n              {turnState.playerTurn === playerNum || isPlayed ? (\r\n                <HealthCounter type=\"cardcounter\" health={health} />\r\n              ) : null}\r\n              {turnState.playerTurn === playerNum || isPlayed\r\n                ? shield > 0 && (\r\n                    <ShieldCounter type=\"cardcounter\" shield={shield} />\r\n                  )\r\n                : null}\r\n              <img\r\n                src={\r\n                  turnState.playerTurn === playerNum || isPlayed\r\n                    ? require(`assets/heroes/${id}.png`).default\r\n                    : require(\"assets/card-back.png\").default\r\n                }\r\n                className={`cardimg ${\r\n                  turnState.playerTurn === playerNum || isPlayed\r\n                    ? \"show-card\"\r\n                    : \"hide-card\"\r\n                }`}\r\n                alt={`${name} Card`}\r\n              />\r\n            </div>\r\n            {playerNum === 1 ? (\r\n              <CardEffects\r\n                type=\"ally\"\r\n                effects={allyEffects}\r\n                setCardFocus={props.setCardFocus}\r\n              />\r\n            ) : (\r\n              <CardEffects\r\n                type=\"enemy\"\r\n                effects={enemyEffects}\r\n                setCardFocus={props.setCardFocus}\r\n              />\r\n            )}\r\n          </li>\r\n        </div>\r\n      )}\r\n    </Draggable>\r\n  );\r\n}\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport Card from \"components/cards/Card\";\r\nimport { Droppable } from \"react-beautiful-dnd\";\r\nimport gameContext from \"context/gameContext\";\r\nimport $ from \"jquery\";\r\nimport { isOverflown } from \"helper\";\r\n\r\nexport default function CardDisplay(props) {\r\n  // Context & State\r\n  const { gameState } = useContext(gameContext);\r\n\r\n  // If a direction prop is passed in, use that for the direction.\r\n  // Otherwise, dynamically alter direction based on window width\r\n  const [rowDirection, setRowDirection] = useState(\r\n    props.direction\r\n      ? props.direction\r\n      : window.innerWidth > 1300\r\n      ? \"vertical\"\r\n      : \"horizontal\"\r\n  );\r\n  if (!props.direction) {\r\n    window.addEventListener(\"resize\", () => {\r\n      const windowWidth = window.innerWidth;\r\n      if (windowWidth > 1300) setRowDirection(\"vertical\");\r\n      else setRowDirection(\"horizontal\");\r\n    });\r\n  }\r\n\r\n  // Variables\r\n  const { rowId, playerNum, listClass, droppableId } = props;\r\n  const cards = gameState.rows[rowId].cardIds;\r\n  const [overflown, setOverflown] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setOverflown(isOverflown(document.getElementById(`${rowId}-list`)));\r\n  });\r\n\r\n  return (\r\n    <div id={`${rowId}-carddisplay`} className={`carddisplay-container`}>\r\n      <Droppable droppableId={droppableId} direction={rowDirection}>\r\n        {(provided, snapshot) => (\r\n          <ul\r\n            id={`${rowId}-list`}\r\n            className={`cardlist ${\r\n              overflown ? \"overflown\" : \"\"\r\n            } ${rowDirection} ${listClass} ${\r\n              snapshot.isDraggingOver ? \"dragging-over\" : \"\"\r\n            }`}\r\n            {...provided.droppableProps}\r\n            ref={provided.innerRef}\r\n          >\r\n            {cards &&\r\n              cards.map((cardId, index) => {\r\n                return (\r\n                  <Card\r\n                    setCardFocus={props.setCardFocus}\r\n                    playerHeroId={cardId}\r\n                    key={cardId}\r\n                    playerNum={playerNum}\r\n                    rowId={props.rowId}\r\n                    index={index}\r\n                  />\r\n                );\r\n              })}\r\n            {provided.placeholder}\r\n          </ul>\r\n        )}\r\n      </Droppable>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useContext } from \"react\";\r\nimport PlayerHand from \"./PlayerButtons\";\r\nimport PowerCounter from \"./PowerCounter\";\r\nimport gameContext from \"context/gameContext\";\r\nimport MatchCounter from \"./MatchCounter\";\r\nimport CardDisplay from \"components/layout/CardDisplay\";\r\n\r\nexport default function PlayerArea(props) {\r\n  const { gameState } = useContext(gameContext);\r\n  const { playerNum } = props;\r\n\r\n  const playerAreaId = `player${playerNum}area`;\r\n  const totalPower = props.totalPower;\r\n  const playerHandId = `player${playerNum}hand`;\r\n  return (\r\n    <div id={playerAreaId} className=\"playerarea row\">\r\n      <div className=\"player-name-buttons\">\r\n        <div className=\"playerarea-section\">\r\n          <h1 className=\"playername\">Player {props.playerNum}</h1>\r\n          <PowerCounter playerNum={props.playerNum} power={totalPower} />\r\n        </div>\r\n        <PlayerHand\r\n          setCardFocus={props.setCardFocus}\r\n          playerNum={props.playerNum}\r\n          nextCardDraw={props.nextCardDraw}\r\n          setNextCardDraw={props.setNextCardDraw}\r\n        />\r\n      </div>\r\n      <div className=\"playercards-row\">\r\n        <CardDisplay\r\n          playerNum={props.playerNum}\r\n          droppableId={`player${props.playerNum}hand`}\r\n          listClass={\"handlist\"}\r\n          rowId={playerHandId}\r\n          setCardFocus={props.setCardFocus}\r\n          direction=\"horizontal\"\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","\r\nexport default function SynergyCounter(props) {\r\n\r\n  return (\r\n    <div className=\"synergycontainer\">\r\n      <div className=\"synergycounter counter\">\r\n        <span id={props.id}><h4>{props.synergy}</h4></span>\r\n      </div>\r\n    </div>\r\n  )\r\n}","import React, { useContext } from 'react';\r\nimport gameContext from 'context/gameContext';\r\nimport HeroCounter from 'components/layout/HeroCounter';\r\n\r\nexport default function CounterArea(props) {\r\n  const { gameState } = useContext(gameContext);\r\n  const type = props.type;\r\n  const rowId = props.rowId;\r\n  \r\n  // Create icons array and store ids of hero with icons inside\r\n  const effects = [\r\n    ...gameState.rows[rowId].allyEffects,\r\n    ...gameState.rows[rowId].enemyEffects,\r\n  ];\r\n  \r\n  return(\r\n    <div className={`${type}-counterarea counterarea`}>\r\n      {effects && effects.map((effect) => {\r\n          return (\r\n            <HeroCounter \r\n              playerHeroId={effect.playerHeroId} \r\n              heroId={effect.hero}\r\n              key={effect.playerHeroId} \r\n              setCardFocus={props.setCardFocus} \r\n              playerNum={props.playerNum}\r\n              rowId={rowId}\r\n              health={effect.health}\r\n            />\r\n          );\r\n      })}\r\n    </div>\r\n  );\r\n};","import React, { useContext, useEffect, useState } from \"react\";\r\nimport gameContext from \"context/gameContext\";\r\nimport SynergyCounter from \"components/layout/SynergyCounter\";\r\nimport ShieldCounter from \"components/cards/ShieldCounter\";\r\nimport CounterArea from \"components/layout/CounterArea\";\r\nimport CardDisplay from \"components/layout/CardDisplay\";\r\nimport { ACTIONS } from \"App\";\r\nimport $ from \"jquery\";\r\nimport { isOverflown } from \"helper\";\r\n\r\nexport default function BoardRow(props) {\r\n  // Context\r\n  const { gameState, dispatch } = useContext(gameContext);\r\n  const [isOverflown, setIsOverflown] = useState(false);\r\n\r\n  // Variables\r\n  const rowId = props.rowId;\r\n  const rowPosition = props.rowId[1];\r\n  const playerNum = props.playerNum;\r\n  const synergyValue = gameState.rows[rowId].synergy;\r\n  const rowShield = gameState.rows[rowId].totalShield();\r\n\r\n  // Update synergy and power values anytime a card moves row\r\n  useEffect(() => {\r\n    let playerPower = 0;\r\n\r\n    // For every card in the row (that is alive), add up the power values\r\n    for (let cardId of gameState.rows[rowId].cardIds) {\r\n      if (\r\n        gameState.playerCards[`player${playerNum}cards`].cards[cardId].health >\r\n        0\r\n      ) {\r\n        playerPower +=\r\n          gameState.playerCards[`player${playerNum}cards`].cards[cardId].power[\r\n            rowPosition\r\n          ];\r\n      }\r\n    }\r\n\r\n    // Set power state\r\n    dispatch({\r\n      type: ACTIONS.SET_POWER,\r\n      payload: {\r\n        playerNum: playerNum,\r\n        rowPosition: rowPosition,\r\n        powerValue: playerPower,\r\n      },\r\n    });\r\n  }, [\r\n    gameState.rows,\r\n    gameState.playerCards,\r\n    dispatch,\r\n    playerNum,\r\n    rowId,\r\n    rowPosition,\r\n  ]);\r\n\r\n  // Detect if board row is overflown, and set class if it is\r\n\r\n  // TODO: not performing well\r\n  // $(function () {\r\n  //   const boardRow = document.getElementById(`${rowId}-boardrow`);\r\n  //   const rowList = document.getElementById(`${rowId}-list`);\r\n  //   const resizeObserver = new ResizeObserver((element) => {\r\n  //     if (checkIsOverflown(boardRow)) {\r\n  //       console.log(`${rowId} overflown`);\r\n  //       setIsOverflown(true);\r\n  //     } else {\r\n  //       setIsOverflown(false);\r\n  //     }\r\n  //   });\r\n  //   resizeObserver.observe(boardRow);\r\n  // });\r\n\r\n  return (\r\n    <div id={rowId} className=\"rowarea row\">\r\n      <div className=\"rowcountercontainer\">\r\n        <div>\r\n          <SynergyCounter synergy={synergyValue} />\r\n          {rowShield > 0 && (\r\n            <ShieldCounter type=\"rowcounter\" shield={rowShield} />\r\n          )}\r\n        </div>\r\n        <CounterArea\r\n          type={\"row\"}\r\n          setCardFocus={props.setCardFocus}\r\n          playerNum={props.playerNum}\r\n          rowId={props.rowId}\r\n        />\r\n      </div>\r\n      <div\r\n        id={`${rowId}-boardrow`}\r\n        className={`boardrow ${isOverflown ? \"overflown\" : \"\"}`}\r\n      >\r\n        <div className=\"rowlabel\">\r\n          <span>{props.label}</span>\r\n          <span>Row</span>\r\n        </div>\r\n        <CardDisplay\r\n          playerNum={props.playerNum}\r\n          droppableId={props.rowId}\r\n          listClass=\"rowlist\"\r\n          rowId={props.rowId}\r\n          setCardFocus={props.setCardFocus}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import BoardRow from \"./BoardRow\";\r\nimport data from \"data\";\r\n\r\nexport default function PlayerBoard(props) {\r\n  const rows = data.rows;\r\n  \r\n  // Renders board rows according to the order in data.rows\r\n  // Not ideal, but apparently Object.keys order is reliable\r\n  return (\r\n    <div id={`player${props.playerNum}board`} className=\"board\">\r\n      {Object.keys(rows).map((rowId) => {\r\n        if (parseInt(rowId[0]) === props.playerNum) {\r\n          return (\r\n            <BoardRow\r\n              setCardFocus={props.setCardFocus}\r\n              playerNum={props.playerNum}\r\n              label={rows[rowId].label}\r\n              rowId={rows[rowId].id}\r\n              key={rows[rowId].id}\r\n            />\r\n          );\r\n        } else return null;\r\n      })}\r\n    </div>\r\n  );\r\n  \r\n}\r\n","import React, { useContext, useEffect } from \"react\";\r\nimport gameContext from \"context/gameContext\";\r\nimport PlayerArea from \"components/layout/PlayerArea\";\r\nimport PlayerBoard from \"components/layout/PlayerBoard\";\r\n\r\nexport default function PlayerHalf(props) {\r\n  const { gameState } = useContext(gameContext);\r\n\r\n  // Power state for each player\r\n  let totalPower = gameState.rows[`player${props.playerNum}hand`].totalPower();\r\n\r\n  // Reverse order depending on which player (player 2 is on top of the screen, 1 on bottom)\r\n  if (props.playerNum === 1) {\r\n    return (\r\n      <div id={`player${props.playerNum}half`} className=\"playerhalf\">\r\n        <PlayerArea\r\n          playerNum={props.playerNum}\r\n          setCardFocus={props.setCardFocus}\r\n          totalPower={totalPower}\r\n          nextCardDraw={props.nextCardDraw}\r\n          setNextCardDraw={props.setNextCardDraw}\r\n          matchState={props.matchState}\r\n        />\r\n        <PlayerBoard\r\n          playerNum={props.playerNum}\r\n          setCardFocus={props.setCardFocus}\r\n        />\r\n      </div>\r\n    );\r\n  } else {\r\n    return (\r\n      <div id={`player${props.playerNum}half`} className=\"playerhalf\">\r\n        <PlayerBoard\r\n          playerNum={props.playerNum}\r\n          setCardFocus={props.setCardFocus}\r\n        />\r\n        <PlayerArea\r\n          playerNum={props.playerNum}\r\n          setCardFocus={props.setCardFocus}\r\n          totalPower={totalPower}\r\n          nextCardDraw={props.nextCardDraw}\r\n          setNextCardDraw={props.setNextCardDraw}\r\n          matchState={props.matchState}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/logo3.927a5abd.png\";","import React, { useEffect, useState } from \"react\";\r\n\r\nexport default function AudioPlayer(props) {\r\n  const { playAudio, setPlayAudio } = props;\r\n\r\n  useEffect(() => {\r\n    const audio = document.getElementById(\"backgroundaudio\");\r\n    audio.volume = 0.3;\r\n    playAudio ? audio.play() : audio.pause();\r\n  }, [playAudio]);\r\n\r\n  return (\r\n    <div className=\"title-corners\">\r\n      {playAudio ? (\r\n        <i\r\n          onClick={() => {\r\n            setPlayAudio(!playAudio);\r\n          }}\r\n          className=\"fas fa-volume-up\"\r\n          id=\"audioicon\"\r\n          alt=\"audio icon\"\r\n        />\r\n      ) : (\r\n        <i\r\n          onClick={() => {\r\n            setPlayAudio(!playAudio);\r\n          }}\r\n          className=\"fas fa-volume-mute\"\r\n          id=\"audioicon\"\r\n          alt=\"audio icon\"\r\n        />\r\n      )}\r\n      <audio\r\n        src={require(`assets/audio/overwatch-theme.mp3`).default}\r\n        type=\"audio/mpeg\"\r\n        loop={true}\r\n        id=\"backgroundaudio\"\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import owlogo from \"assets/logo3.png\";\r\nimport AudioPlayer from \"./AudioPlayer\";\r\n\r\nexport default function TitleCard(props) {\r\n  return (\r\n    <div id=\"title-container\">\r\n      <div className=\"title-corners\">\r\n        <a\r\n          rel=\"noopener noreferrer\"\r\n          target=\"_blank\"\r\n          href={require(\"assets/how-to-play.pdf\").default}\r\n          id=\"howtoplay\"\r\n        >\r\n          <i className=\"fas fa-question\"></i>\r\n        </a>\r\n      </div>\r\n      <span className=\"title\">Overwatch</span>\r\n      <span className=\"credit\">\r\n        Game & Card Design by\r\n        <br />\r\n        u/barberian912\r\n      </span>\r\n      <img src={owlogo} id=\"centerlogo\" alt=\"owlogo\" />\r\n      <span className=\"credit\">\r\n        Digitisation by\r\n        <br />\r\n        Nathan H Miles\r\n      </span>\r\n      <span className=\"title\">Card Game</span>\r\n      <AudioPlayer\r\n        playAudio={props.playAudio}\r\n        setPlayAudio={props.setPlayAudio}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","export default function Footer() {\r\n  return(\r\n    <footer>\r\n      <span className=\"disclaimer\">\r\n        All characters, art and the Overwatch logo and brand are the property of Blizzard Entertainment, Inc. This is a free, fan-made game that is not affiliated with Blizzard Entertainment, Inc. in any way.\r\n      </span>\r\n    </footer>\r\n  );\r\n}","import React, { useContext, useEffect, useRef, useState } from \"react\";\r\nimport gameContext from \"context/gameContext\";\r\nimport turnContext from \"context/turnContext\";\r\nimport $ from \"jquery\";\r\nimport { ACTIONS } from \"App\";\r\nimport getRandInt from \"helper\";\r\n\r\nexport default function HeroAbilities(props) {\r\n  // Context\r\n  const { gameState, dispatch } = useContext(gameContext);\r\n  const { turnState, setTurnState } = useContext(turnContext);\r\n\r\n  // Variables\r\n  const playerTurn = turnState.playerTurn;\r\n  const enemyPlayerNum = playerTurn === 1 ? 2 : 1;\r\n\r\n  const { playerHeroId, unsetCardFocus, rowId, playAudio } = props;\r\n  const currentCard =\r\n    gameState.playerCards[`player${playerHeroId[0]}cards`].cards[playerHeroId];\r\n  const heroId = playerHeroId.slice(1, playerHeroId.length);\r\n\r\n  // ref to keep track of card health during async ability usages\r\n  let targetRef = useRef(null);\r\n  // ref to check if a user clicked end turn - checks current turnstate against refs state\r\n  let turnRef = useRef(turnState);\r\n  // ref to track how many enemies have been hit by a multi-target ability\r\n  let enemiesHitByAbility = useRef(0);\r\n  // ref to track which hero's ability is currently in use\r\n  let currentHeroAbilityRef = useRef(null);\r\n\r\n  // TODO: later if implementing more built in controls, such as only allowing\r\n  // TODO: user to affect cards in a specific row, create another ref to track\r\n  // TODO: row target info and reference it during the hero's ability call\r\n\r\n  // Ensures targetRef only contains values during ability usage,\r\n  // Reset to empty object when rerendering (i.e. when ability is finished)\r\n  useEffect(() => {\r\n    targetRef.current = {};\r\n  });\r\n\r\n  // Applies damage to either shields or health as needed, returning both the shield and health value\r\n  // TODO: currently only damage has its own function that sets state, all other state\r\n  // TODO: is set within the hero's ability\r\n  function applyDamage(\r\n    damageValue,\r\n    targetCardId,\r\n    targetRow,\r\n    ignoreShields = false\r\n  ) {\r\n    // Identify target player\r\n    const targetPlayerNum = parseInt(targetCardId[0]);\r\n    const targetPlayerCards =\r\n      gameState.playerCards[`player${targetPlayerNum}cards`].cards;\r\n    const targetHeroId = targetCardId.slice(1, targetCardId.length);\r\n\r\n    // Get hero health and shield values\r\n    let targetHealth = targetPlayerCards[targetCardId].health;\r\n    let targetShield = targetPlayerCards[targetCardId].shield;\r\n    let targetRowShield = gameState.rows[targetRow].totalShield();\r\n\r\n    // *** EFFECTS ***\r\n    // Check ally and enemy row effects that apply to damage\r\n    const targetRowAllyEffects = gameState.rows[targetRow].allyEffects.filter(\r\n      (effect) => effect.type === \"damage\"\r\n    );\r\n    const targetRowEnemyEffects = gameState.rows[targetRow].enemyEffects.filter(\r\n      (effect) => effect.type === \"damage\"\r\n    );\r\n\r\n    // Calculate net total of effects on the row\r\n    let totalRowEffect = 0;\r\n    for (let effect of targetRowAllyEffects) {\r\n      totalRowEffect += effect.value;\r\n    }\r\n    for (let effect of targetRowEnemyEffects) {\r\n      totalRowEffect += effect.value;\r\n    }\r\n\r\n    // Check ally and enemy card effects\r\n    const targetCardAllyEffects = targetPlayerCards[\r\n      targetCardId\r\n    ].allyEffects.filter((effect) => effect.type === \"damage\");\r\n    const targetCardEnemyEffects = targetPlayerCards[\r\n      targetCardId\r\n    ].enemyEffects.filter((effect) => effect.type === \"damage\");\r\n\r\n    // Calculate net total of card effects\r\n    let totalCardEffect = 0;\r\n    for (let effect of targetCardAllyEffects) {\r\n      totalCardEffect += effect.value;\r\n    }\r\n    for (let effect of targetCardEnemyEffects) {\r\n      totalCardEffect += effect.value;\r\n    }\r\n\r\n    // Net total of all damage effects on both row and card\r\n    const totalEffect = totalRowEffect + totalCardEffect;\r\n\r\n    // If the enemy hasn't been targeted during the current ability, apply the damage effect\r\n    if (!(targetCardId in targetRef.current)) {\r\n      damageValue += totalEffect;\r\n    }\r\n\r\n    // *** UPDATE REF ****\r\n    // If the target has already been targeted during this ability, update with current values\r\n    // Needed because gameState is only updated once the entire ability is finished, so\r\n    // we need useRef in order to keep track of the damaged hero's changing health/shield value\r\n    if (targetCardId in targetRef.current) {\r\n      targetHealth = targetRef.current[targetCardId].health;\r\n      targetShield = targetRef.current[targetCardId].shield;\r\n    } else targetRef.current[targetCardId] = {};\r\n\r\n    if (targetRow in targetRef.current) {\r\n      targetRowShield = targetRef.current[targetRow].totalShield;\r\n    } else targetRef.current[targetRow] = {};\r\n\r\n    // *** APPLY DAMAGE ***\r\n    // Track how much damage is done to the row's shields so it can be dispatched to state later\r\n    let rowShieldDamage = 0;\r\n    try {\r\n      // Decrement the target's health/shield/rowshield as needed\r\n      for (let i = 0; i < damageValue; i++) {\r\n        // Damage row shield before all else, and update ref\r\n        if (targetRowShield > 0 && ignoreShields === false) {\r\n          console.log(\r\n            `damaging row shield ${targetRowShield} with damage ${damageValue}`\r\n          );\r\n\r\n          targetRowShield -= 1;\r\n          rowShieldDamage += 1;\r\n\r\n          targetRef.current[targetRow][\"totalShield\"] = targetRowShield;\r\n\r\n          // Damage hero shield before health, and update ref\r\n        } else if (targetShield > 0 && ignoreShields === false) {\r\n          targetShield -= 1;\r\n\r\n          // Damage hero health and update ref\r\n        } else if (targetHealth > 0) {\r\n          targetHealth -= 1;\r\n        } else if (targetHealth === 0) {\r\n          console.log(\"target health is 0\");\r\n        } else {\r\n          throw new Error(`${targetCardId} is at ${targetHealth} health`);\r\n        }\r\n      }\r\n      targetRef.current[targetCardId][\"health\"] = targetHealth;\r\n      targetRef.current[targetCardId][\"shield\"] = targetShield;\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n\r\n    // Set the new state (will be done in batch at the end of the ability)\r\n    dispatch({\r\n      type: ACTIONS.DAMAGE_ROW_SHIELD,\r\n      payload: {\r\n        targetRow: targetRow,\r\n        rowShieldDamage: rowShieldDamage,\r\n      },\r\n    });\r\n\r\n    dispatch({\r\n      type: ACTIONS.EDIT_CARD,\r\n      payload: {\r\n        playerNum: targetPlayerNum,\r\n        targetCardId: targetCardId,\r\n        editKeys: [\"health\", \"shield\"],\r\n        editValues: [targetHealth, targetShield],\r\n      },\r\n    });\r\n\r\n    return;\r\n  }\r\n\r\n  function applyHealing(healingValue, targetCardId) {\r\n    const targetPlayerNum = targetCardId[0];\r\n    const targetPlayerCards =\r\n      gameState.playerCards[`player${targetPlayerNum}cards`].cards;\r\n\r\n    // Get hero health\r\n    let targetHealth = targetPlayerCards[targetCardId].health;\r\n    const targetMaxHealth = targetPlayerCards[targetCardId].maxHealth;\r\n\r\n    if (targetCardId in targetRef.current) {\r\n      targetHealth = targetRef.current[targetCardId].health;\r\n    }\r\n\r\n    // Initialise ref if not been used yet during this ability\r\n    targetRef.current[targetCardId] = {};\r\n\r\n    // Track amount of healing done\r\n    let healingDone = 0;\r\n\r\n    // Increment health value\r\n    if (targetHealth !== 0) {\r\n      for (let i = 0; i < healingValue; i++) {\r\n        if (targetHealth < targetMaxHealth) {\r\n          targetHealth += 1;\r\n          healingDone += 1;\r\n          targetRef.current[targetCardId][\"health\"] = targetHealth;\r\n        }\r\n      }\r\n      // Set the new state (will be done in batch at the end of the ability)\r\n      dispatch({\r\n        type: ACTIONS.EDIT_CARD,\r\n        payload: {\r\n          playerNum: targetPlayerNum,\r\n          targetCardId: targetCardId,\r\n          editKeys: [\"health\"],\r\n          editValues: [targetHealth],\r\n        },\r\n      });\r\n    }\r\n\r\n    // Return remaining healing left over for possible later use\r\n    const remainingHealing = healingValue - healingDone;\r\n    return remainingHealing;\r\n  }\r\n\r\n  // Abilities data\r\n  const abilities = {\r\n    ana: {\r\n      ability1: {\r\n        audioFile: \"ana-grenade\",\r\n        run() {\r\n          return new Promise((resolve, reject) => {\r\n            // When a row is clicked\r\n            $(\".row\").on(\"click\", (e) => {\r\n              // Get target information\r\n              const targetRow = $(e.target).closest(\".row\").attr(\"id\");\r\n              const rowPosition = targetRow[1];\r\n\r\n              // Remove the onclick\r\n              $(\".row\").off(\"click\");\r\n\r\n              // Check target is valid\r\n              if (targetRow[0] === \"p\") {\r\n                reject(\"Incorrect target\");\r\n                return;\r\n              }\r\n\r\n              const enemyPlayer = playerTurn === 1 ? 2 : 1;\r\n              const playerRowCardIds =\r\n                gameState.rows[`${playerTurn}${rowPosition}`].cardIds;\r\n              const enemyPlayerRowCardIds =\r\n                gameState.rows[`${enemyPlayer}${rowPosition}`].cardIds;\r\n\r\n              const damageValue = 1;\r\n              const healValue = 1;\r\n\r\n              // Heal own player cards\r\n              for (let cardId of playerRowCardIds) {\r\n                applyHealing(healValue, cardId);\r\n              }\r\n\r\n              // Damage enemy cards\r\n              for (let cardId of enemyPlayerRowCardIds) {\r\n                applyDamage(\r\n                  damageValue,\r\n                  cardId,\r\n                  `${enemyPlayer}${rowPosition}`\r\n                );\r\n              }\r\n\r\n              resolve();\r\n            });\r\n          });\r\n        },\r\n      },\r\n      ability2: {\r\n        synergyCost: 3,\r\n        audioFile: \"ana-ult\",\r\n        run() {\r\n          const currentRowAllyNumber = gameState.rows[rowId].cardIds.length;\r\n          const effectId = \"anaUltimateEffect\";\r\n\r\n          // TODO: ensure ana's ultimate can be removed by hack/EMP\r\n        },\r\n      },\r\n      anaUltimateEffect: {},\r\n    },\r\n    ashe: {\r\n      ability1: {\r\n        audioFile: \"ashe-deadlockgang\",\r\n        run() {\r\n          // TODO: currently only the first option of ashe's ability 1 is implemented - need to find a way to let the player choose between the two options\r\n          return new Promise((resolve, reject) => {\r\n            $(\".card\").on(\"click\", async (e) => {\r\n              const targetCardId = $(e.target).closest(\".card\").attr(\"id\");\r\n              const targetCardIndex = $(e.target).closest(\"li\").index();\r\n              const enemyPlayer = parseInt(targetCardId[0]);\r\n              const targetCardRow = $(e.target).closest(\".row\").attr(\"id\");\r\n\r\n              $(\".card\").off(\"click\");\r\n\r\n              // Check target is valid\r\n              if (\r\n                targetCardRow[0] === \"p\" ||\r\n                parseInt(targetCardRow[0]) === playerTurn\r\n              ) {\r\n                reject(\"Incorrect target row\");\r\n                return;\r\n              }\r\n\r\n              const damageValue = 2;\r\n              applyDamage(damageValue, targetCardId, targetCardRow, true);\r\n\r\n              resolve();\r\n            });\r\n          });\r\n        },\r\n      },\r\n      ability2: {\r\n        synergyCost: 3,\r\n        audioFile: \"ashe-bob\",\r\n        run() {\r\n          // Create bob card\r\n          dispatch({\r\n            type: ACTIONS.CREATE_CARD,\r\n            payload: {\r\n              playerNum: playerTurn,\r\n              heroId: \"bob\",\r\n            },\r\n          });\r\n\r\n          // Add summoned hero to hand\r\n          dispatch({\r\n            type: ACTIONS.ADD_CARD_TO_HAND,\r\n            payload: {\r\n              playerNum: playerTurn,\r\n              playerHeroId: `${playerTurn}bob`,\r\n            },\r\n          });\r\n        },\r\n      },\r\n    },\r\n    baptiste: {\r\n      ability1: {\r\n        audioFile: \"baptiste-notover\",\r\n        run() {\r\n          return new Promise((resolve, reject) => {\r\n            $(\".card\").on(\"click\", (e) => {\r\n              // Get target info\r\n              const targetCardId = $(e.target).closest(\".card\").attr(\"id\");\r\n              const targetCardIndex = $(e.target).closest(\"li\").index();\r\n              const targetCardRow = $(e.target).closest(\".row\").attr(\"id\");\r\n\r\n              // Remove onclick from all cards\r\n              $(\".card\").off(\"click\");\r\n\r\n              // Check target is valid\r\n              if (targetCardRow[0] === \"p\") {\r\n                reject(\"Incorrect target row\");\r\n                return;\r\n              }\r\n\r\n              // Get adjacent enemy target info\r\n              const adjacentTarget1 =\r\n                gameState.rows[targetCardRow].cardIds[targetCardIndex - 1];\r\n              const adjacentTarget2 =\r\n                gameState.rows[targetCardRow].cardIds[targetCardIndex + 1];\r\n\r\n              const targets = [targetCardId, adjacentTarget1, adjacentTarget2];\r\n\r\n              // If target is enemy apply damage, if ally apply healing\r\n              if (parseInt(targetCardId[0]) === playerTurn) {\r\n                targets.forEach((target) => {\r\n                  if (target !== undefined)\r\n                    applyHealing(1, target, targetCardRow);\r\n                });\r\n              } else {\r\n                targets.forEach((target) => {\r\n                  console.log(`attacking ${target}`);\r\n                  if (target !== undefined)\r\n                    applyDamage(1, target, targetCardRow);\r\n                });\r\n              }\r\n\r\n              resolve();\r\n            });\r\n          });\r\n        },\r\n      },\r\n      ability2: {\r\n        synergyCost: 3,\r\n        audioFile: \"baptiste-immortality\",\r\n      },\r\n    },\r\n    bastion: {\r\n      ability1: {},\r\n      ability2: {\r\n        synergyCost: 3,\r\n        audioFile: \"bastion-ult\",\r\n        run() {\r\n          return new Promise((resolve, reject) => {\r\n            $(\".card\").on(\"click\", (e) => {\r\n              const targetCardId = $(e.target).closest(\".card\").attr(\"id\");\r\n              const targetCardIndex = $(e.target).closest(\"li\").index();\r\n              const enemyPlayer = parseInt(targetCardId[0]);\r\n              const targetCardRow = $(e.target).closest(\".row\").attr(\"id\");\r\n\r\n              $(\".card\").off(\"click\");\r\n\r\n              // Check target is valid\r\n              if (\r\n                targetCardRow[0] === \"p\" ||\r\n                parseInt(targetCardRow[0]) === playerTurn\r\n              ) {\r\n                reject(\"Incorrect target row\");\r\n                return;\r\n              }\r\n\r\n              // Get adjacent enemy target info\r\n              const adjacentEnemy1 =\r\n                gameState.rows[targetCardRow].cardIds[targetCardIndex - 1];\r\n              const adjacentEnemy2 =\r\n                gameState.rows[targetCardRow].cardIds[targetCardIndex + 1];\r\n\r\n              // Apply 3 damage to target, and 1 damage to enemies adjacent to target\r\n              applyDamage(3, targetCardId, targetCardRow);\r\n              if (adjacentEnemy1 !== undefined) {\r\n                applyDamage(1, adjacentEnemy1, targetCardRow);\r\n              }\r\n              if (adjacentEnemy2 !== undefined) {\r\n                applyDamage(1, adjacentEnemy2, targetCardRow);\r\n              }\r\n\r\n              resolve();\r\n            });\r\n          });\r\n        },\r\n      },\r\n    },\r\n    bob: {\r\n      ability1: {},\r\n      ability2: {\r\n        synergyCost: 1,\r\n      },\r\n    },\r\n    brigitte: {\r\n      ability1: {\r\n        audioFile: \"brigitte-armour\",\r\n        run() {\r\n          return new Promise((resolve, reject) => {\r\n            $(\".card\").on(\"click\", (e) => {\r\n              // Get target info\r\n              const targetCardId = $(e.target).closest(\".card\").attr(\"id\");\r\n              const targetRow = $(e.target).closest(\".row\").attr(\"id\");\r\n\r\n              // Remove onclick\r\n              $(\".card\").off(\"click\");\r\n\r\n              // Check target is valid\r\n              if (\r\n                targetRow[0] === \"p\" ||\r\n                parseInt(targetRow[0]) !== playerTurn\r\n              ) {\r\n                reject(\"Incorrect target\");\r\n                return;\r\n              }\r\n\r\n              // Apply heal to the target card\r\n              const healValue = 3;\r\n              const remainingHealing = applyHealing(healValue, targetCardId);\r\n\r\n              // Apply remaining healing as shield\r\n              if (remainingHealing > 0) {\r\n                const shieldValue = remainingHealing;\r\n                dispatch({\r\n                  type: ACTIONS.UPDATE_CARD,\r\n                  payload: {\r\n                    playerNum: playerTurn,\r\n                    cardId: targetCardId,\r\n                    updateKeys: [\"shield\"],\r\n                    updateValues: [shieldValue],\r\n                  },\r\n                });\r\n              }\r\n\r\n              resolve();\r\n            });\r\n          });\r\n        },\r\n      },\r\n      ability2: {\r\n        synergyCost: 3,\r\n        audioFile: \"brigitte-ult\",\r\n      },\r\n    },\r\n    doomfist: {\r\n      ability1: {\r\n        audioFile: \"doomfist-punch\",\r\n        run() {\r\n          return new Promise((resolve, reject) => {\r\n            $(\".card\").on(\"click\", (e) => {\r\n              const targetCardId = $(e.target).closest(\".card\").attr(\"id\");\r\n              const targetCardIndex = $(e.target).closest(\"li\").index();\r\n              const enemyPlayer = parseInt(targetCardId[0]);\r\n              const targetCardRow = $(e.target).closest(\".row\").attr(\"id\");\r\n\r\n              $(\".card\").off(\"click\");\r\n\r\n              // Check target is valid\r\n              if (\r\n                targetCardRow[0] === \"p\" ||\r\n                parseInt(targetCardRow[0]) === playerTurn\r\n              ) {\r\n                reject(\"Incorrect target row\");\r\n                return;\r\n              } else if (targetCardRow[1] !== \"b\") {\r\n                // Move target back a row if not already in last row\r\n                const newRowId = `${enemyPlayer}${\r\n                  targetCardRow[1] === \"f\" ? \"m\" : \"b\"\r\n                }`;\r\n\r\n                // Set state\r\n                dispatch({\r\n                  type: ACTIONS.MOVE_CARD,\r\n                  payload: {\r\n                    targetCardId: targetCardId,\r\n                    startRowId: targetCardRow,\r\n                    finishRowId: newRowId,\r\n                    startIndex: targetCardIndex,\r\n                    finishIndex: 0,\r\n                  },\r\n                });\r\n              }\r\n\r\n              // Apply damage to target\r\n              const damageValue = 2;\r\n              applyDamage(damageValue, targetCardId, targetCardRow);\r\n\r\n              resolve();\r\n            });\r\n          });\r\n        },\r\n      },\r\n      ability2: {\r\n        // TODO:\r\n        /*\r\n        Doomfist's ability2 is exactly the same as bastion's. To differntiate them, and add a little\r\n        more flavour to doomfist's card, ability2 could move doomfist to the opposite row that\r\n        he targeted (i.e. click on an enemy in the middle row, damage the target and adjacent enemies,\r\n        and also move doomfist to your middle row). This would be a double edge sword, as sometimes\r\n        you may not want to move doomfist into the row that you want to target.\r\n        The ability could also give doomfist a certain amount of shield for himself. \r\n        To balance this, the damage should probably be nerfed, probably 2 damage\r\n        to the target, and keep 1 to the adjacent enemies\r\n        */\r\n        synergyCost: 3,\r\n        audioFile: \"doomfist-ult\",\r\n        run() {\r\n          return new Promise((resolve, reject) => {\r\n            $(\".card\").on(\"click\", (e) => {\r\n              const targetCardId = $(e.target).closest(\".card\").attr(\"id\");\r\n              const targetCardIndex = $(e.target).closest(\"li\").index();\r\n              const enemyPlayer = parseInt(targetCardId[0]);\r\n              const targetCardRow = $(e.target).closest(\".row\").attr(\"id\");\r\n\r\n              $(\".card\").off(\"click\");\r\n\r\n              // Check target is valid\r\n              if (\r\n                targetCardRow[0] === \"p\" ||\r\n                parseInt(targetCardRow[0]) === playerTurn\r\n              ) {\r\n                reject(\"Incorrect target row\");\r\n                return;\r\n              }\r\n\r\n              // Get adjacent enemy target info\r\n              const adjacentEnemy1 =\r\n                gameState.rows[targetCardRow].cardIds[targetCardIndex - 1];\r\n              const adjacentEnemy2 =\r\n                gameState.rows[targetCardRow].cardIds[targetCardIndex + 1];\r\n\r\n              // Apply 3 damage to target, and 1 damage to enemies adjacent to target\r\n              applyDamage(3, targetCardId, targetCardRow);\r\n              if (adjacentEnemy1 !== undefined) {\r\n                applyDamage(1, adjacentEnemy1, targetCardRow);\r\n              }\r\n              if (adjacentEnemy2 !== undefined) {\r\n                applyDamage(1, adjacentEnemy2, targetCardRow);\r\n              }\r\n\r\n              resolve();\r\n            });\r\n          });\r\n        },\r\n      },\r\n    },\r\n    dva: {\r\n      ability2: {\r\n        synergyCost: 2,\r\n        audioFile: \"dva-ult\",\r\n        run() {\r\n          return new Promise((resolve, reject) => {\r\n            props.setNextCardDraw((prevState) => ({\r\n              ...prevState,\r\n              [`player${playerTurn}`]: \"dvameka\",\r\n            }));\r\n\r\n            resolve();\r\n          });\r\n        },\r\n      },\r\n    },\r\n    dvameka: {\r\n      ability1: {\r\n        audioFile: \"dvameka-apm\",\r\n        run() {\r\n          // Add shield to dvameka card\r\n          const newShield = 2;\r\n          dispatch({\r\n            type: ACTIONS.UPDATE_CARD,\r\n            payload: {\r\n              playerNum: playerTurn,\r\n              cardId: `${playerTurn}dvameka`,\r\n              updateKeys: [\"shield\"],\r\n              updateValues: [newShield],\r\n            },\r\n          });\r\n        },\r\n      },\r\n      ability2: {\r\n        synergyCost: 3,\r\n        audioFile: \"dvameka-nerfthis\",\r\n        run() {\r\n          const rowPosition = rowId[1];\r\n          const enemyPlayer = playerTurn === 1 ? 2 : 1;\r\n          const playerRowCardIds = gameState.rows[rowId].cardIds;\r\n          const enemyPlayerRowCardIds =\r\n            gameState.rows[`${enemyPlayer}${rowPosition}`].cardIds;\r\n          const dvamekaIndex = $(`#${playerTurn}dvameka`).closest(\"li\").index();\r\n\r\n          const damageValue = 4;\r\n\r\n          // Damage own player cards, except for dvameka using the ability\r\n          for (let cardId of playerRowCardIds) {\r\n            if (cardId !== `${playerTurn}dvameka`) {\r\n              applyDamage(damageValue, cardId, rowId);\r\n            }\r\n          }\r\n\r\n          // Damage enemy cards\r\n          for (let cardId of enemyPlayerRowCardIds) {\r\n            applyDamage(damageValue, cardId, `${enemyPlayer}${rowPosition}`);\r\n          }\r\n\r\n          // After effects\r\n          // Discard dvameka card\r\n          dispatch({\r\n            type: ACTIONS.DISCARD_CARD,\r\n            payload: {\r\n              playerNum: playerTurn,\r\n              targetCardId: `${playerTurn}dvameka`,\r\n              targetCardRow: rowId,\r\n            },\r\n          });\r\n\r\n          // Create baby dva card\r\n          dispatch({\r\n            type: ACTIONS.CREATE_CARD,\r\n            payload: {\r\n              playerNum: playerTurn,\r\n              heroId: \"dva\",\r\n            },\r\n          });\r\n\r\n          // Add baby dva to row dvameka was in\r\n          dispatch({\r\n            type: ACTIONS.ADD_CARD_TO_HAND,\r\n            payload: {\r\n              playerNum: playerTurn,\r\n              playerHeroId: `${playerTurn}dva`,\r\n            },\r\n          });\r\n\r\n          // Get Dva's index in player hand\r\n          const dvaIndex = $(`#${playerTurn}dva`).closest(\"li\").index();\r\n\r\n          // Move dva from player hand to dvameka's former position\r\n          dispatch({\r\n            type: ACTIONS.MOVE_CARD,\r\n            payload: {\r\n              targetCardId: `${playerTurn}dva`,\r\n              startRowId: `player${playerTurn}hand`,\r\n              finishRowId: rowId,\r\n              startIndex: dvaIndex,\r\n              finishIndex: dvamekaIndex,\r\n            },\r\n          });\r\n        },\r\n      },\r\n    },\r\n    echo: {\r\n      ability1: {\r\n        audioFile: \"echo-burning\",\r\n        run() {\r\n          return new Promise((resolve, reject) => {\r\n            $(\".card\").on(\"click\", (e) => {\r\n              // Get target info\r\n              const targetCardId = $(e.target).closest(\".card\").attr(\"id\");\r\n              const targetRow = $(e.target).closest(\".row\").attr(\"id\");\r\n\r\n              // Remove onclick\r\n              $(\".card\").off(\"click\");\r\n\r\n              // Check target is in valid row\r\n              if (\r\n                targetRow[0] === \"p\" ||\r\n                parseInt(targetRow[0]) === playerTurn\r\n              ) {\r\n                reject(\"Incorrect target\");\r\n                return;\r\n              }\r\n\r\n              // Apply damage to the target card (includes setting state)\r\n              const targetPlayer = parseInt(targetCardId[0]);\r\n              const targetCard =\r\n                gameState.playerCards[`player${targetPlayer}cards`].cards[\r\n                  targetCardId\r\n                ];\r\n              const damageValue = targetCard.maxHealth - targetCard.health;\r\n              applyDamage(damageValue, targetCardId, targetRow);\r\n\r\n              // Apply abilities that affect a specific card\r\n\r\n              resolve(\"resolved!\");\r\n            });\r\n          });\r\n        },\r\n      },\r\n      ability2: {\r\n        audioFile: \"echo-ult\",\r\n        synergyCost: 2,\r\n        async run() {\r\n          // Get the id of the last used ultimate\r\n          const echoUltHeroId = localStorage.getItem(\"echoUltHeroId\");\r\n\r\n          // Certain ults need to be tailored specifically for echo to use\r\n          // Ashe - differntiate echo's bob from ashe's by using a different id\r\n          if (echoUltHeroId === \"ashe\") {\r\n            // Create bob card\r\n            dispatch({\r\n              type: ACTIONS.CREATE_CARD,\r\n              payload: {\r\n                playerNum: playerTurn,\r\n                heroId: \"bob-echo\",\r\n              },\r\n            });\r\n\r\n            // Add summoned hero to hand\r\n            dispatch({\r\n              type: ACTIONS.ADD_CARD_TO_HAND,\r\n              payload: {\r\n                playerNum: playerTurn,\r\n                playerHeroId: `${playerTurn}bob-echo`,\r\n              },\r\n            });\r\n\r\n            return;\r\n          }\r\n          // Dva - cant allow echo to create a second dvameka in player's deck\r\n          else if (echoUltHeroId === \"dva\") {\r\n            alert(\"Cannot duplicate D.va's Ultimate\");\r\n            return;\r\n          }\r\n          // DvaMeka - Echo causes the damage, but none of the other effects\r\n          else if (echoUltHeroId === \"dvameka\") {\r\n            const rowPosition = rowId[1];\r\n            const enemyPlayer = playerTurn === 1 ? 2 : 1;\r\n            const playerRowCardIds = gameState.rows[rowId].cardIds;\r\n            const enemyPlayerRowCardIds =\r\n              gameState.rows[`${enemyPlayer}${rowPosition}`].cardIds;\r\n\r\n            // Damage own player cards, except for echo using the ability\r\n            const damageValue = 4;\r\n            for (let cardId of playerRowCardIds) {\r\n              if (cardId !== `${playerTurn}echo`) {\r\n                applyDamage(damageValue, cardId, rowId);\r\n              }\r\n            }\r\n\r\n            // Damage enemy cards\r\n            for (let cardId of enemyPlayerRowCardIds) {\r\n              applyDamage(damageValue, cardId, `${enemyPlayer}${rowPosition}`);\r\n            }\r\n\r\n            return;\r\n          }\r\n\r\n          // Run the ultimate in the same way as normal, but without deducting synergy\r\n          const maxTargets = abilities[echoUltHeroId].ability2.maxTargets;\r\n          let i = 0;\r\n          do {\r\n            await abilities[echoUltHeroId].ability2.run();\r\n            i++;\r\n          } while (\r\n            \"maxTargets\" in abilities[echoUltHeroId].ability2 &&\r\n            i < maxTargets\r\n          );\r\n        },\r\n      },\r\n    },\r\n    genji: {\r\n      ability1: {\r\n        maxTargets: 3,\r\n        audioFile: \"genji-cutting\",\r\n        run() {\r\n          return new Promise((resolve, reject) => {\r\n            $(\".card\").on(\"click\", (e) => {\r\n              // Get target info\r\n              const targetCardId = $(e.target).closest(\".card\").attr(\"id\");\r\n              const targetRow = $(e.target).closest(\".row\").attr(\"id\");\r\n\r\n              // Remove onclick\r\n              $(\".card\").off(\"click\");\r\n\r\n              // Allow user to end the ability early by clicking on the ability-using-hero's card\r\n              if (targetCardId === `${currentHeroAbilityRef.current}`) {\r\n                alert(\"Ability stopped early\");\r\n                return;\r\n              }\r\n              // Check target is valid\r\n              if (\r\n                targetRow[0] === \"p\" ||\r\n                parseInt(targetRow[0]) === playerTurn\r\n              ) {\r\n                reject(\"Incorrect target\");\r\n                return;\r\n              }\r\n\r\n              // Apply damage to the target card (includes setting state)\r\n              const damageValue = 1;\r\n              applyDamage(damageValue, targetCardId, targetRow);\r\n\r\n              // Apply abilities that affect a specific card\r\n\r\n              resolve(\"resolved!\");\r\n            });\r\n          });\r\n        },\r\n      },\r\n      ability2: {\r\n        synergyCost: 3,\r\n        audioFile: \"genji-ult\",\r\n        run() {\r\n          return new Promise((resolve, reject) => {\r\n            // Execute the following when any card is clicked\r\n            $(\".card\").on(\"click\", (e) => {\r\n              const targetCardId = $(e.target).closest(\".card\").attr(\"id\");\r\n              const enemyPlayer = parseInt(targetCardId[0]);\r\n              const targetRow = $(e.target).closest(\".row\").attr(\"id\");\r\n\r\n              // Remove the onclick effect from all cards\r\n              $(\".card\").off(\"click\");\r\n              // Check target is valid\r\n              if (\r\n                targetRow[0] === \"p\" ||\r\n                parseInt(targetRow[0]) === playerTurn ||\r\n                // Check target has been damaged\r\n                gameState.playerCards[`player${enemyPlayer}cards`].cards[\r\n                  targetCardId\r\n                ].health ===\r\n                  gameState.playerCards[`player${enemyPlayer}cards`].cards[\r\n                    targetCardId\r\n                  ].maxHealth\r\n              ) {\r\n                reject(\"Incorrect target\");\r\n                return;\r\n              }\r\n\r\n              // Apply abilities that affect a specific card\r\n              dispatch({\r\n                type: ACTIONS.EDIT_CARD,\r\n                payload: {\r\n                  playerNum: enemyPlayer,\r\n                  targetCardId: targetCardId,\r\n                  editKeys: [\"health\"],\r\n                  editValues: [0],\r\n                },\r\n              });\r\n\r\n              resolve();\r\n            });\r\n          });\r\n        },\r\n      },\r\n    },\r\n    hanzo: {\r\n      ability1: {\r\n        audioFile: \"hanzo-marked\",\r\n        run() {\r\n          // Wait for user click\r\n          return new Promise((resolve, reject) => {\r\n            // When a row is clicked\r\n            $(\".row\").on(\"click\", (e) => {\r\n              // Get target information & remove onclick\r\n              const targetRow = $(e.target).closest(\".row\").attr(\"id\");\r\n              $(\".row\").off(\"click\");\r\n\r\n              // Check target is valid\r\n              if (\r\n                targetRow[0] === \"p\" ||\r\n                parseInt(targetRow[0]) === playerTurn\r\n              ) {\r\n                reject(\"Incorrect target\");\r\n                return;\r\n              }\r\n\r\n              // Apply effect\r\n              const effectId = \"hanzoEnemyEffect\";\r\n              dispatch({\r\n                type: ACTIONS.ADD_ROW_EFFECT,\r\n                payload: {\r\n                  targetRow: targetRow,\r\n                  playerHeroId: `${playerTurn}hanzo`,\r\n                  effectId: effectId,\r\n                },\r\n              });\r\n\r\n              resolve();\r\n            });\r\n          });\r\n        },\r\n      },\r\n      ability2: {\r\n        audioFile: \"hanzo-ult\",\r\n        maxTargets: 3,\r\n        synergyCost: 3,\r\n        run() {\r\n          // Wait for user input\r\n          return new Promise((resolve, reject) => {\r\n            // Specifically, wait for user to click on a card\r\n            $(\".card\").on(\"click\", (e) => {\r\n              // Get target info\r\n              const targetCardId = $(e.target).closest(\".card\").attr(\"id\");\r\n              const targetRow = $(e.target).closest(\".row\").attr(\"id\");\r\n\r\n              // Remove onclick\r\n              $(\".card\").off(\"click\");\r\n\r\n              // Allow user to end the ability early by clicking on the ability-using-hero's card\r\n              if (targetCardId === `${currentHeroAbilityRef.current}`) {\r\n                alert(\"Ability stopped early\");\r\n                return;\r\n              }\r\n              // Check target is valid\r\n              // TODO: check that target cards are actually in the same column\r\n              // TODO: currently just relying on user to choose correctly\r\n              if (\r\n                targetRow[0] === \"p\" ||\r\n                parseInt(targetRow[0]) === playerTurn\r\n              ) {\r\n                reject(\"Incorrect target\");\r\n                return;\r\n              }\r\n\r\n              // Apply damage to the target card (includes setting state)\r\n              const damageValue = 3;\r\n              applyDamage(damageValue, targetCardId, targetRow);\r\n\r\n              resolve();\r\n            });\r\n          });\r\n        },\r\n      },\r\n    },\r\n    junkrat: {\r\n      ability1: {\r\n        audioFile: \"junkrat-laugh\",\r\n      },\r\n      ability2: {\r\n        audioFile: \"junkrat-ult\",\r\n        synergyCost: 3,\r\n        run() {\r\n          return new Promise((resolve, reject) => {\r\n            $(\".row\").on(\"click\", (e) => {\r\n              const targetRowId = $(e.target).closest(\".row\").attr(\"id\");\r\n              const junkratStartIndex = $(`#${playerHeroId}`)\r\n                .closest(\"li\")\r\n                .index();\r\n              const newRowPosition = targetRowId[1];\r\n\r\n              $(\".row\").off(\"click\");\r\n\r\n              // Check target is valid\r\n              if (targetRowId[0] === \"p\") {\r\n                reject(\"Incorrect target row\");\r\n                return;\r\n              }\r\n\r\n              // Set state\r\n              dispatch({\r\n                type: ACTIONS.MOVE_CARD,\r\n                payload: {\r\n                  targetCardId: `${playerHeroId}`,\r\n                  startRowId: rowId,\r\n                  finishRowId: targetRowId,\r\n                  startIndex: junkratStartIndex,\r\n                  finishIndex: 0,\r\n                },\r\n              });\r\n\r\n              // Get all cards in the target row\r\n              const targetRowCardIds = $.map(\r\n                $(`#${enemyPlayerNum}${newRowPosition} .card`),\r\n                (card) => {\r\n                  return card.id;\r\n                }\r\n              );\r\n\r\n              // Apply damange\r\n              const damageValue = 2;\r\n              targetRowCardIds.forEach((cardId) => {\r\n                applyDamage(damageValue, cardId, targetRowId);\r\n              });\r\n\r\n              resolve();\r\n            });\r\n          });\r\n        },\r\n      },\r\n    },\r\n    lucio: {\r\n      ability1: {\r\n        audioFile: \"lucio-ampitup\",\r\n        run() {\r\n          // Wait for user click\r\n          return new Promise((resolve, reject) => {\r\n            // When a row is clicked\r\n            $(\".row\").on(\"click\", (e) => {\r\n              // Get target information\r\n              const targetRow = $(e.target).closest(\".row\").attr(\"id\");\r\n\r\n              // Remove the onclick\r\n              $(\".row\").off(\"click\");\r\n\r\n              // Check target is valid\r\n              if (\r\n                targetRow[0] === \"p\" ||\r\n                parseInt(targetRow[0]) !== playerTurn\r\n              ) {\r\n                reject(\"Incorrect target\");\r\n                return;\r\n              }\r\n\r\n              // Effect id\r\n              const effectId = \"lucioAllyEffect\";\r\n              // Apply effect\r\n              dispatch({\r\n                type: ACTIONS.ADD_ROW_EFFECT,\r\n                payload: {\r\n                  targetRow: targetRow,\r\n                  playerHeroId: `${playerTurn}lucio`,\r\n                  effectId: effectId,\r\n                },\r\n              });\r\n\r\n              resolve();\r\n            });\r\n          });\r\n        },\r\n      },\r\n      ability2: {\r\n        audioFile: \"lucio-ult\",\r\n        synergyCost: 3,\r\n        run() {\r\n          // Get target information\r\n          const heroRowCardIds = gameState.rows[rowId].cardIds;\r\n\r\n          // Remove the onclick\r\n          $(\".card\").off(\"click\");\r\n\r\n          // Apply effect\r\n          const shieldValue = 2;\r\n          for (let cardId of heroRowCardIds) {\r\n            dispatch({\r\n              type: ACTIONS.UPDATE_CARD,\r\n              payload: {\r\n                playerNum: playerTurn,\r\n                cardId: cardId,\r\n                updateKeys: [\"shield\"],\r\n                updateValues: [shieldValue],\r\n              },\r\n            });\r\n          }\r\n        },\r\n      },\r\n      lucioAllyEffect: {\r\n        run(rowId) {\r\n          const targetRowCardIds = gameState.rows[rowId].cardIds;\r\n          const healingValue = 1;\r\n\r\n          for (let cardId of targetRowCardIds) {\r\n            applyHealing(healingValue, cardId);\r\n          }\r\n\r\n          return;\r\n        },\r\n      },\r\n    },\r\n    mccree: {\r\n      ability1: {\r\n        audioFile: \"mccree-fishinabarrel\",\r\n        run() {\r\n          return new Promise((resolve, reject) => {\r\n            // When any card is clicked\r\n            $(\".row\").on(\"click\", (e) => {\r\n              // Get target info\r\n              const targetCardRow = $(e.target).closest(\".row\").attr(\"id\");\r\n              const enemyPlayer = parseInt(targetCardRow[0]);\r\n              const rowEnemies = gameState.rows[targetCardRow].cardIds.length;\r\n\r\n              // Remove onclick from all cards\r\n              $(\".row\").off(\"click\");\r\n\r\n              // Check target is valid\r\n              if (\r\n                targetCardRow[0] === \"p\" ||\r\n                parseInt(targetCardRow[0]) === playerTurn\r\n              ) {\r\n                reject(\"Incorrect target row\");\r\n                return;\r\n              }\r\n\r\n              // Reduce synergy of target row\r\n              dispatch({\r\n                type: ACTIONS.UPDATE_SYNERGY,\r\n                payload: {\r\n                  rowId: targetCardRow,\r\n                  synergyCost: Math.abs(rowEnemies) * -1,\r\n                },\r\n              });\r\n\r\n              resolve();\r\n            });\r\n          });\r\n        },\r\n      },\r\n      ability2: {\r\n        audioFile: \"mccree-ult\",\r\n        synergyCost: 3,\r\n        run() {\r\n          return new Promise((resolve, reject) => {\r\n            $(\".row\").on(\"click\", async (e) => {\r\n              const targetRow = $(e.target).closest(\".row\").attr(\"id\");\r\n\r\n              $(\".row\").off(\"click\");\r\n\r\n              // Check target is valid\r\n              if (\r\n                targetRow[0] === \"p\" ||\r\n                parseInt(targetRow[0]) === playerTurn\r\n              ) {\r\n                reject(\"Incorrect target row\");\r\n                return;\r\n              }\r\n\r\n              // Get all cards in the target row\r\n              const targetRowCardIds = $.map(\r\n                $(`#${targetRow} .card`),\r\n                function (card) {\r\n                  return card.id;\r\n                }\r\n              );\r\n\r\n              // Apply damange\r\n              const totalDamage = 6;\r\n              const damagePerEnemy = Math.floor(\r\n                totalDamage / targetRowCardIds.length\r\n              );\r\n              let damageDone = 0;\r\n              targetRowCardIds.forEach((cardId) => {\r\n                applyDamage(damagePerEnemy, cardId, targetRow);\r\n                damageDone += damagePerEnemy;\r\n              });\r\n\r\n              if (damageDone < totalDamage) {\r\n                let remainingDamage = totalDamage - damageDone;\r\n\r\n                alert(\r\n                  `${remainingDamage} left over. Choose who should receive it! (1 damage per click)`\r\n                );\r\n\r\n                // Define the function that will apply remaining damage\r\n                const applyRemainingDamage = () => {\r\n                  return new Promise((resolve, reject) => {\r\n                    $(\".card\").on(\"click\", (e) => {\r\n                      const targetCard = $(e.target)\r\n                        .closest(\".card\")\r\n                        .attr(\"id\");\r\n                      const targetRow = $(e.target).closest(\".row\").attr(\"id\");\r\n\r\n                      $(\".card\").off(\"click\");\r\n\r\n                      // Check target is valid\r\n                      if (\r\n                        targetRow[0] === \"p\" ||\r\n                        parseInt(targetRow[0]) === playerTurn\r\n                      ) {\r\n                        reject(\"Incorrect target row\");\r\n                        return;\r\n                      }\r\n\r\n                      applyDamage(1, targetCard, targetRow);\r\n                      resolve();\r\n                    });\r\n                  });\r\n                };\r\n\r\n                do {\r\n                  await applyRemainingDamage();\r\n                  remainingDamage--;\r\n                } while (remainingDamage > 0);\r\n              }\r\n\r\n              resolve();\r\n            });\r\n          });\r\n        },\r\n      },\r\n    },\r\n    mei: {\r\n      ability1: {\r\n        audioFile: \"mei-goticed\",\r\n      },\r\n      ability2: {\r\n        audioFile: \"mei-ult\",\r\n        synergyCost: 2,\r\n      },\r\n    },\r\n    mercy: {\r\n      ability1: {\r\n        audioFile: \"mercy-medicalemergency\",\r\n        run() {\r\n          // Wait for user click\r\n          return new Promise((resolve, reject) => {\r\n            // When a row is clicked\r\n            $(\".card\").on(\"click\", (e) => {\r\n              // Get target information & remove onclick\r\n              const targetCardId = $(e.target).closest(\".card\").attr(\"id\");\r\n              const targetRow = $(e.target).closest(\".row\").attr(\"id\");\r\n\r\n              console.log(targetRow);\r\n\r\n              // Remove click event from all cards\r\n              $(\".card\").off(\"click\");\r\n\r\n              // Check target is valid\r\n              if (\r\n                targetRow[0] === \"p\" ||\r\n                parseInt(targetRow[0]) !== playerTurn\r\n              ) {\r\n                reject(\"Incorrect target\");\r\n                return;\r\n              }\r\n\r\n              // Apply effect\r\n              // TODO: find way to decide between the two mercy ally effects - currently only healing effect is implemented\r\n              let effectId = \"mercyAllyEffect1\";\r\n\r\n              // Harmony orb applies healing immediately, as well as over time\r\n              if (effectId === \"mercyAllyEffect1\") {\r\n                const healingValue = 2;\r\n                applyHealing(healingValue, targetCardId);\r\n              }\r\n\r\n              // Set state\r\n              dispatch({\r\n                type: ACTIONS.ADD_CARD_EFFECT,\r\n                payload: {\r\n                  targetCardId: targetCardId,\r\n                  playerHeroId: `${playerTurn}mercy`,\r\n                  effectId: effectId,\r\n                },\r\n              });\r\n\r\n              resolve();\r\n            });\r\n          });\r\n        },\r\n      },\r\n      ability2: {\r\n        audioFile: \"mercy-ult\",\r\n        synergyCost: 3,\r\n        run() {\r\n          // Wait for user click\r\n          return new Promise((resolve, reject) => {\r\n            // When a row is clicked\r\n            $(\".card\").on(\"click\", (e) => {\r\n              // Get target information\r\n              const targetCardId = $(e.target).closest(\".card\").attr(\"id\");\r\n              const targetRowId = $(e.target).closest(\".row\").attr(\"id\");\r\n              const mercyStartIndex = $(`#${playerHeroId}`)\r\n                .closest(\"li\")\r\n                .index();\r\n              const targetCardIndex = $(`#${targetCardId}`)\r\n                .closest(\"li\")\r\n                .index();\r\n              const newRowPosition = targetRowId[1];\r\n\r\n              // Remove the onclick\r\n              $(\".card\").off(\"click\");\r\n\r\n              // Check target is valid\r\n              if (\r\n                targetRowId[0] === \"p\" ||\r\n                parseInt(targetRowId[0]) !== playerTurn\r\n              ) {\r\n                reject(\"Incorrect target\");\r\n                return;\r\n              }\r\n\r\n              // Set state\r\n              dispatch({\r\n                type: ACTIONS.MOVE_CARD,\r\n                payload: {\r\n                  targetCardId: `${playerHeroId}`,\r\n                  startRowId: rowId,\r\n                  finishRowId: targetRowId,\r\n                  startIndex: mercyStartIndex,\r\n                  finishIndex: targetCardIndex + 1,\r\n                },\r\n              });\r\n\r\n              if (\r\n                gameState.playerCards[`player${playerTurn}cards`].cards[\r\n                  targetCardId\r\n                ].health === 0\r\n              ) {\r\n                dispatch({\r\n                  type: ACTIONS.EDIT_CARD,\r\n                  payload: {\r\n                    playerNum: playerTurn,\r\n                    targetCardId: targetCardId,\r\n                    editKeys: [\"health\"],\r\n                    editValues: [\r\n                      gameState.playerCards[`player${playerTurn}cards`].cards[\r\n                        targetCardId\r\n                      ].maxHealth,\r\n                    ],\r\n                  },\r\n                });\r\n              }\r\n\r\n              resolve();\r\n            });\r\n          });\r\n        },\r\n      },\r\n      mercyAllyEffect1: {\r\n        run(cardId) {\r\n          const healingValue = 1;\r\n          applyHealing(healingValue, cardId);\r\n          return;\r\n        },\r\n      },\r\n    },\r\n    moira: {\r\n      ability1: {\r\n        audioFile: \"moira-grasp\",\r\n        run() {\r\n          // Carry out first stage of ability1 - i.e. damage or heal\r\n          return new Promise((resolve, reject) => {\r\n            $(\".card\").on(\"click\", async (e) => {\r\n              const targetCardId = $(e.target).closest(\".card\").attr(\"id\");\r\n              const targetCardIndex = $(e.target).closest(\"li\").index();\r\n              const enemyPlayer = parseInt(targetCardId[0]);\r\n              const targetCardRow = $(e.target).closest(\".row\").attr(\"id\");\r\n\r\n              $(\".card\").off(\"click\");\r\n\r\n              // Check target is valid\r\n              if (targetCardRow[0] === \"p\") {\r\n                reject(\"Incorrect target row\");\r\n                return;\r\n              }\r\n\r\n              let targetedPlayer;\r\n              // If targeting an ally apply heal, else apply damage\r\n              if (parseInt(targetCardRow[0]) === playerTurn) {\r\n                applyHealing(2, targetCardId);\r\n                targetedPlayer = \"ally\";\r\n              } else {\r\n                const damageValue = 2;\r\n                applyDamage(damageValue, targetCardId, targetCardRow, true);\r\n                targetedPlayer = \"enemy\";\r\n              }\r\n\r\n              // Carry out the second stage - i.e. damage or healing, whichever wasnt already done\r\n              function moiraAbility1Stage2() {\r\n                return new Promise((resolve, reject) => {\r\n                  $(\".card\").on(\"click\", (e) => {\r\n                    const targetCardId = $(e.target)\r\n                      .closest(\".card\")\r\n                      .attr(\"id\");\r\n                    const targetCardRow = $(e.target)\r\n                      .closest(\".row\")\r\n                      .attr(\"id\");\r\n\r\n                    $(\".card\").off(\"click\");\r\n\r\n                    // Check target is valid\r\n                    if (targetCardRow[0] === \"p\") {\r\n                      reject(\"Incorrect target row\");\r\n                      return;\r\n                    }\r\n\r\n                    if (targetedPlayer === \"ally\") {\r\n                      const damageValue = 2;\r\n                      applyDamage(\r\n                        damageValue,\r\n                        targetCardId,\r\n                        targetCardRow,\r\n                        true\r\n                      );\r\n                    } else {\r\n                      applyHealing(2, targetCardId);\r\n                    }\r\n\r\n                    resolve();\r\n                  });\r\n                });\r\n              }\r\n              await moiraAbility1Stage2();\r\n\r\n              resolve();\r\n            });\r\n          });\r\n        },\r\n      },\r\n      ability2: {\r\n        synergyCost: 3,\r\n        maxTargets: 6,\r\n        audioFile: \"moira-ult\",\r\n        run() {\r\n          return new Promise((resolve, reject) => {\r\n            $(\".card\").on(\"click\", async (e) => {\r\n              const targetCardId = $(e.target).closest(\".card\").attr(\"id\");\r\n              const targetCardRow = $(e.target).closest(\".row\").attr(\"id\");\r\n\r\n              $(\".card\").off(\"click\");\r\n\r\n              // Allow user to end the ability early by clicking on the ability-using-hero's card\r\n              if (targetCardId === `${currentHeroAbilityRef.current}`) {\r\n                alert(\"Ability stopped early\");\r\n                return;\r\n              }\r\n              // Check target is valid\r\n              if (targetCardRow[0] === \"p\") {\r\n                reject(\"Incorrect target row\");\r\n                return;\r\n              }\r\n\r\n              // If targeting an ally apply heal, else apply damage\r\n              if (parseInt(targetCardRow[0]) === playerTurn) {\r\n                applyHealing(2, targetCardId);\r\n              } else {\r\n                applyDamage(2, targetCardId, targetCardRow, true);\r\n              }\r\n\r\n              resolve();\r\n            });\r\n          });\r\n        },\r\n      },\r\n    },\r\n    orisa: {\r\n      ability1: {\r\n        audioFile: \"orisa-barrier\",\r\n      },\r\n      ability2: {\r\n        synergyCost: 3,\r\n        audioFile: \"orisa-ult\",\r\n      },\r\n    },\r\n    pharah: {\r\n      ability1: {\r\n        audioFile: \"pharah-clear\",\r\n        run() {\r\n          return new Promise((resolve, reject) => {\r\n            // When any card is clicked\r\n            $(\".card\").on(\"click\", (e) => {\r\n              // Get target info\r\n              const targetCardId = $(e.target).closest(\".card\").attr(\"id\");\r\n              const targetCardIndex = $(e.target).closest(\"li\").index();\r\n              const enemyPlayer = parseInt(targetCardId[0]);\r\n              const targetCardRow = $(e.target).closest(\".row\").attr(\"id\");\r\n\r\n              // Remove onclick from all cards\r\n              $(\".card\").off(\"click\");\r\n\r\n              // Check target is valid\r\n              if (\r\n                targetCardRow[0] === \"p\" ||\r\n                parseInt(targetCardRow[0]) === playerTurn\r\n              ) {\r\n                reject(\"Incorrect target row\");\r\n                return;\r\n\r\n                // Move target back a row if not already in last row\r\n              } else if (targetCardRow[1] !== \"b\") {\r\n                const newRowId = `${enemyPlayer}${\r\n                  targetCardRow[1] === \"f\" ? \"m\" : \"b\"\r\n                }`;\r\n\r\n                dispatch({\r\n                  type: ACTIONS.MOVE_CARD,\r\n                  payload: {\r\n                    targetCardId: targetCardId,\r\n                    startRowId: targetCardRow,\r\n                    finishRowId: newRowId,\r\n                    startIndex: targetCardIndex,\r\n                    finishIndex: 0,\r\n                  },\r\n                });\r\n              }\r\n\r\n              // Reduce synergy of target row\r\n              dispatch({\r\n                type: ACTIONS.UPDATE_SYNERGY,\r\n                payload: {\r\n                  rowId: targetCardRow,\r\n                  synergyCost: -2,\r\n                },\r\n              });\r\n\r\n              resolve();\r\n            });\r\n          });\r\n        },\r\n      },\r\n      ability2: {\r\n        maxTargets: 3,\r\n        synergyCost: 3,\r\n        audioFile: \"pharah-ult\",\r\n        run() {\r\n          // Wait for user input\r\n          return new Promise((resolve, reject) => {\r\n            // Specifically, wait for user to click on a card\r\n            $(\".card\").on(\"click\", (e) => {\r\n              // Get target info\r\n              const targetCardId = $(e.target).closest(\".card\").attr(\"id\");\r\n              const targetPlayerNum = parseInt(targetCardId[0]);\r\n              const targetRow = $(e.target).closest(\".row\").attr(\"id\");\r\n\r\n              // Remove onclick\r\n              $(\".card\").off(\"click\");\r\n\r\n              // Allow user to end the ability early by clicking on the ability-using-hero's card\r\n              if (targetCardId === `${currentHeroAbilityRef.current}`) {\r\n                alert(\"Ability stopped early\");\r\n                return;\r\n              }\r\n              // Check target is valid\r\n              if (\r\n                targetRow[0] === \"p\" ||\r\n                parseInt(targetRow[0]) === playerTurn\r\n              ) {\r\n                reject(\"Incorrect target\");\r\n                return;\r\n              }\r\n\r\n              // Apply damage to the target card (includes setting state)\r\n              const damageValue = 2;\r\n              applyDamage(damageValue, targetCardId, targetRow);\r\n\r\n              resolve();\r\n            });\r\n          });\r\n        },\r\n      },\r\n    },\r\n    reaper: {\r\n      ability1: {\r\n        audioFile: \"reaper-lastwords\",\r\n        maxTargets: 2,\r\n        run() {\r\n          return new Promise((resolve, reject) => {\r\n            $(\".card\").on(\"click\", (e) => {\r\n              // Get target info\r\n              const targetCardId = $(e.target).closest(\".card\").attr(\"id\");\r\n              const targetRow = $(e.target).closest(\".row\").attr(\"id\");\r\n\r\n              // Remove onclick\r\n              $(\".card\").off(\"click\");\r\n\r\n              // Allow user to end the ability early by clicking on the ability-using-hero's card\r\n              if (targetCardId === `${currentHeroAbilityRef.current}`) {\r\n                alert(\"Ability stopped early\");\r\n                return;\r\n              }\r\n              // Check target is valid\r\n              if (\r\n                targetRow[0] === \"p\" ||\r\n                parseInt(targetRow[0]) === playerTurn\r\n              ) {\r\n                reject(\"Incorrect target\");\r\n                return;\r\n              }\r\n\r\n              // Apply damage to the target card (includes setting state)\r\n              const damageValue = 1;\r\n              applyDamage(damageValue, targetCardId, targetRow);\r\n\r\n              resolve();\r\n            });\r\n          });\r\n        },\r\n      },\r\n      ability2: {\r\n        synergyCost: 3,\r\n        audioFile: \"reaper-ult\",\r\n        run() {\r\n          // Get target info\r\n          const rowPosition = rowId[1];\r\n          const enemyPlayer = playerTurn === 1 ? 2 : 1;\r\n          const enemyPlayerRowCardIds =\r\n            gameState.rows[`${enemyPlayer}${rowPosition}`].cardIds;\r\n\r\n          // Damage enemy cards\r\n          const damageValue = 3;\r\n          for (let cardId of enemyPlayerRowCardIds) {\r\n            applyDamage(damageValue, cardId, `${enemyPlayer}${rowPosition}`);\r\n          }\r\n\r\n          // After effects\r\n          // Discard card\r\n          dispatch({\r\n            type: ACTIONS.DISCARD_CARD,\r\n            payload: {\r\n              playerNum: playerTurn,\r\n              targetCardId: `${playerTurn}reaper`,\r\n              targetCardRow: rowId,\r\n            },\r\n          });\r\n        },\r\n      },\r\n    },\r\n    reinhardt: {\r\n      ability1: {\r\n        audioFile: \"reinhardt-barrier\",\r\n        run() {\r\n          // Apply shield to row\r\n          const shieldValue = 3;\r\n          dispatch({\r\n            type: ACTIONS.ADD_ROW_SHIELD,\r\n            payload: {\r\n              playerHeroId: playerHeroId,\r\n              targetRow: rowId,\r\n              rowShield: shieldValue,\r\n            },\r\n          });\r\n        },\r\n      },\r\n      ability2: {\r\n        synergyCost: 3,\r\n        audioFile: \"reinhardt-ult\",\r\n        maxTargets: 3,\r\n        run() {\r\n          // Wait for user input\r\n          return new Promise((resolve, reject) => {\r\n            // Specifically, wait for user to click on a card\r\n            $(\".card\").on(\"click\", (e) => {\r\n              // Get target info\r\n              const targetCardId = $(e.target).closest(\".card\").attr(\"id\");\r\n              const targetCardRow = $(e.target).closest(\".row\").attr(\"id\");\r\n\r\n              // Remove onclick\r\n              $(\".card\").off(\"click\");\r\n\r\n              // Allow user to end the ability early by clicking on the ability-using-hero's card\r\n              if (targetCardId === `${currentHeroAbilityRef.current}`) {\r\n                alert(\"Ability stopped early\");\r\n                return;\r\n              }\r\n              // Check target is valid\r\n              // TODO: check that target cards are actually in the same column\r\n              // TODO: currently just relying on user to choose correctly\r\n              if (\r\n                targetCardRow[0] === \"p\" ||\r\n                parseInt(targetCardRow[0]) === playerTurn\r\n              ) {\r\n                reject(\"Incorrect target\");\r\n                return;\r\n              }\r\n\r\n              // Apply damage to the target card (includes setting state)\r\n              const damageValue = 2;\r\n              applyDamage(damageValue, targetCardId, targetCardRow);\r\n\r\n              // Reduce synergy of target row\r\n              dispatch({\r\n                type: ACTIONS.UPDATE_SYNERGY,\r\n                payload: {\r\n                  rowId: targetCardRow,\r\n                  synergyCost: -1,\r\n                },\r\n              });\r\n\r\n              resolve();\r\n            });\r\n          });\r\n        },\r\n      },\r\n    },\r\n    roadhog: {\r\n      ability1: {\r\n        audioFile: \"roadhog-hook\",\r\n        run() {\r\n          return new Promise((resolve, reject) => {\r\n            $(\".card\").on(\"click\", (e) => {\r\n              // Get target info\r\n              const targetCardId = $(e.target).closest(\".card\").attr(\"id\");\r\n              const targetCardIndex = $(e.target).closest(\"li\").index();\r\n              const targetCardRow = $(e.target).closest(\".row\").attr(\"id\");\r\n              const enemyPlayer = parseInt(targetCardId[0]);\r\n\r\n              // Remove onclick from all cards\r\n              $(\".card\").off(\"click\");\r\n\r\n              // Check target is valid\r\n              if (\r\n                targetCardRow[0] === \"p\" ||\r\n                parseInt(targetCardRow[0]) === playerTurn\r\n              ) {\r\n                reject(\"Incorrect target row\");\r\n                return;\r\n              }\r\n\r\n              // Move target to front row\r\n              const newRowId = `${enemyPlayer}f`;\r\n              dispatch({\r\n                type: ACTIONS.MOVE_CARD,\r\n                payload: {\r\n                  targetCardId: targetCardId,\r\n                  startRowId: targetCardRow,\r\n                  finishRowId: newRowId,\r\n                  startIndex: targetCardIndex,\r\n                  finishIndex: 0,\r\n                },\r\n              });\r\n\r\n              // Apply damage to the target card (includes setting state)\r\n              const damageValue = 2;\r\n              applyDamage(damageValue, targetCardId, targetCardRow);\r\n\r\n              resolve();\r\n            });\r\n          });\r\n        },\r\n      },\r\n      ability2: {\r\n        audioFile: \"roadhog-hogwild\",\r\n        synergyCost: 3,\r\n        async run() {\r\n          // TODO\r\n          // Get target info\r\n          const enemyPlayer = playerTurn === 1 ? 2 : 1;\r\n\r\n          // Copy arrays of cards from state, assign id to the row for later reference\r\n          // We will manipulate the array, so we dont want a reference to the original array\r\n          const enemyBackRowCards = Array.from(\r\n            gameState.rows[`${enemyPlayer}b`].cardIds\r\n          );\r\n          enemyBackRowCards[\"id\"] = `${enemyPlayer}b`;\r\n          const enemyMiddleRowCards = Array.from(\r\n            gameState.rows[`${enemyPlayer}m`].cardIds\r\n          );\r\n          enemyMiddleRowCards[\"id\"] = `${enemyPlayer}m`;\r\n          const enemyFrontRowCards = Array.from(\r\n            gameState.rows[`${enemyPlayer}f`].cardIds\r\n          );\r\n          enemyFrontRowCards[\"id\"] = `${enemyPlayer}f`;\r\n\r\n          const enemyRows = [\r\n            enemyBackRowCards,\r\n            enemyMiddleRowCards,\r\n            enemyFrontRowCards,\r\n          ];\r\n\r\n          // Filter out heros at 0 health\r\n          for (let row of enemyRows) {\r\n            row.filter((cardId) => {\r\n              if (\r\n                gameState.playerCards[`player${enemyPlayer}cards`].cards[cardId]\r\n                  .health > 0\r\n              ) {\r\n                return cardId;\r\n              }\r\n              return null;\r\n            });\r\n          }\r\n\r\n          // Get total damage amount (2d6 = between 2 - 12)\r\n          const totalDamage = getRandInt(2, 13);\r\n          alert(`Wholehog rolled ${totalDamage} damage!`);\r\n\r\n          // Calculate damage per hero and apply\r\n          const totalEnemyCards =\r\n            enemyBackRowCards.length +\r\n            enemyMiddleRowCards.length +\r\n            enemyFrontRowCards.length;\r\n          const damageValue = Math.floor(totalDamage / totalEnemyCards);\r\n          let damageDone = 0;\r\n          if (damageValue > 0) {\r\n            for (let row of enemyRows) {\r\n              for (let cardId of row) {\r\n                applyDamage(damageValue, cardId, row.id);\r\n                damageDone += damageValue;\r\n              }\r\n            }\r\n          }\r\n\r\n          // Calculate damage that cant be evenly spread among all enemy heroes\r\n          let remainingDamage = totalDamage - damageDone;\r\n\r\n          // Allow user to spread remaining damage\r\n          if (remainingDamage > 0) {\r\n            alert(\r\n              `${remainingDamage} left over. Choose who should receive it! (1 damage per click)`\r\n            );\r\n\r\n            // Define the function that will apply remaining damage\r\n            const applyRemainingDamage = () => {\r\n              return new Promise((resolve, reject) => {\r\n                $(\".card\").on(\"click\", (e) => {\r\n                  const targetCard = $(e.target).closest(\".card\").attr(\"id\");\r\n                  const targetRow = $(e.target).closest(\".row\").attr(\"id\");\r\n\r\n                  $(\".card\").off(\"click\");\r\n\r\n                  // Check target is valid\r\n                  if (\r\n                    targetRow[0] === \"p\" ||\r\n                    parseInt(targetRow[0]) === playerTurn\r\n                  ) {\r\n                    reject(\"Incorrect target row\");\r\n                    return;\r\n                  }\r\n\r\n                  applyDamage(1, targetCard, targetRow);\r\n                  resolve();\r\n                });\r\n              });\r\n            };\r\n\r\n            do {\r\n              await applyRemainingDamage();\r\n              remainingDamage--;\r\n            } while (remainingDamage > 0);\r\n          }\r\n        },\r\n      },\r\n    },\r\n    sigma: {\r\n      ability1: {\r\n        audioFile: \"sigma-barrier\",\r\n        run() {\r\n          // Wait for user click\r\n          return new Promise((resolve, reject) => {\r\n            // When a row is clicked\r\n            $(\".row\").on(\"click\", (e) => {\r\n              // Get target information\r\n              const targetRow = $(e.target).closest(\".row\").attr(\"id\");\r\n\r\n              // Remove the onclick\r\n              $(\".row\").off(\"click\");\r\n\r\n              // Check target is valid\r\n              if (\r\n                targetRow[0] === \"p\" ||\r\n                parseInt(targetRow[0]) !== playerTurn\r\n              ) {\r\n                reject(\"Incorrect target\");\r\n                return;\r\n              }\r\n\r\n              // Apply effect\r\n              const shieldValue = 3;\r\n              dispatch({\r\n                type: ACTIONS.ADD_ROW_SHIELD,\r\n                payload: {\r\n                  playerHeroId: playerHeroId,\r\n                  targetRow: targetRow,\r\n                  rowShield: shieldValue,\r\n                },\r\n              });\r\n\r\n              resolve();\r\n            });\r\n          });\r\n        },\r\n      },\r\n      ability2: {\r\n        synergyCost: 3,\r\n        audioFile: \"sigma-ult\",\r\n        run() {\r\n          return new Promise((resolve, reject) => {\r\n            $(\".row\").on(\"click\", (e) => {\r\n              const targetRow = $(e.target).closest(\".row\").attr(\"id\");\r\n\r\n              $(\".row\").off(\"click\");\r\n\r\n              // Check target is valid\r\n              if (\r\n                targetRow[0] === \"p\" ||\r\n                parseInt(targetRow[0]) === playerTurn\r\n              ) {\r\n                reject(\"Incorrect target row\");\r\n                return;\r\n              }\r\n\r\n              // Reduce synergy of target row to 0\r\n              dispatch({\r\n                type: ACTIONS.SET_SYNERGY,\r\n                payload: {\r\n                  rowId: targetRow,\r\n                  newSynergyVal: 0,\r\n                },\r\n              });\r\n\r\n              // Get all cards in the target row\r\n              const targetRowCardIds = $.map(\r\n                $(`#${targetRow} .card`),\r\n                function (card) {\r\n                  return card.id;\r\n                }\r\n              );\r\n\r\n              // Apply damange\r\n              const damageValue = 1;\r\n              targetRowCardIds.forEach((cardId) => {\r\n                applyDamage(damageValue, cardId, targetRow);\r\n              });\r\n\r\n              resolve();\r\n            });\r\n          });\r\n        },\r\n      },\r\n    },\r\n    soldier: {\r\n      id: \"soldier\",\r\n      ability1: {\r\n        audioFile: \"soldier-teamheal\",\r\n        run() {\r\n          // Get target info\r\n          const playerRowCardIds = gameState.rows[rowId].cardIds;\r\n\r\n          // Damage enemy cards\r\n          const healValue = 1;\r\n          for (let cardId of playerRowCardIds) {\r\n            applyHealing(healValue, cardId);\r\n          }\r\n        },\r\n      },\r\n      ability2: {\r\n        audioFile: \"soldier-ult\",\r\n        maxTargets: 3,\r\n        synergyCost: 3,\r\n        run() {\r\n          // Wait for user input\r\n          return new Promise((resolve, reject) => {\r\n            // Specifically, wait for user to click on a card\r\n            $(\".card\").on(\"click\", (e) => {\r\n              // Get target info\r\n              const targetCardId = $(e.target).closest(\".card\").attr(\"id\");\r\n              const targetRow = $(e.target).closest(\".row\").attr(\"id\");\r\n\r\n              // Remove onclick\r\n              $(\".card\").off(\"click\");\r\n\r\n              // Allow user to end the ability early by clicking on the ability-using-hero's card\r\n              if (targetCardId === `${currentHeroAbilityRef.current}`) {\r\n                alert(\"Ability stopped early\");\r\n                return;\r\n                // Check target is valid\r\n              } else if (\r\n                targetRow[0] === \"p\" ||\r\n                parseInt(targetRow[0]) === playerTurn\r\n              ) {\r\n                reject(\"Incorrect target\");\r\n                return;\r\n              }\r\n\r\n              // Apply damage to the target card\r\n              // Decrease damage with each successive hit by using a ref\r\n              const damageValue = 3 - enemiesHitByAbility.current;\r\n              applyDamage(damageValue, targetCardId, targetRow);\r\n              enemiesHitByAbility.current += 1;\r\n\r\n              resolve();\r\n            });\r\n          });\r\n        },\r\n      },\r\n    },\r\n    sombra: {\r\n      ability1: {\r\n        audioFile: \"sombra-hack\",\r\n      },\r\n      ability2: {\r\n        synergyCost: 3,\r\n        audioFile: \"sombra-ult\",\r\n      },\r\n    },\r\n    symmetra: {\r\n      ability1: {\r\n        audioFile: \"symmetra-teleporter\",\r\n        run() {\r\n          return new Promise((resolve, reject) => {\r\n            $(\".card\").on(\"click\", (e) => {\r\n              // Get target info\r\n              const teleportCardId = $(e.target).closest(\".card\").attr(\"id\");\r\n              const teleportCardIndex = $(e.target).closest(\"li\").index();\r\n              const teleportCardRow = $(e.target).closest(\".row\").attr(\"id\");\r\n\r\n              // Remove onclick from all cards\r\n              $(\".card\").off(\"click\");\r\n\r\n              // Check target is valid\r\n              if (\r\n                teleportCardRow[0] === \"p\" ||\r\n                parseInt(teleportCardRow[0]) !== playerTurn\r\n              ) {\r\n                reject(\"Incorrect target row\");\r\n                return;\r\n              }\r\n\r\n              // Check if target effect is applied to any row, if so remove effect\r\n              for (let key in gameState.rows) {\r\n                if (key[0] !== \"p\") {\r\n                  const targetPlayer = parseInt(key[0]);\r\n\r\n                  console.log(`key is ${key}`);\r\n                  console.log(JSON.stringify(gameState.rows[key]));\r\n\r\n                  for (let effect of gameState.rows[key].allyEffects) {\r\n                    if (effect.playerHeroId === teleportCardId) {\r\n                      const newRow = gameState.rows[key].allyEffects.filter(\r\n                        (effect) => effect.playerHeroId !== teleportCardId\r\n                      );\r\n                      dispatch({\r\n                        type: ACTIONS.EDIT_ROW,\r\n                        payload: {\r\n                          targetRow: key,\r\n                          editKeys: [\"allyEffects\"],\r\n                          editValues: [newRow],\r\n                        },\r\n                      });\r\n                    }\r\n                  }\r\n\r\n                  for (let effect of gameState.rows[key].enemyEffects) {\r\n                    if (effect.playerHeroId === teleportCardId) {\r\n                      const newRow = gameState.rows[key].enemyEffects.filter(\r\n                        (effect) => effect.playerHeroId !== teleportCardId\r\n                      );\r\n                      dispatch({\r\n                        type: ACTIONS.EDIT_ROW,\r\n                        payload: {\r\n                          targetRow: key,\r\n                          editKeys: [\"enemyEffects\"],\r\n                          editValues: [newRow],\r\n                        },\r\n                      });\r\n                    }\r\n                  }\r\n\r\n                  // Check if target's effect is applied to any card, if so remove\r\n                  for (let cardId of gameState.rows[key].cardIds) {\r\n                    for (let effect of gameState.playerCards[\r\n                      `player${targetPlayer}cards`\r\n                    ].cards[cardId].allyEffects) {\r\n                      if (effect.playerHeroId === teleportCardId) {\r\n                        const newEffects = gameState.playerCards[\r\n                          `player${targetPlayer}cards`\r\n                        ].cards[cardId].allyEffects.filter(\r\n                          (effect) => effect.playerHeroId !== teleportCardId\r\n                        );\r\n                        dispatch({\r\n                          type: ACTIONS.EDIT_CARD,\r\n                          payload: {\r\n                            playerNum: targetPlayer,\r\n                            targetCardId: cardId,\r\n                            editKeys: [\"allyEffects\"],\r\n                            editValues: [newEffects],\r\n                          },\r\n                        });\r\n                      }\r\n                    }\r\n\r\n                    for (let effect of gameState.playerCards[\r\n                      `player${targetPlayer}cards`\r\n                    ].cards[cardId].enemyEffects) {\r\n                      if (effect.playerHeroId === teleportCardId) {\r\n                        const newEffects = gameState.playerCards[\r\n                          `player${targetPlayer}cards`\r\n                        ].cards[cardId].enemyEffects.filter(\r\n                          (effect) => effect.playerHeroId !== teleportCardId\r\n                        );\r\n                        dispatch({\r\n                          type: ACTIONS.EDIT_CARD,\r\n                          payload: {\r\n                            playerNum: targetPlayer,\r\n                            targetCardId: cardId,\r\n                            editKeys: [\"enemyEffects\"],\r\n                            editValues: [newEffects],\r\n                          },\r\n                        });\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n\r\n              // Move target to playerhand\r\n              const newRowId = `player${playerTurn}hand`;\r\n              dispatch({\r\n                type: ACTIONS.MOVE_CARD,\r\n                payload: {\r\n                  targetCardId: teleportCardId,\r\n                  startRowId: teleportCardRow,\r\n                  finishRowId: newRowId,\r\n                  startIndex: teleportCardIndex,\r\n                  finishIndex: 0,\r\n                },\r\n              });\r\n\r\n              // Set card to not played\r\n              /* \r\n              Do not reset the card's synergy, despite what it says on the card\r\n              Symmetra's teleporter ability as written on the card is very simple\r\n              Keeping the teleported card's synergy in the row, and not resetting the card's synergy,\r\n              adds a bit more complexity and strategy to how this ability is used\r\n              */\r\n              dispatch({\r\n                type: ACTIONS.EDIT_CARD,\r\n                payload: {\r\n                  playerNum: playerTurn,\r\n                  targetCardId: teleportCardId,\r\n                  editKeys: [\r\n                    \"isPlayed\",\r\n                    \"allyEffects\",\r\n                    \"enemyEffects\",\r\n                    \"shield\",\r\n                  ],\r\n                  editValues: [false, [], [], 0],\r\n                },\r\n              });\r\n\r\n              // Reduce number of cards played by player\r\n              dispatch({\r\n                type: ACTIONS.UPDATE_ROW,\r\n                payload: {\r\n                  targetRow: `player${playerTurn}hand`,\r\n                  updateKeys: [\"cardsPlayed\"],\r\n                  updateValues: [-1],\r\n                },\r\n              });\r\n\r\n              resolve();\r\n            });\r\n          });\r\n        },\r\n      },\r\n      ability2: {\r\n        audioFile: \"symmetra-shield\",\r\n        synergyCost: 3,\r\n        run() {\r\n          const playerBackRowCardIds = gameState.rows[`${playerTurn}b`].cardIds;\r\n          const playerMiddleRowCardIds =\r\n            gameState.rows[`${playerTurn}m`].cardIds;\r\n          const playerFrontRowCardIds =\r\n            gameState.rows[`${playerTurn}f`].cardIds;\r\n\r\n          const playerCards = [\r\n            playerBackRowCardIds,\r\n            playerMiddleRowCardIds,\r\n            playerFrontRowCardIds,\r\n          ];\r\n\r\n          // Add shield to all ally cards\r\n          for (let row of playerCards) {\r\n            for (let cardId of row) {\r\n              const newShield = 1;\r\n              dispatch({\r\n                type: ACTIONS.UPDATE_CARD,\r\n                payload: {\r\n                  playerNum: playerTurn,\r\n                  cardId: cardId,\r\n                  updateKeys: [\"shield\"],\r\n                  updateValues: [newShield],\r\n                },\r\n              });\r\n            }\r\n          }\r\n        },\r\n      },\r\n    },\r\n    torbjorn: {\r\n      ability1: {\r\n        audioFile: \"torbjorn-turret\",\r\n        run() {\r\n          // Wait for user click\r\n          return new Promise((resolve, reject) => {\r\n            // When a row is clicked\r\n            $(\".row\").on(\"click\", (e) => {\r\n              // Get target information & remove onclick\r\n              const targetRow = $(e.target).closest(\".row\").attr(\"id\");\r\n              $(\".row\").off(\"click\");\r\n\r\n              // Check target is valid\r\n              if (\r\n                targetRow[0] === \"p\" ||\r\n                parseInt(targetRow[0]) === playerTurn\r\n              ) {\r\n                reject(\"Incorrect target\");\r\n                return;\r\n              }\r\n\r\n              // Apply effect\r\n              const effectId = \"torbjornEnemyEffect\";\r\n              const heroId = \"torbjorn\";\r\n              dispatch({\r\n                type: ACTIONS.ADD_ROW_EFFECT,\r\n                payload: {\r\n                  targetRow: targetRow,\r\n                  playerHeroId: `${playerTurn}${heroId}`,\r\n                  effectId: effectId,\r\n                },\r\n              });\r\n\r\n              resolve();\r\n            });\r\n          });\r\n        },\r\n      },\r\n      ability2: {\r\n        audioFile: \"torbjorn-ult\",\r\n        synergyCost: 3,\r\n        run() {\r\n          const newTurretDamage = 2;\r\n          const playerHeroId = `${playerTurn}torbjorn`;\r\n\r\n          dispatch({\r\n            type: ACTIONS.EDIT_CARD,\r\n            payload: {\r\n              playerNum: playerTurn,\r\n              targetCardId: playerHeroId,\r\n              editKeys: [\"effects.torbjornEnemyEffect.value\"],\r\n              editValues: [newTurretDamage],\r\n            },\r\n          });\r\n        },\r\n      },\r\n      torbjornEnemyEffect: {\r\n        run(rowId) {\r\n          // Get enemies in target row\r\n          const targetPlayer = parseInt(rowId[0]);\r\n          const torbPlayer = targetPlayer === 1 ? 2 : 1;\r\n          const rowEnemies = gameState.rows[rowId].cardIds.filter((cardId) => {\r\n            if (\r\n              gameState.playerCards[`player${targetPlayer}cards`].cards[cardId]\r\n                .health > 0\r\n            ) {\r\n              return cardId;\r\n            } else return null;\r\n          });\r\n\r\n          const turretDamage =\r\n            gameState.playerCards[`player${torbPlayer}cards`].cards[\r\n              `${torbPlayer}torbjorn`\r\n            ].effects.torbjornEnemyEffect.value;\r\n          const maxTargets = 2;\r\n\r\n          // If there are no enemies in the target row, do nothing\r\n          if (rowEnemies.length === 0) {\r\n            return;\r\n\r\n            // If there is just one enemy, attach that enemy once\r\n          } else if (rowEnemies.length === 1) {\r\n            applyDamage(turretDamage, rowEnemies[0], rowId);\r\n\r\n            // If there are several enemies, attack two at random\r\n          } else if (rowEnemies.length >= 2) {\r\n            const attackedEnemies = [];\r\n\r\n            for (let i = 0; i < maxTargets; i++) {\r\n              let target;\r\n              do {\r\n                target = getRandInt(0, rowEnemies.length);\r\n              } while (attackedEnemies.includes(target));\r\n              console.log(`target is ${target}`);\r\n              applyDamage(turretDamage, rowEnemies[target], rowId);\r\n              attackedEnemies.push(target);\r\n            }\r\n          }\r\n        },\r\n      },\r\n    },\r\n    tracer: {\r\n      ability1: {\r\n        audioFile: \"tracer-smarts\",\r\n        maxTargets: 2,\r\n        run() {\r\n          return new Promise((resolve, reject) => {\r\n            $(\".card\").on(\"click\", (e) => {\r\n              // Get target info\r\n              const targetCardId = $(e.target).closest(\".card\").attr(\"id\");\r\n              const targetRow = $(e.target).closest(\".row\").attr(\"id\");\r\n\r\n              // Remove onclick\r\n              $(\".card\").off(\"click\");\r\n\r\n              // Allow user to end the ability early by clicking on the ability-using-hero's card\r\n              if (targetCardId === `${currentHeroAbilityRef.current}`) {\r\n                alert(\"Ability stopped early\");\r\n                return;\r\n              }\r\n              // Check target is valid\r\n              if (\r\n                targetRow[0] === \"p\" ||\r\n                parseInt(targetRow[0]) === playerTurn\r\n              ) {\r\n                reject(\"Incorrect target\");\r\n                return;\r\n              }\r\n\r\n              // Apply damage to the target card (includes setting state)\r\n              const damageValue = 1;\r\n              applyDamage(damageValue, targetCardId, targetRow);\r\n\r\n              resolve();\r\n            });\r\n          });\r\n        },\r\n      },\r\n      ability2: {\r\n        audioFile: \"tracer-imback\",\r\n        synergyCost: 2,\r\n        run() {\r\n          const targetCardId = playerHeroId;\r\n          const targetCardIndex = $(`#${targetCardId}`).closest(\"li\").index();\r\n\r\n          // Remove all counters from tracer\r\n          dispatch({\r\n            type: ACTIONS.EDIT_CARD,\r\n            payload: {\r\n              playerNum: playerTurn,\r\n              targetCardId: targetCardId,\r\n              editKeys: [\"allyEffects\", \"enemyEffects\", \"shield\", \"isPlayed\"],\r\n              editValues: [[], [], 0, false],\r\n            },\r\n          });\r\n\r\n          // Return tracer to player hand\r\n          dispatch({\r\n            type: ACTIONS.MOVE_CARD,\r\n            payload: {\r\n              targetCardId: targetCardId,\r\n              startRowId: rowId,\r\n              startIndex: targetCardIndex,\r\n              finishRowId: `player${playerTurn}hand`,\r\n              finishIndex: 0,\r\n            },\r\n          });\r\n\r\n          // Reduce number of cards played by player\r\n          dispatch({\r\n            type: ACTIONS.UPDATE_ROW,\r\n            payload: {\r\n              targetRow: `player${playerTurn}hand`,\r\n              updateKeys: [\"cardsPlayed\"],\r\n              updateValues: [-1],\r\n            },\r\n          });\r\n        },\r\n      },\r\n    },\r\n    widowmaker: {\r\n      ability1: {\r\n        audioFile: \"widowmaker-noonecanhide-fr\",\r\n        run() {\r\n          // Wait for user click\r\n          return new Promise((resolve, reject) => {\r\n            // When a row is clicked\r\n            $(\".row\").on(\"click\", (e) => {\r\n              // Get target information\r\n              const targetRow = $(e.target).closest(\".row\").attr(\"id\");\r\n\r\n              // Remove the onclick\r\n              $(\".row\").off(\"click\");\r\n\r\n              // Check target is valid\r\n              if (\r\n                targetRow[0] === \"p\" ||\r\n                parseInt(targetRow[0]) === playerTurn\r\n              ) {\r\n                reject(\"Incorrect target\");\r\n                return;\r\n              }\r\n\r\n              // Effect id\r\n              const effectId = \"widowmakerEnemyEffect\";\r\n              // Apply effect\r\n              dispatch({\r\n                type: ACTIONS.ADD_ROW_EFFECT,\r\n                payload: {\r\n                  targetRow: targetRow,\r\n                  playerHeroId: `${playerTurn}widowmaker`,\r\n                  effectId: effectId,\r\n                },\r\n              });\r\n\r\n              resolve();\r\n            });\r\n          });\r\n        },\r\n      },\r\n      ability2: {\r\n        synergyCost: 3,\r\n        audioFile: \"widowmaker-oneshot\",\r\n        run() {\r\n          // Wait for user click\r\n          return new Promise((resolve, reject) => {\r\n            // When card is chosen as target by being clicked on\r\n            $(\".card\").on(\"click\", (e) => {\r\n              // Get target information\r\n              const targetCardId = $(e.target).closest(\".card\").attr(\"id\");\r\n              const enemyPlayer = parseInt(targetCardId[0]);\r\n              const targetRow = $(e.target).closest(\".row\").attr(\"id\");\r\n\r\n              // Remove onclick event\r\n              $(\".card\").off(\"click\");\r\n\r\n              // Check valid target\r\n              if (\r\n                targetRow[0] === \"p\" ||\r\n                parseInt(targetRow[0]) === playerTurn\r\n              ) {\r\n                reject(\"Incorrect target row\");\r\n                return;\r\n              }\r\n\r\n              // Apply abilities that affect a specific card\r\n              dispatch({\r\n                type: ACTIONS.EDIT_CARD,\r\n                payload: {\r\n                  playerNum: enemyPlayer,\r\n                  targetCardId: targetCardId,\r\n                  editKeys: [\"health\"],\r\n                  editValues: [0],\r\n                },\r\n              });\r\n\r\n              resolve();\r\n            });\r\n          });\r\n        },\r\n      },\r\n    },\r\n    winston: {\r\n      ability1: {\r\n        audioFile: \"winston-barrier\",\r\n        run() {\r\n          // Apply shield to row\r\n          const shieldValue = 3;\r\n          dispatch({\r\n            type: ACTIONS.ADD_ROW_SHIELD,\r\n            payload: {\r\n              playerHeroId: playerHeroId,\r\n              targetRow: rowId,\r\n              rowShield: shieldValue,\r\n            },\r\n          });\r\n        },\r\n      },\r\n      ability2: {\r\n        /*\r\n        Winston's ult is the same as junkrat - to differentiate and\r\n        add more flavor, winston could jump twice instead of once, \r\n        doing 1 damage each time. Perhaps prevent jumping in the same row\r\n        so Winston cant do two damage to one row?\r\n        */\r\n        audioFile: \"winston-angry\",\r\n        synergyCost: 3,\r\n        run() {\r\n          return new Promise((resolve, reject) => {\r\n            $(\".row\").on(\"click\", (e) => {\r\n              const targetRowId = $(e.target).closest(\".row\").attr(\"id\");\r\n              const winstonStartIndex = $(`#${playerHeroId}`)\r\n                .closest(\"li\")\r\n                .index();\r\n              const newRowPosition = targetRowId[1];\r\n\r\n              $(\".row\").off(\"click\");\r\n\r\n              // Check target is valid\r\n              if (targetRowId[0] === \"p\") {\r\n                reject(\"Incorrect target row\");\r\n                return;\r\n              }\r\n\r\n              // Set state\r\n              dispatch({\r\n                type: ACTIONS.MOVE_CARD,\r\n                payload: {\r\n                  targetCardId: `${playerHeroId}`,\r\n                  startRowId: rowId,\r\n                  finishRowId: targetRowId,\r\n                  startIndex: winstonStartIndex,\r\n                  finishIndex: 0,\r\n                },\r\n              });\r\n\r\n              // Get all cards in the target row\r\n              const targetRowCardIds = $.map(\r\n                $(`#${enemyPlayerNum}${newRowPosition} .card`),\r\n                (card) => {\r\n                  return card.id;\r\n                }\r\n              );\r\n\r\n              // Apply damange\r\n              const damageValue = 2;\r\n              targetRowCardIds.forEach((cardId) => {\r\n                applyDamage(damageValue, cardId, targetRowId);\r\n              });\r\n\r\n              resolve();\r\n            });\r\n          });\r\n        },\r\n      },\r\n    },\r\n    wreckingball: {\r\n      ability1: {\r\n        audioFile: \"wreckingball-shields\",\r\n        run() {\r\n          // Get number of enemies in opposite row\r\n          const oppositeRowEnemies =\r\n            gameState.rows[`${enemyPlayerNum}${rowId[1]}`].cardIds;\r\n          const newShield = 1 + oppositeRowEnemies.length;\r\n          dispatch({\r\n            type: ACTIONS.UPDATE_CARD,\r\n            payload: {\r\n              playerNum: playerTurn,\r\n              cardId: `${playerTurn}wreckingball`,\r\n              updateKeys: [\"shield\"],\r\n              updateValues: [newShield],\r\n            },\r\n          });\r\n        },\r\n      },\r\n      ability2: {\r\n        audioFile: \"wreckingball-ult\",\r\n      },\r\n    },\r\n    zarya: {\r\n      ability1: {\r\n        audioFile: \"zarya-barrier\",\r\n        run() {\r\n          // Wait for user click\r\n          return new Promise((resolve, reject) => {\r\n            // When a row is clicked\r\n            $(\".card\").on(\"click\", (e) => {\r\n              // Get target information\r\n              const targetCard = $(e.target).closest(\".card\").attr(\"id\");\r\n              const targetRow = $(e.target).closest(\".row\").attr(\"id\");\r\n\r\n              // Remove the onclick\r\n              $(\".card\").off(\"click\");\r\n\r\n              // Check target is valid\r\n              if (\r\n                targetRow[0] === \"p\" ||\r\n                parseInt(targetRow[0]) !== playerTurn\r\n              ) {\r\n                reject(\"Incorrect target\");\r\n                return;\r\n              }\r\n\r\n              // Apply effect\r\n              const shieldValue = 3;\r\n              dispatch({\r\n                type: ACTIONS.UPDATE_CARD,\r\n                payload: {\r\n                  playerNum: playerTurn,\r\n                  cardId: targetCard,\r\n                  updateKeys: [\"shield\"],\r\n                  updateValues: [shieldValue],\r\n                },\r\n              });\r\n\r\n              // Keep track of how much shield remaining for Zarya's ultimate\r\n              // TODO: zarya tracks how much shield is given, but currently doesnt know when her shield has been damaged\r\n              dispatch({\r\n                type: ACTIONS.UPDATE_CARD,\r\n                payload: {\r\n                  playerNum: playerTurn,\r\n                  cardId: playerHeroId,\r\n                  updateKeys: [\"zaryaShieldRemaining\"],\r\n                  updateValues: [shieldValue],\r\n                },\r\n              });\r\n\r\n              resolve();\r\n            });\r\n          });\r\n        },\r\n      },\r\n      ability2: {\r\n        audioFile: \"zarya-ult\",\r\n        synergyCost: 3,\r\n      },\r\n    },\r\n    zenyatta: {\r\n      ability1: {\r\n        audioFile: \"zenyatta-harmony\",\r\n        run() {\r\n          // Wait for user click\r\n          return new Promise((resolve, reject) => {\r\n            // When a row is clicked\r\n            $(\".card\").on(\"click\", (e) => {\r\n              // Get target information & remove onclick\r\n              const targetCardId = $(e.target).closest(\".card\").attr(\"id\");\r\n              $(\".card\").off(\"click\");\r\n              const targetRow = $(e.target).closest(\".row\").attr(\"id\");\r\n              const targetPlayer = parseInt(targetCardId[0]);\r\n\r\n              // Check target is valid\r\n              if (targetRow[0] === \"p\") {\r\n                reject(\"Incorrect target\");\r\n                return;\r\n              }\r\n\r\n              // Apply ally/enemy effect depending on which card was clicked\r\n              let effectId;\r\n              targetPlayer === playerTurn\r\n                ? (effectId = \"zenyattaAllyEffect\")\r\n                : (effectId = \"zenyattaEnemyEffect\");\r\n\r\n              // Harmony orb applies healing immediately, as well as over time\r\n              if (effectId === \"zenyattaAllyEffect\") {\r\n                const healingValue = 1;\r\n                applyHealing(healingValue, targetCardId);\r\n              }\r\n\r\n              // Set state\r\n              dispatch({\r\n                type: ACTIONS.ADD_CARD_EFFECT,\r\n                payload: {\r\n                  targetCardId: targetCardId,\r\n                  playerHeroId: `${playerTurn}zenyatta`,\r\n                  effectId: effectId,\r\n                },\r\n              });\r\n\r\n              resolve();\r\n            });\r\n          });\r\n        },\r\n      },\r\n      ability2: {\r\n        synergyCost: 3,\r\n        audioFile: \"zenyatta-ult\",\r\n        run() {},\r\n      },\r\n      zenyattaAllyEffect: {\r\n        run(cardId) {\r\n          const healingValue = 1;\r\n\r\n          applyHealing(healingValue, cardId);\r\n\r\n          return;\r\n        },\r\n      },\r\n    },\r\n  };\r\n\r\n  // Handle the calling of hero abilites, including checking the ability call is valid\r\n  async function activateAbility1(e) {\r\n    e.stopPropagation();\r\n\r\n    // keep track of which hero is currently using their ability\r\n    currentHeroAbilityRef.current = playerHeroId;\r\n\r\n    unsetCardFocus();\r\n\r\n    // TODO: Check any effects that trigger on ability usage\r\n\r\n    // Check that the card is not in the player's hand\r\n    if (rowId[0] !== \"p\") {\r\n      // Call the relevant hero's ability\r\n      try {\r\n        // Play ability audio if exists\r\n        if (\"audioFile\" in abilities[heroId].ability1 && playAudio === true) {\r\n          const audioFile = abilities[heroId].ability1.audioFile;\r\n          const ability1audio = new Audio(\r\n            require(`assets/audio/${audioFile}.mp3`).default\r\n          );\r\n          ability1audio.play();\r\n        }\r\n\r\n        // Allow the ability to be triggered more than once if relevant\r\n        const maxTargets = abilities[heroId].ability1.maxTargets;\r\n        let i = 0;\r\n        do {\r\n          await abilities[heroId].ability1.run();\r\n          unsetCardFocus();\r\n          i++;\r\n        } while (\"maxTargets\" in abilities[heroId].ability1 && i < maxTargets);\r\n\r\n        // Set ability as used\r\n        dispatch({\r\n          type: ACTIONS.EDIT_CARD,\r\n          payload: {\r\n            playerNum: playerTurn,\r\n            targetCardId: playerHeroId,\r\n            editKeys: [\"ability1Used\"],\r\n            editValues: [true],\r\n          },\r\n        });\r\n      } catch (err) {\r\n        alert(err);\r\n      }\r\n    } else alert(\"Play cards before using abilities!\");\r\n  }\r\n\r\n  async function activateAbility2(e) {\r\n    e.stopPropagation();\r\n\r\n    // keep track of which hero is currently using their ability\r\n    currentHeroAbilityRef.current = playerHeroId;\r\n\r\n    // Get synergy values\r\n    const synergyCost = abilities[heroId].ability2.synergyCost;\r\n    const rowSynergy = gameState.rows[rowId].synergy;\r\n    unsetCardFocus();\r\n\r\n    // TODO: Check any effects that trigger on ability usage\r\n\r\n    // Check that the card is not in the player's hand\r\n    if (rowId[0] !== \"p\") {\r\n      // Check there is sufficient synergy to use the ability\r\n      if (rowSynergy >= synergyCost) {\r\n        // Call the relevant hero's ability and deduct synergy\r\n        try {\r\n          // Play ability audio if exists\r\n          if (\"audioFile\" in abilities[heroId].ability2 && playAudio === true) {\r\n            const audioFile = abilities[heroId].ability2.audioFile;\r\n            const ability2audio = new Audio(\r\n              require(`assets/audio/${audioFile}.mp3`).default\r\n            );\r\n            ability2audio.play();\r\n          }\r\n\r\n          // Allow multiple targets if applicable\r\n          const maxTargets = abilities[heroId].ability2.maxTargets;\r\n          let i = 0;\r\n          do {\r\n            await abilities[heroId].ability2.run();\r\n            i++;\r\n          } while (\r\n            \"maxTargets\" in abilities[heroId].ability2 &&\r\n            i < maxTargets\r\n          );\r\n\r\n          // Record which ult was used for Echo's ability2\r\n          // TODO: delete localstore on unmount?\r\n          if (heroId !== \"echo\") localStorage.setItem(\"echoUltHeroId\", heroId);\r\n\r\n          // Subtract ability synergy cost from row synergy\r\n          // Make synergy negative so that the cost is subtracted, not added\r\n          dispatch({\r\n            type: ACTIONS.UPDATE_SYNERGY,\r\n            payload: {\r\n              rowId: rowId,\r\n              synergyCost: Math.abs(synergyCost) * -1,\r\n            },\r\n          });\r\n\r\n          // Set ability as used\r\n          dispatch({\r\n            type: ACTIONS.EDIT_CARD,\r\n            payload: {\r\n              playerNum: playerTurn,\r\n              targetCardId: playerHeroId,\r\n              editKeys: [\"ability2Used\"],\r\n              editValues: [true],\r\n            },\r\n          });\r\n        } catch (err) {\r\n          alert(err);\r\n        }\r\n      } else alert(\"Insufficient synergy!\");\r\n    } else alert(\"Play cards before using abilities!\");\r\n  }\r\n\r\n  // Apply card effects every turn\r\n  useEffect(() => {\r\n    // Check the turn count has increased - ensures effects only trigger once per turn\r\n    if (turnState.turnCount > turnRef.current.turnCount) {\r\n      // Identify player row ids\r\n      const playerTurn = turnState.playerTurn;\r\n      const playerRowIds = [\r\n        `${playerTurn}b`,\r\n        `${playerTurn}m`,\r\n        `${playerTurn}f`,\r\n      ];\r\n\r\n      // Get all effects currently applied to rows and cards\r\n      // Run each 'turnstart' effect on each row\r\n      for (let rowId of playerRowIds) {\r\n        const allyRowEffects = gameState.rows[rowId].allyEffects;\r\n        const enemyRowEffects = gameState.rows[rowId].enemyEffects;\r\n\r\n        // Run ally row effects\r\n        for (let effect of allyRowEffects) {\r\n          if (effect.on === \"turnstart\") {\r\n            abilities[effect.hero][effect.id].run(rowId);\r\n            console.log(`running ${effect.id} on ${rowId}`);\r\n          }\r\n        }\r\n\r\n        // Run ally card effects\r\n        for (let cardId of gameState.rows[rowId].cardIds) {\r\n          const cardEffects =\r\n            gameState.playerCards[`player${playerTurn}cards`].cards[cardId]\r\n              .allyEffects;\r\n          for (let effect of cardEffects) {\r\n            if (effect.on === \"turnstart\") {\r\n              console.log(`running ${JSON.stringify(effect)} on ${rowId}`);\r\n              abilities[effect.hero][effect.id].run(cardId);\r\n            }\r\n          }\r\n        }\r\n\r\n        // Run enemy row effects\r\n        for (let effect of enemyRowEffects) {\r\n          if (effect.on === \"turnstart\") {\r\n            abilities[effect.hero][effect.id].run(rowId);\r\n            console.log(`running ${effect.id} on ${rowId}`);\r\n          }\r\n        }\r\n\r\n        // Run enemy card effects\r\n        for (let cardId of gameState.rows[rowId].cardIds) {\r\n          const cardEffects =\r\n            gameState.playerCards[`player${playerTurn}cards`].cards[cardId]\r\n              .enemyEffects;\r\n          for (let effect of cardEffects) {\r\n            if (effect.on === \"turnstart\") {\r\n              console.log(`running ${JSON.stringify(effect)} on ${rowId}`);\r\n              abilities[effect.hero][effect.id].run(cardId);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // Update ref to current turn\r\n    turnRef.current.turnCount = turnState.turnCount;\r\n  }, [turnState, gameState.playerCards, gameState.rows]);\r\n\r\n  return (\r\n    <div id=\"abilitiescontainer\">\r\n      {\"ability1\" in abilities[heroId] &&\r\n        currentCard.ability1Used === false && (\r\n          <div\r\n            id=\"ability1\"\r\n            className=\"ability ability1\"\r\n            onClick={activateAbility1}\r\n          ></div>\r\n        )}\r\n      {\"ability2\" in abilities[heroId] &&\r\n        currentCard.ability2Used === false && (\r\n          <div\r\n            id=\"ability2\"\r\n            className=\"ability ability2\"\r\n            onClick={activateAbility2}\r\n          ></div>\r\n        )}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useContext, useRef, useEffect } from \"react\";\r\nimport HeroAbilities from \"components/cards/HeroAbilities\";\r\nimport gameContext from \"context/gameContext\";\r\nimport HealthCounter from \"components/cards/HealthCounter\";\r\nimport ShieldCounter from \"components/cards/ShieldCounter\";\r\n\r\nexport default function CardFocus(props) {\r\n  const { gameState, dispatch } = useContext(gameContext);\r\n  const cardFocus = props.cardFocus;\r\n  const setCardFocus = props.setCardFocus;\r\n  const unsetCardFocus = props.unsetCardFocus;\r\n  const heroRef = useRef();\r\n\r\n  // Remember the last card to be focused, and use that card's data so an error isnt thrown\r\n  useEffect(() => {\r\n    if (cardFocus !== \"invisible\") {\r\n      heroRef.current = cardFocus;\r\n    }\r\n  });\r\n\r\n  // If cardFocus has been set to invisible, still render the component, but exclude all visible elements\r\n  // This is needed to ensure the 'turnstart' effects are picked up by HeroAbilities useEffect\r\n  // TODO: using 'display: none' still renders the element, maybe that is a cleaner way to implement this\r\n  if (cardFocus === \"invisible\") {\r\n    const playerHeroId = heroRef.current.playerHeroId;\r\n    const playerNum = parseInt(playerHeroId[0]);\r\n    const rowId = heroRef.current.rowId;\r\n\r\n    return (\r\n      <div id=\"cardfocuscontainer\">\r\n        <div id={`cardfocus`} className=\"cardfocus\">\r\n          <HeroAbilities\r\n            playerHeroId={playerHeroId}\r\n            rowId={rowId}\r\n            cardFocus={cardFocus}\r\n            setCardFocus={setCardFocus}\r\n            unsetCardFocus={unsetCardFocus}\r\n            setNextCardDraw={props.setNextCardDraw}\r\n            playAudio={props.playAudio}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  } else {\r\n    const playerHeroId = cardFocus.playerHeroId;\r\n    const playerNum = parseInt(playerHeroId[0]);\r\n    const rowId = cardFocus.rowId;\r\n\r\n    // Get card attributes from relevant player\r\n    const {\r\n      id,\r\n      name,\r\n      health,\r\n      shield,\r\n      effect,\r\n      enemyEffects,\r\n      allyEffects,\r\n      isDiscarded,\r\n    } = gameState.playerCards[`player${playerNum}cards`].cards[playerHeroId];\r\n\r\n    return (\r\n      <div id=\"cardfocuscontainer\">\r\n        <div\r\n          id={`${playerHeroId}-cardfocus`}\r\n          className=\"cardfocus\"\r\n          onClick={props.unsetCardFocus}\r\n        >\r\n          <HealthCounter type=\"cardfocuscounter\" health={health} />\r\n          {shield > 0 && (\r\n            <ShieldCounter type=\"cardfocuscounter\" shield={shield} />\r\n          )}\r\n          <img\r\n            src={require(`assets/heroes/${id}.png`).default}\r\n            className=\"cardimg\"\r\n            alt={\"Card Focus\"}\r\n          />\r\n          {health > 0 ? (\r\n            <HeroAbilities\r\n              playerHeroId={playerHeroId}\r\n              rowId={rowId}\r\n              cardFocus={cardFocus}\r\n              setCardFocus={setCardFocus}\r\n              unsetCardFocus={unsetCardFocus}\r\n              setNextCardDraw={props.setNextCardDraw}\r\n              playAudio={props.playAudio}\r\n            />\r\n          ) : null}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport $ from \"jquery\";\r\n\r\nfunction Tutorial() {\r\n  const buttonStyle = {\r\n    position: \"absolute\",\r\n    right: \"10px\",\r\n    top: \"10px\",\r\n    background: \"none\",\r\n    border: \"none\",\r\n  };\r\n\r\n  return (\r\n    <div id=\"tutorial-container\">\r\n      <div id=\"tutorial\">\r\n        <div className=\"tutorial-header\">\r\n          <button\r\n            style={buttonStyle}\r\n            onClick={() => $(\"#tutorial-container\").hide()}\r\n          >\r\n            X\r\n          </button>\r\n          <h3>\r\n            <strong>How To Play</strong>\r\n          </h3>\r\n          <div id=\"tutorial-tabs\">\r\n            <h4>\r\n              <strong>Card Info</strong>\r\n            </h4>\r\n            <h4>\r\n              <strong>Turn Actions</strong>\r\n            </h4>\r\n            <h4>\r\n              <strong>Other</strong>\r\n            </h4>\r\n          </div>\r\n        </div>\r\n\r\n        <div id=\"card-info-content\">\r\n          <div className=\"tutorial-image-container\">\r\n            <img src={require(`assets/tutorialcard.jpg`).default} />\r\n          </div>\r\n        </div>\r\n\r\n        <div id=\"turn-actions-content\">\r\n          <div className=\"tutorial-section\">\r\n            <p>\r\n              <strong>\r\n                <em>Play a Hero Card</em>\r\n              </strong>\r\n              <br />\r\n              Choose and play 1 Hero Card from your hand into the Front, Middle,\r\n              or Back Row. Any effects that occur when a Hero is played trigger\r\n              NOW.\r\n            </p>\r\n            <p>\r\n              The card's Power and Synergy scores will be added to your scores\r\n              at this point. Each player has their own Power score, when both\r\n              players have played all of their cards, the round is over and the\r\n              player with the highest Power score wins. Each row has it's own\r\n              Synergy score. Synergy points are consumed when using a card's\r\n              Ultimate ability (see the previous page for information on Card\r\n              Power, Synergy and abilities).\r\n            </p>\r\n          </div>\r\n          <div className=\"tutorial-section\">\r\n            <p>\r\n              <strong>\r\n                <em>Use Primary Ability</em>\r\n              </strong>{\" \"}\r\n              (if you wish)\r\n              <br />\r\n              Use the played Hero's primary ability right after you play them\r\n              onto the battlefield. This ability may only be used once per play\r\n              of a Hero card. If you decide to NOT use their Primary Ability you\r\n              may not use it at a later time unless they have been returned to\r\n              your hand and played again.\r\n            </p>\r\n          </div>\r\n          <div className=\"tutorial-section\">\r\n            <p>\r\n              <strong>\r\n                <em>Activate an Ultimate Ability</em>\r\n              </strong>\r\n              <br />\r\n              Choose a Hero that has already been played and activate their\r\n              second (Ultimate) ability. The Synergy cost shown to the right of\r\n              the ability name will be deducted from the row's Synergy score.\r\n              There must be enough synergy in that row to pay for the cost of\r\n              the Ultimate Ability. You may only use each Ultimate Ability once\r\n              per round unless the hero has been returned to your hand and\r\n              played a second time.\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"tutorial-section\">\r\n            <p>\r\n              <strong>\r\n                <em>Pass</em>\r\n              </strong>\r\n              <br />\r\n              You must have six cards on the battlefield in order to choose the\r\n              Pass Action. After passing you may take no more actions this\r\n              round.\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Tutorial;\r\n","import React, { useState, useReducer, useEffect, useRef } from \"react\";\r\nimport gameContext from \"context/gameContext\";\r\nimport turnContext from \"context/turnContext\";\r\nimport { DragDropContext } from \"react-beautiful-dnd\";\r\nimport \"./App.css\";\r\nimport \"./1300.css\";\r\nimport \"./760.css\";\r\nimport PlayerHalf from \"components/layout/PlayerHalf\";\r\nimport TitleCard from \"components/layout/TitleCard\";\r\nimport Footer from \"components/layout/Footer\";\r\nimport CardFocus from \"components/cards/CardFocus\";\r\nimport AudioPlayer from \"components/layout/AudioPlayer\";\r\nimport MatchCounter from \"components/layout/MatchCounter\";\r\nimport data from \"data\";\r\nimport getRandInt, { PlayerCard } from \"helper\";\r\nimport produce from \"immer\";\r\nimport _ from \"lodash\";\r\nimport Tutorial from \"components/layout/Tutorial\";\r\n\r\nexport const ACTIONS = {\r\n  ADD_CARD_EFFECT: \"add-card-effect\",\r\n  ADD_CARD_TO_HAND: \"add-card-to-hand\",\r\n  ADD_ROW_EFFECT: \"add-row-effect\",\r\n  ADD_ROW_SHIELD: \"add-row-shield\",\r\n  CREATE_CARD: \"create-card\",\r\n  DAMAGE_ROW_SHIELD: \"damage-row-shield\",\r\n  DISCARD_CARD: \"discard-card\",\r\n  EDIT_CARD: \"edit-card\",\r\n  EDIT_ROW: \"edit-row\",\r\n  MOVE_CARD: \"move-card\",\r\n  REMOVE_EFFECTS: \"remove-effects\",\r\n  SET_POWER: \"set-power\",\r\n  SET_SYNERGY: \"set-synergy\",\r\n  UPDATE_CARD: \"update-card\",\r\n  UPDATE_POWER: \"update-power\",\r\n  UPDATE_ROW: \"update-row\",\r\n  UPDATE_SYNERGY: \"update-synergy\",\r\n};\r\n\r\nfunction reducer(gameState, action) {\r\n  switch (action.type) {\r\n    // Add hero effect to a card\r\n    case ACTIONS.ADD_CARD_EFFECT: {\r\n      return produce(gameState, (draft) => {\r\n        // Payload info\r\n        const targetCardId = action.payload.targetCardId;\r\n        const targetPlayer = targetCardId[0];\r\n        const playerHeroId = action.payload.playerHeroId;\r\n        const effectId = action.payload.effectId;\r\n\r\n        // Get effect object from state\r\n        const playerNum = parseInt(playerHeroId[0]);\r\n        const cardEffect =\r\n          gameState.playerCards[`player${playerNum}cards`].cards[playerHeroId]\r\n            .effects[effectId];\r\n\r\n        return produce(gameState, (draft) => {\r\n          if (cardEffect.player === \"ally\") {\r\n            draft.playerCards[`player${targetPlayer}cards`].cards[\r\n              targetCardId\r\n            ].allyEffects.push(cardEffect);\r\n          } else if (cardEffect.player === \"enemy\") {\r\n            draft.playerCards[`player${targetPlayer}cards`].cards[\r\n              targetCardId\r\n            ].enemyEffects.push(cardEffect);\r\n          }\r\n        });\r\n      });\r\n    }\r\n\r\n    // Add hero effect to a row\r\n    case ACTIONS.ADD_ROW_EFFECT: {\r\n      // Payload info\r\n      const targetRow = action.payload.targetRow;\r\n      const playerHeroId = action.payload.playerHeroId;\r\n      const effectId = action.payload.effectId;\r\n      const playerNum = parseInt(playerHeroId[0]);\r\n      // Get effect object from state\r\n      const rowEffect =\r\n        gameState.playerCards[`player${playerNum}cards`].cards[playerHeroId]\r\n          .effects[effectId];\r\n\r\n      return produce(gameState, (draft) => {\r\n        if (rowEffect.player === \"ally\") {\r\n          draft.rows[targetRow].allyEffects.push(rowEffect);\r\n        } else if (rowEffect.player === \"enemy\") {\r\n          draft.rows[targetRow].enemyEffects.push(rowEffect);\r\n        }\r\n      });\r\n    }\r\n\r\n    // Add shield value to row\r\n    case ACTIONS.ADD_ROW_SHIELD: {\r\n      const playerHeroId = action.payload.playerHeroId;\r\n      const targetRow = action.payload.targetRow;\r\n      const rowShield = action.payload.rowShield;\r\n\r\n      // If hero already added shield to row, increase shield, else set shield\r\n      return produce(gameState, (draft) => {\r\n        draft.rows[targetRow].shield.push({\r\n          playerHeroId: playerHeroId,\r\n          shieldValue: rowShield,\r\n        });\r\n      });\r\n    }\r\n\r\n    // Add a created card in to the player's hand\r\n    case ACTIONS.ADD_CARD_TO_HAND: {\r\n      const playerNum = action.payload.playerNum;\r\n      const playerHeroId = action.payload.playerHeroId;\r\n\r\n      return produce(gameState, (draft) => {\r\n        draft.rows[`player${playerNum}hand`].cardIds.push(playerHeroId);\r\n      });\r\n    }\r\n\r\n    // Adds a card to player's cards (doesn't add to a row)\r\n    case ACTIONS.CREATE_CARD: {\r\n      const playerNum = action.payload.playerNum;\r\n      const heroId = action.payload.heroId;\r\n      const newCard = new PlayerCard(playerNum, heroId);\r\n\r\n      // Add new card to playercards data (does not add the card to any row)\r\n      // Call Move_Card to make card visible\r\n      return produce(gameState, (draft) => {\r\n        draft.playerCards[`player${playerNum}cards`].cards[\r\n          newCard.playerHeroId\r\n        ] = newCard;\r\n      });\r\n    }\r\n\r\n    // Damage a row's shields\r\n    case ACTIONS.DAMAGE_ROW_SHIELD: {\r\n      const targetRow = action.payload.targetRow;\r\n      const rowShieldDamage = action.payload.rowShieldDamage;\r\n\r\n      console.log(`applying ${rowShieldDamage} damage to row ${targetRow}`);\r\n\r\n      return produce(gameState, (draft) => {\r\n        const targetRowShieldArr = draft.rows[targetRow].shield;\r\n        let damageDone = 0;\r\n\r\n        // Reduce shield of each shieldEntry in the array until 0, then move on to the next until full damage is done\r\n        // Use labeled break to break out of both loops if full damage has been done\r\n        outer: for (let x = 0; x < targetRowShieldArr.length; x++) {\r\n          for (let i = 0; i < rowShieldDamage; i++) {\r\n            if (damageDone === rowShieldDamage) break outer;\r\n\r\n            targetRowShieldArr[x].shieldValue -= 1;\r\n            damageDone += 1;\r\n\r\n            console.log(\r\n              `${targetRowShieldArr[x].playerHeroId}'s shield is now ${targetRowShieldArr[x].shieldValue}`\r\n            );\r\n          }\r\n        }\r\n\r\n        // Delete entries in shield array if their shieldValue has been reduced to 0\r\n        for (let x = 0; x < targetRowShieldArr.length; x++) {\r\n          if (targetRowShieldArr[x].shieldValue === 0) {\r\n            targetRowShieldArr.splice(x, 1);\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n    // Discard a card\r\n    case ACTIONS.DISCARD_CARD: {\r\n      const targetCardId = action.payload.targetCardId;\r\n      const targetCardRow = action.payload.targetCardRow;\r\n      const playerNum = parseInt(targetCardId[0]);\r\n\r\n      // Identify affected card, mark as discarded, and remove from relevant row\r\n      return produce(gameState, (draft) => {\r\n        draft.playerCards[`player${playerNum}cards`].cards[\r\n          targetCardId\r\n        ].isDiscarded = true;\r\n        draft.rows[targetCardRow].cardIds = draft.rows[\r\n          targetCardRow\r\n        ].cardIds.filter((cardId) => cardId !== targetCardId);\r\n      });\r\n    }\r\n\r\n    // Replace a value\r\n    case ACTIONS.EDIT_CARD: {\r\n      // Required variables\r\n      const playerNum = action.payload.playerNum;\r\n      const targetCardId = action.payload.targetCardId;\r\n      const editKeys = action.payload.editKeys;\r\n      const editValues = action.payload.editValues;\r\n\r\n      // Identify affected card and apply all edits\r\n      return produce(gameState, (draft) => {\r\n        let targetCard =\r\n          draft.playerCards[`player${playerNum}cards`].cards[targetCardId];\r\n\r\n        // Use lodash to set object properties (allows a string to be used for a nested object path)\r\n        for (let i = 0; i < editKeys.length; i++) {\r\n          _.set(targetCard, editKeys[i], editValues[i]);\r\n        }\r\n      });\r\n    }\r\n\r\n    // Replaces existing values with new values\r\n    case ACTIONS.EDIT_ROW: {\r\n      const targetRow = action.payload.targetRow;\r\n      const editKeys = action.payload.editKeys;\r\n      const editValues = action.payload.editValues;\r\n\r\n      // Identify affected card and apply all edits\r\n      return produce(gameState, (draft) => {\r\n        for (let i = 0; i < editKeys.length; i++) {\r\n          draft.rows[targetRow][editKeys[i]] = editValues[i];\r\n        }\r\n      });\r\n    }\r\n\r\n    // Moves a card within or between rows\r\n    case ACTIONS.MOVE_CARD: {\r\n      // Variables from payload\r\n      const targetCardId = action.payload.targetCardId;\r\n      const startRowId = action.payload.startRowId;\r\n      const startIndex = action.payload.startIndex;\r\n      const finishRowId = action.payload.finishRowId;\r\n      const finishIndex = action.payload.finishIndex;\r\n\r\n      // Variables from game state\r\n      const startRow = gameState.rows[startRowId];\r\n      const finishRow = gameState.rows[finishRowId];\r\n\r\n      // Move card within same row\r\n      if (startRowId === finishRowId) {\r\n        const rowId = startRowId;\r\n        const row = startRow;\r\n        const newCardIds = Array.from(row.cardIds);\r\n        newCardIds.splice(startIndex, 1);\r\n        newCardIds.splice(finishIndex, 0, targetCardId);\r\n\r\n        return produce(gameState, (draft) => {\r\n          draft.rows[rowId].cardIds = newCardIds;\r\n        });\r\n      }\r\n\r\n      // Moving from one row to another\r\n      const newStartRowCardIds = Array.from(startRow.cardIds);\r\n      newStartRowCardIds.splice(startIndex, 1);\r\n\r\n      const newFinishRowCardIds = Array.from(finishRow.cardIds);\r\n      newFinishRowCardIds.splice(finishIndex, 0, targetCardId);\r\n\r\n      return produce(gameState, (draft) => {\r\n        draft.rows[startRowId].cardIds = newStartRowCardIds;\r\n        draft.rows[finishRowId].cardIds = newFinishRowCardIds;\r\n      });\r\n    }\r\n\r\n    // Sets player power\r\n    case ACTIONS.SET_POWER: {\r\n      const playerNum = action.payload.playerNum;\r\n      const rowPosition = action.payload.rowPosition;\r\n      const powerValue = action.payload.powerValue;\r\n\r\n      return produce(gameState, (draft) => {\r\n        draft.rows[`player${playerNum}hand`].power[rowPosition] = powerValue;\r\n      });\r\n    }\r\n\r\n    // Sets row synergy\r\n    case ACTIONS.SET_SYNERGY: {\r\n      const rowId = action.payload.rowId;\r\n      const newSynergyVal = action.payload.newSynergyVal;\r\n\r\n      return produce(gameState, (draft) => {\r\n        draft.rows[rowId].synergy = newSynergyVal;\r\n      });\r\n    }\r\n\r\n    // Update value based on previous value\r\n    case ACTIONS.UPDATE_CARD: {\r\n      // Required variables\r\n      const playerNum = action.payload.playerNum;\r\n      const cardId = action.payload.cardId;\r\n      const updateKeys = action.payload.updateKeys;\r\n      const updateValues = action.payload.updateValues;\r\n\r\n      // Identify affected card and apply all updates\r\n      return produce(gameState, (draft) => {\r\n        let targetCard =\r\n          draft.playerCards[`player${playerNum}cards`].cards[cardId];\r\n\r\n        for (let i = 0; i < updateKeys.length; i++) {\r\n          targetCard[updateKeys[i]] += updateValues[i];\r\n        }\r\n      });\r\n    }\r\n\r\n    // Updatesrow synergy\r\n    case ACTIONS.UPDATE_POWER: {\r\n      // Required variables\r\n      const targetPlayer = action.payload.targetPlayer;\r\n      const targetRow = action.payload.targetRow;\r\n      const powerValue = action.payload.powerValue;\r\n\r\n      // Update synergy and set value, minimum of 0 synergy\r\n      return produce(gameState, (draft) => {\r\n        let rowPower = draft.rows[`player${targetPlayer}hand`].power[targetRow];\r\n        rowPower += powerValue;\r\n        const newPower = Math.max(0, rowPower);\r\n        draft.rows[`player${targetPlayer}hand`].power[targetRow] = newPower;\r\n      });\r\n    }\r\n\r\n    // Update value based on previous value\r\n    case ACTIONS.UPDATE_ROW: {\r\n      // Required variables\r\n      const playerNum = action.payload.playerNum;\r\n      const targetRow = action.payload.targetRow;\r\n      const updateKeys = action.payload.updateKeys;\r\n      const updateValues = action.payload.updateValues;\r\n\r\n      // Identify affected card and apply all updates\r\n      return produce(gameState, (draft) => {\r\n        for (let i = 0; i < updateKeys.length; i++) {\r\n          draft.rows[targetRow][updateKeys[i]] += updateValues[i];\r\n        }\r\n      });\r\n    }\r\n\r\n    // Sets row synergy\r\n    case ACTIONS.UPDATE_SYNERGY: {\r\n      // Required variables\r\n      const rowId = action.payload.rowId;\r\n      const synergyCost = action.payload.synergyCost;\r\n\r\n      // Update synergy and set value, minimum of 0 synergy\r\n      return produce(gameState, (draft) => {\r\n        let rowSynergy = draft.rows[rowId].synergy;\r\n        rowSynergy += synergyCost;\r\n        const newSynergy = Math.max(0, rowSynergy);\r\n        draft.rows[rowId].synergy = newSynergy;\r\n      });\r\n    }\r\n\r\n    default:\r\n      return gameState;\r\n  }\r\n}\r\n\r\nexport default function App() {\r\n  const [gameState, dispatch] = useReducer(reducer, data);\r\n\r\n  const [matchState, setMatchState] = useState({\r\n    player1: { wins: 0 },\r\n    player2: { wins: 0 },\r\n    wonLastRound: 0,\r\n  });\r\n  const [turnState, setTurnState] = useState({\r\n    turnCount: 1,\r\n    playerTurn: getRandInt(1, 3),\r\n    player1Passed: false,\r\n    player2Passed: false,\r\n  });\r\n  const [cardFocus, setCardFocus] = useState(null);\r\n  const [nextCardDraw, setNextCardDraw] = useState({\r\n    player1: null,\r\n    player2: null,\r\n  });\r\n  const [playAudio, setPlayAudio] = useState(false);\r\n\r\n  // References for setting state inside useEffects\r\n  let matchRef = useRef(null);\r\n\r\n  // End the round and update match scores when both players have passed their turn\r\n  useEffect(() => {\r\n    // Set ref to current match state, alter ref within endRound(), then call setMatchState once using ref as new state\r\n    matchRef.current = matchState;\r\n\r\n    // End the round, calculate who won, update score and move to next round\r\n    const endRound = () => {\r\n      // Get power data\r\n      const totalPower1 = gameState.rows.player1hand.totalPower();\r\n      const totalPower2 = gameState.rows.player2hand.totalPower();\r\n\r\n      // Get player rows info\r\n      const player1Rows = [\r\n        gameState.rows[\"1b\"],\r\n        gameState.rows[\"1m\"],\r\n        gameState.rows[\"1f\"],\r\n      ];\r\n      const player2Rows = [\r\n        gameState.rows[\"2b\"],\r\n        gameState.rows[\"2m\"],\r\n        gameState.rows[\"2f\"],\r\n      ];\r\n\r\n      // Calculate winning player\r\n      let winningPlayer = 0;\r\n\r\n      if (totalPower1 > totalPower2) winningPlayer = 1;\r\n      else if (totalPower2 > totalPower1) winningPlayer = 2;\r\n      // If power is tied, remaining synergy decides the winner\r\n      else if (totalPower1 === totalPower2) {\r\n        let player1Synergy = 0;\r\n        let player2Synergy = 0;\r\n\r\n        for (let row of player1Rows) {\r\n          player1Synergy += row.synergy;\r\n        }\r\n        for (let row of player2Rows) {\r\n          player2Synergy += row.synergy;\r\n        }\r\n\r\n        if (player1Synergy > player2Synergy) winningPlayer = 1;\r\n        else if (player2Synergy > player1Synergy) winningPlayer = 2;\r\n        // If remaining synergy is also tied, it is a draw, denoted by setting player 3 as the winner\r\n        else winningPlayer = 3;\r\n      }\r\n\r\n      // Reset turn state\r\n      // Winner of last round goes first next round. If round was a draw, random player goes first\r\n      setTurnState((prevState) => ({\r\n        turnCount: 1,\r\n        playerTurn:\r\n          winningPlayer === 3\r\n            ? prevState.playerTurn\r\n            : winningPlayer === 1\r\n            ? 1\r\n            : 2,\r\n        player1Passed: false,\r\n        player2Passed: false,\r\n      }));\r\n\r\n      // Update match state\r\n      // Update state if round is a draw\r\n      if (winningPlayer === 3) {\r\n        alert(\"Round is a draw! Both players receive a win.\");\r\n\r\n        // Add a win to both players' record for a draw\r\n        matchRef.current.player1.wins += 1;\r\n        matchRef.current.player2.wins += 1;\r\n\r\n        // If players have drawn both rounds and so both have two wins, match is a draw\r\n        if (matchState.player1.wins === 2 && matchState.player2.wins === 2) {\r\n          alert(\"The match is a draw!\");\r\n          alert(\"Starting a new match.\");\r\n          window.location.reload();\r\n        }\r\n\r\n        // Update state for whichever player won\r\n      } else {\r\n        // Add a win to winner's record\r\n        matchRef.current[`player${winningPlayer}`].wins += 1;\r\n        matchRef.current.wonLastRound = winningPlayer;\r\n        alert(`Player ${winningPlayer} wins the round!`);\r\n      }\r\n\r\n      // Discard all cards\r\n      // Set ids of rows to be reset\r\n      const player1RowIds = [\"1b\", \"1m\", \"1f\"];\r\n      const player2RowIds = [\"2b\", \"2m\", \"2f\"];\r\n\r\n      // Get card ids from every player 1 row\r\n      let player1Cards = [];\r\n      for (let id of player1RowIds) {\r\n        player1Cards.push(gameState.rows[id].cardIds);\r\n      }\r\n\r\n      // Get card ids from every player 2 row\r\n      let player2Cards = [];\r\n      for (let id of player2RowIds) {\r\n        player2Cards.push(gameState.rows[id].cardIds);\r\n      }\r\n\r\n      // Reset power, synergy, effects and discard player 1 cards\r\n      for (let i = 0; i < player1Cards.length; i++) {\r\n        dispatch({\r\n          type: ACTIONS.EDIT_ROW,\r\n          payload: {\r\n            targetRow: player1RowIds[i],\r\n            editKeys: [\"synergy\", \"shield\", \"allyEffects\", \"enemyEffects\"],\r\n            editValues: [0, [], [], []],\r\n          },\r\n        });\r\n        for (let x = 0; x < player1Cards[i].length; x++) {\r\n          dispatch({\r\n            type: ACTIONS.DISCARD_CARD,\r\n            payload: {\r\n              playerNum: 1,\r\n              targetCardId: player1Cards[i][x],\r\n              targetCardRow: player1RowIds[i],\r\n            },\r\n          });\r\n        }\r\n      }\r\n      dispatch({\r\n        type: ACTIONS.EDIT_ROW,\r\n        payload: {\r\n          targetRow: \"player1hand\",\r\n          editKeys: [\"cardsPlayed\", \"power\"],\r\n          editValues: [0, { f: 0, m: 0, b: 0 }],\r\n        },\r\n      });\r\n\r\n      // Reset power, synergy, effects and discard player 2 cards\r\n      for (let i = 0; i < player2Cards.length; i++) {\r\n        dispatch({\r\n          type: ACTIONS.EDIT_ROW,\r\n          payload: {\r\n            targetRow: player2RowIds[i],\r\n            editKeys: [\"synergy\", \"shield\", \"allyEffects\", \"enemyEffects\"],\r\n            editValues: [0, [], [], []],\r\n          },\r\n        });\r\n        for (let x = 0; x < player2Cards[i].length; x++) {\r\n          dispatch({\r\n            type: ACTIONS.DISCARD_CARD,\r\n            payload: {\r\n              playerNum: 2,\r\n              targetCardId: player2Cards[i][x],\r\n              targetCardRow: player2RowIds[i],\r\n            },\r\n          });\r\n        }\r\n      }\r\n\r\n      dispatch({\r\n        type: ACTIONS.EDIT_ROW,\r\n        payload: {\r\n          targetRow: \"player2hand\",\r\n          editKeys: [\"cardsPlayed\", \"power\"],\r\n          editValues: [0, { f: 0, m: 0, b: 0 }],\r\n        },\r\n      });\r\n\r\n      // Set new match state using the ref that was mutated\r\n      setMatchState(matchRef.current);\r\n\r\n      // TODO: create a play again button\r\n      // If a player has reached two wins, end the match and reload the page for a new match\r\n      if (matchState[\"player1\"].wins === 2) {\r\n        alert(\"Player 1 wins the match!\");\r\n        alert(\"Starting a new match.\");\r\n        window.location.reload();\r\n      } else if (matchState[\"player2\"].wins === 2) {\r\n        alert(\"Player 2 wins the match!\");\r\n        alert(\"Starting a new match.\");\r\n        window.location.reload();\r\n      }\r\n    };\r\n    // When both players pass, end the round and move to the next round\r\n    if (turnState.player1Passed === true && turnState.player2Passed === true) {\r\n      endRound();\r\n    }\r\n  }, [turnState, gameState.rows, matchState]);\r\n\r\n  // Handle card dragging\r\n  function handleOnDragEnd(result) {\r\n    const { destination, source, draggableId } = result;\r\n    if (!destination) return;\r\n\r\n    // Get card movement data\r\n    const startRowId = source.droppableId;\r\n    const finishRowId = destination.droppableId;\r\n    const playerNum = turnState.playerTurn;\r\n    const finishPosition = finishRowId[1];\r\n    const heroId = draggableId.slice(1, draggableId.length);\r\n    let finishSynergy = gameState.rows[finishRowId].synergy;\r\n\r\n    // If not moving card within player's hand (i.e. moving into a row),\r\n    // Set new row synergy and set card to played\r\n    if (finishRowId[0] !== \"p\" && parseInt(finishRowId[0]) === playerNum) {\r\n      // Apply card movement\r\n      dispatch({\r\n        type: ACTIONS.MOVE_CARD,\r\n        payload: {\r\n          targetCardId: draggableId,\r\n          startRowId: startRowId,\r\n          finishRowId: finishRowId,\r\n          startIndex: source.index,\r\n          finishIndex: destination.index,\r\n        },\r\n      });\r\n      // If audio is on, play intro audio\r\n      if (playAudio === true) {\r\n        try {\r\n          const introAudio = new Audio(\r\n            require(`assets/audio/${heroId}-intro.mp3`).default\r\n          );\r\n          introAudio.play();\r\n        } catch (err) {\r\n          console.log(\"No intro audio available\");\r\n        }\r\n      }\r\n\r\n      // Set new row synergy\r\n      const addSynergy =\r\n        gameState.playerCards[`player${playerNum}cards`].cards[draggableId]\r\n          .synergy[finishPosition];\r\n\r\n      dispatch({\r\n        type: ACTIONS.UPDATE_SYNERGY,\r\n        payload: {\r\n          rowId: finishRowId,\r\n          synergyCost: addSynergy,\r\n        },\r\n      });\r\n\r\n      // Set card as played and reduce synergy to 0 (so future moves dont also add synergy)\r\n      dispatch({\r\n        type: ACTIONS.EDIT_CARD,\r\n        payload: {\r\n          playerNum: playerNum,\r\n          targetCardId: draggableId,\r\n          editKeys: [\"isPlayed\", \"synergy\"],\r\n          editValues: [true, { f: 0, m: 0, b: 0 }],\r\n        },\r\n      });\r\n\r\n      // Keep track of how many cards have been played\r\n      dispatch({\r\n        type: ACTIONS.UPDATE_ROW,\r\n        payload: {\r\n          targetRow: `player${playerNum}hand`,\r\n          updateKeys: [\"cardsPlayed\"],\r\n          updateValues: [1],\r\n        },\r\n      });\r\n    }\r\n    return;\r\n  }\r\n\r\n  return (\r\n    <div id=\"page-wrapper\">\r\n      <TitleCard playAudio={playAudio} setPlayAudio={setPlayAudio} />\r\n      <div id=\"landscape-wrapper\">\r\n        <turnContext.Provider value={{ turnState, setTurnState }}>\r\n          <gameContext.Provider value={{ gameState, dispatch }}>\r\n            <DragDropContext onDragEnd={handleOnDragEnd}>\r\n              <PlayerHalf\r\n                playerNum={1}\r\n                setCardFocus={setCardFocus}\r\n                nextCardDraw={nextCardDraw}\r\n                setNextCardDraw={setNextCardDraw}\r\n              />\r\n              <div id=\"center-section\">\r\n                <span>Match</span>\r\n                <div id=\"match-counters\">\r\n                  <MatchCounter playerNum={1} matchState={matchState} />\r\n                  <MatchCounter playerNum={2} matchState={matchState} />\r\n                </div>\r\n                <span>Score</span>\r\n              </div>\r\n              <PlayerHalf\r\n                playerNum={2}\r\n                setCardFocus={setCardFocus}\r\n                nextCardDraw={nextCardDraw}\r\n                setNextCardDraw={setNextCardDraw}\r\n              />\r\n            </DragDropContext>\r\n            {cardFocus !== null && (\r\n              <CardFocus\r\n                setCardFocus={setCardFocus}\r\n                unsetCardFocus={() => {\r\n                  setCardFocus(\"invisible\");\r\n                  console.log(`cardfocus is ${JSON.stringify(cardFocus)}`);\r\n                }}\r\n                cardFocus={cardFocus}\r\n                setNextCardDraw={setNextCardDraw}\r\n                playAudio={playAudio}\r\n              />\r\n            )}\r\n\r\n            <Tutorial />\r\n          </gameContext.Provider>\r\n        </turnContext.Provider>\r\n      </div>\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}